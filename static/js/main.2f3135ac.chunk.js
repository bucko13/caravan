(this.webpackJsonpcaravan=this.webpackJsonpcaravan||[]).push([[0],{1049:function(e,t,a){},1050:function(e,t,a){},1051:function(e,t,a){},1052:function(e,t,a){e.exports=a.p+"static/media/logo.66481e66.png"},1054:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"getPendingBalance",(function(){return ge})),a.d(n,"getSlicesWithLastUsed",(function(){return Pe})),a.d(n,"getSpentSlices",(function(){return ye})),a.d(n,"getSlicesWithBalance",(function(){return Se})),a.d(n,"getZeroBalanceSlices",(function(){return Te})),a.d(n,"getUnknownAddressSlices",(function(){return Ie})),a.d(n,"getUnknownAddresses",(function(){return Oe})),a.d(n,"getDepositableSlices",(function(){return we}));var r={};a.r(r),a.d(r,"SET_ERROR_NOTIFICATION",(function(){return Ur})),a.d(r,"CLEAR_ERROR_NOTIFICATION",(function(){return Lr})),a.d(r,"setErrorNotification",(function(){return Fr})),a.d(r,"clearErrorNotification",(function(){return zr}));var s={};a.r(s),a.d(s,"START_TEST_SUITE_RUN",(function(){return Ds})),a.d(s,"SET_CURRENT_TEST_RUN",(function(){return Us})),a.d(s,"startTestSuiteRun",(function(){return Ls})),a.d(s,"setCurrentTestRun",(function(){return Fs}));var o={};a.r(o),a.d(o,"SET_KEYSTORE",(function(){return zs})),a.d(o,"SET_KEYSTORE_NOTE",(function(){return Ws})),a.d(o,"SET_KEYSTORE_STATUS",(function(){return Hs})),a.d(o,"setKeystore",(function(){return Gs})),a.d(o,"setKeystoreNote",(function(){return qs})),a.d(o,"setKeystoreStatus",(function(){return Xs}));var i={};a.r(i),a.d(i,"START_TEST_RUN",(function(){return Ys})),a.d(i,"END_TEST_RUN",(function(){return Vs})),a.d(i,"RESET_TEST_RUN",(function(){return Zs})),a.d(i,"SET_TEST_RUN_NOTE",(function(){return Js})),a.d(i,"startTestRun",(function(){return Qs})),a.d(i,"endTestRun",(function(){return $s})),a.d(i,"resetTestRun",(function(){return eo})),a.d(i,"setTestRunNote",(function(){return to}));var l=a(0),c=a.n(l),u=a(30),d=a.n(u),p=a(62),m=a(17),E=a(667),h=a.n(E),f=a(668),b=a(692),v=a(154),g=a(1104),P=a(1103),y=a(208),S=a(377),T=a(99),I=a(1082),O=a(1079),w=a(1080),x=a(1081),C=a(511),R=a(1060),j=a(1061),k=a(1085),N=a(512),_=a(1089),A=a(1083),K=a(1084),M=a(1086),B=a(1087),D=a(1088),U=a(1090),L=a(1091),F=a(8),z=a(28),W=a.n(z);function H(e,t){return c.a.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},t)}function G(e,t){var a=new Blob([e],{type:"text/plain"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(a,t);else{var n=window.document.createElement("a");n.href=window.URL.createObjectURL(a),n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}}function q(e,t){for(var a=[],n=new W.a(0),r=function(r){var s=e[r];if(s.utxos.forEach((function(e){a.push(Object(F.a)({},e,{multisig:s.multisig,bip32Path:s.bip32Path,change:s.change}))})),(n=n.plus(s.balanceSats)).isGreaterThanOrEqualTo(t))return"break"},s=0;s<e.length;s+=1){if("break"===r(s))break}return a}var X=function(){return c.a.createElement(O.a,null,c.a.createElement(w.a,{title:"Disclaimer"}),c.a.createElement(x.a,null,c.a.createElement("small",null,"This application is in \u201calpha\u201d state and is presented for evaluation and testing only. It is provided \u201cas is,\u201d and any express or implied warranties, including but not limited to the implied warranties of merchantability and fitness for a particular purpose, are disclaimed. By using this application, you accept all risks of such use, including full responsibility for any direct or indirect loss of any kind resulting from the use of this application, which may involve complete loss of any Bitcoin or other coins associated with addresses used with this application. In no event shall Unchained Capital, Inc., its employees and affiliates, or developers of this application be liable for any direct, indirect, incidental, special, exemplary, or consequential damages (including, but not limited to, procurement of substitute goods or services; loss of use, data, or profits; or business interruption) however caused and on any theory of liability, whether in contract, strict liability, or tort (including negligence or otherwise) arising in any way out of the use of this application, even if advised of the possibility of such damage.")))},Y=function(){return c.a.createElement("div",null,c.a.createElement(S.a,{mt:4,mb:2},c.a.createElement(T.a,{variant:"h2"},"Welcome to Caravan!")),c.a.createElement(I.a,{container:!0,spacing:3},c.a.createElement(I.a,{container:!0,item:!0,md:8,spacing:2,direction:"column"},c.a.createElement(I.a,{item:!0},c.a.createElement(O.a,null,c.a.createElement(w.a,{title:"Get Started"}),c.a.createElement(x.a,null,c.a.createElement(S.a,{mb:3},c.a.createElement(T.a,null,"Start using caravan by choosing to either make a multisig wallet or fully stateless address.")),c.a.createElement(I.a,{container:!0,alignItems:"center",justify:"center",spacing:3},c.a.createElement(I.a,{item:!0,xs:10,md:4},c.a.createElement(C.a,{variant:"contained",size:"large",color:"primary",href:"#/wallet",endIcon:c.a.createElement(A.a,null)},"Setup Wallet")),c.a.createElement(I.a,{item:!0,xs:10,md:4},c.a.createElement(C.a,{variant:"contained",size:"large",color:"default",href:"#/address",endIcon:c.a.createElement(K.a,null)},"Setup Address")))))),c.a.createElement(I.a,{item:!0},c.a.createElement(O.a,null,c.a.createElement(w.a,{title:"Stateless Multisig Coordinator"}),c.a.createElement(x.a,null,c.a.createElement("p",null,"Caravan is making bitcoin ",c.a.createElement("strong",null,"multisig")," custody easier and safer through transparency and standards."),c.a.createElement("p",null,"Caravan is a ",c.a.createElement("strong",null,"coordination")," software. It connects to a source of consensus and your keys to build and interact with multisig bitcoin addresses."),c.a.createElement("p",null,"Caravan is ",c.a.createElement("strong",null,"stateless"),". It does not itself store any data. You must safekeep the addresses (and redeem scripts & BIP32 paths) you create.")))),c.a.createElement(I.a,{item:!0},c.a.createElement(O.a,null,c.a.createElement(w.a,{title:"Keys"}),c.a.createElement(x.a,null,c.a.createElement("p",null,"All bitcoin is ultimately protected by private keys."),c.a.createElement("p",null,"Your private key may live on a piece of paper, a hardware wallet, some software on a laptop, or even just in your mind. Caravan, being stateless, cannot store your private key but it can talk to hardware devices or software applications which do."),c.a.createElement("p",null,"Caravan supports entering public keys and signatures via text, so any wallet which can export such data can be made compatible with Caravan.")))),c.a.createElement(I.a,{item:!0},c.a.createElement(O.a,null,c.a.createElement(w.a,{title:"Consensus"}),c.a.createElement(x.a,null,c.a.createElement("p",null,"In order to look up address balances and broadcast transactions, Caravan requires knowledge of the constantly changing bitcoin network."),c.a.createElement("p",null,"Running a full bitcoin node is the best way to determine the current state of the bitcoin network. Caravan can be easily configured to use your own bitcoin node for consensus information and broadcasting transactions."),c.a.createElement("p",null,"If you don't want to or cannot run your own full node, Caravan defaults to using the freely available API at",c.a.createElement("code",null," blockstream.info"),"."))))),c.a.createElement(I.a,{container:!0,item:!0,md:4,spacing:4,direction:"column"},c.a.createElement(I.a,{item:!0},c.a.createElement(O.a,null,c.a.createElement(w.a,{title:"Learn More"}),c.a.createElement(x.a,null,c.a.createElement(R.a,null,c.a.createElement(j.a,null,c.a.createElement(k.a,null,c.a.createElement(M.a,null)),c.a.createElement(N.a,null,H("https://www.unchained-capital.com/blog/the-caravan-arrives/","Blog Post"))),c.a.createElement(j.a,null,c.a.createElement(k.a,null,c.a.createElement(B.a,null)),c.a.createElement(N.a,null,H("https://www.youtube.com/playlist?list=PLUM8mrUjWoPRsVGEZ1gTntqPd4xrQZoiH","Video Tutorials"))),c.a.createElement(j.a,null,c.a.createElement(k.a,null,c.a.createElement(D.a,null)),c.a.createElement(N.a,null,H("https://github.com/unchained-capital/caravan","Source Code"))))))),c.a.createElement(I.a,{item:!0},c.a.createElement(O.a,null,c.a.createElement(w.a,{title:"Supported Devices"}),c.a.createElement(x.a,null,"Caravan has been ",c.a.createElement("a",{href:"#/test"},"tested")," with the following hardware wallets:",c.a.createElement("ul",null,c.a.createElement("li",null,H("https://shop.trezor.io/product/trezor-one-white","Trezor One")),c.a.createElement("li",null,H("https://www.ledger.com/products/ledger-nano-s","Ledger Nano S"))),"And web browsers:",c.a.createElement("ul",null,c.a.createElement("li",null,H("https://www.google.com/chrome/","Chrome")),c.a.createElement("li",null,H("https://www.mozilla.org/en-US/firefox/new/","Firefox"))),"Seeing a bug or need a feature?"),c.a.createElement(_.a,null,c.a.createElement(C.a,{href:"https://github.com/unchained-capital/caravan/issues"},c.a.createElement(U.a,null)," \xa0 Report Issue"),c.a.createElement(C.a,{href:"#/test"},c.a.createElement(L.a,null)," \xa0 Run Tests")))))),c.a.createElement(S.a,{mt:2},c.a.createElement(X,null)))},V=a(14),Z=a.n(V),J=a(23),Q=a(10),$=a(22),ee=a(12),te=a(11),ae=a(5),ne=a(1068),re=a(339),se=a(687),oe=a.n(se),ie=a(597),le=0,ce=1,ue=2;function de(e){return{type:"UPDATE_DEPOSIT_SLICE",value:Object(F.a)({},e,{},{change:!1})}}function pe(e){return{type:"UPDATE_CHANGE_SLICE",value:Object(F.a)({},e,{},{change:!0})}}function me(e,t){return{type:"UPDATE_WALLET_NAME",value:t}}function Ee(){return{type:"RESET_WALLET_VIEW"}}var he=a(51),fe=a(138),be=function(e){return Object.values(e.wallet.deposits.nodes)},ve=function(e){return[].concat(Object(he.a)(Object.values(e.wallet.deposits.nodes)),Object(he.a)(Object.values(e.wallet.change.nodes)))},ge=Object(fe.a)(be,(function(e){return e.reduce((function(e,t){return t.utxos.length?t.utxos.reduce((function(e,t){return t.confirmed?e:e+parseInt(t.amountSats,10)}),0)+e:e}),0)})),Pe=Object(fe.a)(ve,(function(e){return e.map((function(e){if(!e.utxos.length&&e.addressUsed)return Object(F.a)({},e,{lastUsed:"Spent"});if(!e.utxos.length)return e;var t=Math.max.apply(Math,Object(he.a)(e.utxos.map((function(e){return e.time}))));return Number.isNaN(t)?Object(F.a)({},e,{lastUsed:"Pending"}):Object(F.a)({},e,{lastUsed:new Date(1e3*t).toLocaleDateString()})}))})),ye=Object(fe.a)(Pe,(function(e){return e.filter((function(e){return e.addressUsed&&e.balanceSats.isEqualTo(0)}))})),Se=Object(fe.a)(Pe,(function(e){return e.filter((function(e){return e.balanceSats.isGreaterThan(0)}))})),Te=Object(fe.a)(Pe,(function(e){return e.filter((function(e){return e.balanceSats.isEqualTo(0)&&!e.addressUsed}))})),Ie=Object(fe.a)(ve,(function(e){return e.filter((function(e){return!e.addressKnown}))})),Oe=Object(fe.a)([ve,Ie],(function(e){return e.map((function(e){return e.multisig.address}))})),we=Object(fe.a)(be,(function(e){return e.filter((function(e){return e.balanceSats.isEqualTo(0)&&!e.addressUsed}))})),xe=a(509),Ce=a(220),Re=function(e){var t=e.network;return c.a.createElement(Ce.a,{htmlColor:t===ae.MAINNET?"orange":"grey"},c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"bitcoin",className:"svg-inline--fa fa-bitcoin fa-w-16",role:"img",viewBox:"0 0 512 512"},c.a.createElement("path",{fill:"currentColor",d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zm-141.651-35.33c4.937-32.999-20.191-50.739-54.55-62.573l11.146-44.702-27.213-6.781-10.851 43.524c-7.154-1.783-14.502-3.464-21.803-5.13l10.929-43.81-27.198-6.781-11.153 44.686c-5.922-1.349-11.735-2.682-17.377-4.084l.031-.14-37.53-9.37-7.239 29.062s20.191 4.627 19.765 4.913c11.022 2.751 13.014 10.044 12.68 15.825l-12.696 50.925c.76.194 1.744.473 2.829.907-.907-.225-1.876-.473-2.876-.713l-17.796 71.338c-1.349 3.348-4.767 8.37-12.471 6.464.271.395-19.78-4.937-19.78-4.937l-13.51 31.147 35.414 8.827c6.588 1.651 13.045 3.379 19.4 5.006l-11.262 45.213 27.182 6.781 11.153-44.733a1038.209 1038.209 0 0 0 21.687 5.627l-11.115 44.523 27.213 6.781 11.262-45.128c46.404 8.781 81.299 5.239 95.986-36.727 11.836-33.79-.589-53.281-25.004-65.991 17.78-4.098 31.174-15.792 34.747-39.949zm-62.177 87.179c-8.41 33.79-65.308 15.523-83.755 10.943l14.944-59.899c18.446 4.603 77.6 13.717 68.811 48.956zm8.417-87.667c-7.673 30.736-55.031 15.12-70.393 11.292l13.548-54.327c15.363 3.828 64.836 10.973 56.845 43.035z"})))};Re.defaultProps={network:ae.MAINNET};var je=Re,ke=a(576),Ne=a(1092),_e=a(1093),Ae=a(1094),Ke=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Q.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){var e=n.props.name;n.setState({newName:e})},n.render=function(){var e=n.props.name,t=n.state,a=t.editing,r=t.newName,s=t.error;return a?c.a.createElement(I.a,{container:!0,alignItems:"center"},c.a.createElement(I.a,{item:!0},c.a.createElement(ke.a,{label:"Name",value:r,onChange:n.handleChange,error:n.hasError(),helperText:s})),c.a.createElement(I.a,{item:!0},c.a.createElement(re.a,{size:"small",onClick:n.submit,disabled:n.hasError()},c.a.createElement(Ne.a,null))),c.a.createElement(I.a,{item:!0},c.a.createElement(re.a,{color:"secondary",size:"small",onClick:n.cancel},c.a.createElement(_e.a,null)))):c.a.createElement("span",null,c.a.createElement(re.a,{size:"small",onClick:n.startEditing},c.a.createElement(Ae.a,null)),"\xa0",e)},n.hasError=function(){return""!==n.state.error},n.startEditing=function(e){var t=n.props.name;e.preventDefault(),n.setState({editing:!0,newName:t})},n.handleChange=function(e){var t=e.target.value,a="";null!==t&&void 0!==t&&""!==t||(a="Name cannot be blank."),n.setState({newName:t,error:a})},n.submit=function(){var e=n.props;(0,e.setName)(e.number,n.state.newName),n.setState({editing:!1})},n.cancel=function(){var e=n.props.name;n.setState({error:"",newName:e,editing:!1})},n.state={editing:!1,newName:"",error:""},n}return a}(c.a.Component),Me=Object(xe.a)((function(e){return{title:{fontSize:"2rem",color:"#212529"},balance:{fontSize:"1.2rem"},gutter:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1),paddingTop:e.spacing(2)}}})),Be=function(e){var t=e.walletName,a=e.setName,n=e.balance,r=void 0===n?0:n,s=e.pendingBalance,o=e.editable,i=e.network,l=e.children,u=Me();return c.a.createElement(O.a,null,c.a.createElement(x.a,null,c.a.createElement(I.a,{container:!0,direction:"row",alignItems:"center"},o?c.a.createElement(I.a,{item:!0},c.a.createElement(T.a,{variant:"h1",className:u.title},c.a.createElement(Ke,{number:0,name:t,setName:a}))):c.a.createElement(c.a.Fragment,null,c.a.createElement(I.a,{container:!0,alignItems:"center",className:u.gutter},c.a.createElement(I.a,{item:!0,xs:1},c.a.createElement(je,{network:i})),c.a.createElement(I.a,{item:!0},c.a.createElement(T.a,{variant:"h1",className:u.title},t))),c.a.createElement(I.a,{container:!0,className:u.gutter},c.a.createElement(I.a,{item:!0,xs:12,mt:5},c.a.createElement(T.a,{variant:"subtitle1",className:u.balance},r," BTC",0!==s?c.a.createElement("span",{style:{color:s>0?"green":"red",margin:"21px",fontSize:"1rem"}},s>0?"+":"",s," BTC"):"")),c.a.createElement(I.a,{item:!0},c.a.createElement(T.a,{variant:"caption"},"Confirmed balance"))))),l))};Be.defaultProps={network:ae.NETWORKS.TESTNET,balance:0,pendingBalance:0,children:c.a.createElement("span")};var De=Be,Ue=a(440),Le=a(577),Fe=a(578),ze=a(1124);function We(e){return{type:"SET_NETWORK",value:e}}function He(e){return{type:"SET_TOTAL_SIGNERS",value:e}}function Ge(e){return{type:"SET_REQUIRED_SIGNERS",value:e}}function qe(e){return{type:"SET_ADDRESS_TYPE",value:e}}function Xe(e){return{type:"SET_FROZEN",value:e}}var Ye=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(Q.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).handleNetworkChange=function(t){(0,e.props.setNetwork)(t.target.value)},e}return Object($.a)(a,[{key:"render",value:function(){var e=this.props,t=e.network,a=e.frozen;return c.a.createElement(O.a,null,c.a.createElement(w.a,{title:"Network"}),c.a.createElement(x.a,null,c.a.createElement(Ue.a,{component:"fieldset"},c.a.createElement(Le.a,null,c.a.createElement(Fe.a,{id:"mainnet",control:c.a.createElement(ze.a,{color:"primary"}),name:"network",value:"mainnet",label:c.a.createElement("strong",null,"Mainnet"),onChange:this.handleNetworkChange,checked:t===ae.MAINNET,disabled:a}),c.a.createElement(Fe.a,{id:"testnet",control:c.a.createElement(ze.a,{color:"primary"}),name:"network",value:"testnet",label:"Testnet",onChange:this.handleNetworkChange,checked:t===ae.TESTNET,disabled:a})),c.a.createElement(ne.a,null,c.a.createElement("small",null,"Choose 'Mainnet' if you don't understand the difference.")))))}}]),a}(c.a.Component);var Ve={setNetwork:We},Ze=Object(m.b)((function(e){return{network:e.settings.network,frozen:e.settings.frozen}}),Ve)(Ye),Je=a(1095),Qe=a(1096),$e=(a(414),function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(Q.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).renderIncrementRequiredSigners=function(){var t=e.props,a=t.requiredSigners,n=t.totalSigners,r=t.frozen,s=a===n||r;return c.a.createElement(re.a,{color:"primary",onClick:e.handleIncrementRequiredSigners,disabled:s},c.a.createElement(Je.a,null))},e.renderDecrementRequiredSigners=function(){var t=e.props,a=t.requiredSigners,n=t.frozen,r=1===a||n;return c.a.createElement(re.a,{color:"secondary",onClick:e.handleDecrementRequiredSigners,disabled:r},c.a.createElement(Qe.a,null))},e.renderIncrementTotalSigners=function(){var t=e.props,a=t.totalSigners,n=t.frozen,r=7===a||n;return c.a.createElement(re.a,{color:"primary",onClick:e.handleIncrementTotalSigners,disabled:r},c.a.createElement(Je.a,null))},e.renderDecrementTotalSigners=function(){var t=e.props,a=t.requiredSigners,n=t.totalSigners,r=t.frozen,s=n===a||2===n||r;return c.a.createElement(re.a,{color:"secondary",onClick:e.handleDecrementTotalSigners,disabled:s},c.a.createElement(Qe.a,null))},e.handleIncrementRequiredSigners=function(t){var a=e.props,n=a.requiredSigners;(0,a.setRequiredSigners)(n+1),t.preventDefault()},e.handleDecrementRequiredSigners=function(t){var a=e.props,n=a.requiredSigners;(0,a.setRequiredSigners)(n-1),t.preventDefault()},e.handleIncrementTotalSigners=function(t){var a=e.props,n=a.totalSigners;(0,a.setTotalSigners)(n+1),t.preventDefault()},e.handleDecrementTotalSigners=function(t){var a=e.props,n=a.totalSigners;(0,a.setTotalSigners)(n-1),t.preventDefault()},e}return Object($.a)(a,[{key:"render",value:function(){var e=this.props,t=e.requiredSigners,a=e.totalSigners;return c.a.createElement(O.a,null,c.a.createElement(w.a,{title:"Quorum"}),c.a.createElement(x.a,null,c.a.createElement(S.a,null,c.a.createElement(I.a,{container:!0,justify:"center"},c.a.createElement(I.a,{container:!0,item:!0,xs:2,direction:"column"},"\xa0"),c.a.createElement(I.a,{container:!0,item:!0,xs:3,direction:"column",alignItems:"center"},c.a.createElement(I.a,{item:!0},this.renderIncrementRequiredSigners()),c.a.createElement(I.a,{item:!0},c.a.createElement(T.a,{variant:"h2"},t)),c.a.createElement(I.a,{item:!0},c.a.createElement("small",null,c.a.createElement("p",null,"Required"))),c.a.createElement(I.a,{item:!0},this.renderDecrementRequiredSigners())),c.a.createElement(I.a,{container:!0,item:!0,xs:2,direction:"column",alignItems:"center",justify:"center"},c.a.createElement(I.a,{item:!0},c.a.createElement(T.a,{variant:"h6"},"of"))),c.a.createElement(I.a,{item:!0,container:!0,xs:3,direction:"column",alignItems:"center"},c.a.createElement(I.a,{item:!0},this.renderIncrementTotalSigners()),c.a.createElement(I.a,{item:!0},c.a.createElement(T.a,{variant:"h2"},a)),c.a.createElement(I.a,{item:!0},c.a.createElement("small",null,c.a.createElement("p",null,"Total"))),c.a.createElement(I.a,{item:!0},this.renderDecrementTotalSigners())),c.a.createElement(I.a,{container:!0,item:!0,xs:2,direction:"column"},"\xa0")))))}}]),a}(c.a.Component));var et={setTotalSigners:He,setRequiredSigners:Ge},tt=Object(m.b)((function(e){return e.settings}),et)($e),at=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(Q.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).handleTypeChange=function(t){(0,e.props.setType)(t.target.value)},e}return Object($.a)(a,[{key:"render",value:function(){var e=this.props,t=e.addressType,a=e.frozen;return c.a.createElement(O.a,null,c.a.createElement(w.a,{title:"Address Type"}),c.a.createElement(x.a,null,c.a.createElement(Ue.a,{component:"fieldset"},c.a.createElement(Le.a,null,c.a.createElement(Fe.a,{id:ae.P2SH,control:c.a.createElement(ze.a,{color:"primary"}),name:"type",value:ae.P2SH,label:ae.P2SH,onChange:this.handleTypeChange,checked:t===ae.P2SH,disabled:a}),c.a.createElement(Fe.a,{id:ae.P2SH_P2WSH,control:c.a.createElement(ze.a,{color:"primary"}),name:"type",value:ae.P2SH_P2WSH,label:ae.P2SH_P2WSH,onChange:this.handleTypeChange,checked:t===ae.P2SH_P2WSH,disabled:a}),c.a.createElement(Fe.a,{id:ae.P2WSH,control:c.a.createElement(ze.a,{color:"primary"}),name:"type",value:ae.P2WSH,label:ae.P2WSH,onChange:this.handleTypeChange,checked:t===ae.P2WSH,disabled:a})),c.a.createElement(ne.a,null,c.a.createElement("small",null,"Choose '",ae.P2WSH,"' for best practices, '",ae.P2SH,"' for greatest compatibility.")))))}}]),a}(c.a.Component);var nt={setType:qe},rt=Object(m.b)((function(e){return e.settings}),nt)(at),st=a(155),ot=a.n(st);function it(){return(it=Object(J.a)(Z.a.mark((function e(t,a){var n,r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ot.a.get(Object(ae.blockExplorerAPIURL)("/address/".concat(t,"/utxo"),a));case 3:return n=e.sent,r=n.data,e.next=7,Promise.all(r.map(function(){var e=Object(J.a)(Z.a.mark((function e(t){var n,r,s;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ot.a.get(Object(ae.blockExplorerAPIURL)("/tx/".concat(t.txid,"/hex"),a));case 2:return n=e.sent,r=n.data,s=new W.a(t.value),e.abrupt("return",{confirmed:t.status.confirmed,txid:t.txid,index:t.vout,amount:Object(ae.satoshisToBitcoins)(s).toFixed(8),amountSats:s,transactionHex:r,time:t.status.block_time});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function lt(){return(lt=Object(J.a)(Z.a.mark((function e(t,a){var n,r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ot.a.get(Object(ae.blockExplorerAPIURL)("/address/".concat(t),a));case 3:return n=e.sent,r=n.data,e.abrupt("return",{used:r.chain_stats.funded_txo_count>0||r.mempool_stats.funded_txo_count>0});case 8:throw e.prev=8,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function ct(){return(ct=Object(J.a)(Z.a.mark((function e(t){var a,n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ot.a.get(Object(ae.blockExplorerAPIURL)("/fee-estimates",t));case 3:return a=e.sent,n=a.data,e.abrupt("return",Math.ceil(n[2]));case 8:throw e.prev=8,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function ut(){return(ut=Object(J.a)(Z.a.mark((function e(t,a){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ot.a.post(Object(ae.blockExplorerAPIURL)("/tx",a),t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function dt(e,t,a){return pt.apply(this,arguments)}function pt(){return(pt=Object(J.a)(Z.a.mark((function e(t,a,n){var r,s=arguments;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>3&&void 0!==s[3]?s[3]:[],e.abrupt("return",new Promise(function(){var e=Object(J.a)(Z.a.mark((function e(s,o){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ot()(t,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},auth:a,data:{jsonrpc:"2.0",id:0,method:"".concat(n),params:r}}).then((function(e){return s(e.data)})).catch(o);case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mt(e){return e.response&&e.response.data&&e.response.data.error&&-4===e.response.data.error.code}function Et(e){return{url:e.url,auth:{username:e.username,password:e.password}}}function ht(){return(ht=Object(J.a)(Z.a.mark((function e(t){var a,n,r,s,o,i,l,c;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,n=t.auth,r=t.address,s=t.addresses,e.prev=1,o=s||[r],e.next=5,dt(a,n,"listunspent",[0,9999999,o]);case 5:return i=e.sent,l=[],i.result.forEach((function(e){l.push(dt(a,n,"gettransaction",[e.txid]))})),e.next=10,Promise.all(l);case 10:return c=e.sent,e.abrupt("return",i.result.map((function(e,t){var a=new W.a(e.amount);return{confirmed:(e.confirmations||0)>0,txid:e.txid,index:e.vout,amount:a.toFixed(8),amountSats:Object(ae.bitcoinsToSatoshis)(a),transactionHex:c[t].result.hex,time:c[t].result.blocktime}})));case 14:return e.prev=14,e.t0=e.catch(1),console.error("There was a problem:",e.t0.message),e.abrupt("return",e.t0);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}function ft(e){return bt.apply(this,arguments)}function bt(){return(bt=Object(J.a)(Z.a.mark((function e(t){var a,n,r,s;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,n=t.auth,r=t.address,e.prev=1,e.next=4,dt(a,n,"getreceivedbyaddress",[r]);case 4:if("undefined"!==typeof(s=e.sent).result){e.next=7;break}throw new Error("Error: invalid response from ".concat(a));case 7:return e.abrupt("return",{used:s.result>0});case 10:return e.prev=10,e.t0=e.catch(1),mt(e.t0)?console.warn("Address ".concat(r," not found in bitcoind's wallet. Query failed.")):console.error(e.t0.message),e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function vt(){return(vt=Object(J.a)(Z.a.mark((function e(t){var a,n,r,s,o,i;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,n=t.auth,r=t.numBlocks,s=void 0===r?2:r,e.next=3,dt(a,n,"estimatesmartfee",[s]);case 3:return o=e.sent,i=o.result.feerate,e.abrupt("return",Math.ceil(1e5*i));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gt(){return(gt=Object(J.a)(Z.a.mark((function e(t){var a,n,r,s;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,n=t.auth,r=t.hex,e.prev=1,e.next=4,dt(a,n,"sendrawtransaction",[r]);case 4:return s=e.sent,e.abrupt("return",s.result);case 8:throw e.prev=8,e.t0=e.catch(1),console.log("send tx error",e.t0),e.t0.response&&e.t0.response.data.error.message||e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function Pt(e){var t=e.url,a=e.auth,n=e.addresses,r=e.label,s=e.rescan,o=n.map((function(e){return{scriptPubKey:{address:e},label:r,timestamp:0}}));return s?(dt(t,a,"importmulti",[o,{rescan:s}]),new Promise((function(e){return e({result:[]})}))):dt(t,a,"importmulti",[o,{rescan:s}])}function yt(e,t,a){return"public"===a.type?function(e,t){return it.apply(this,arguments)}(e,t):function(e){return ht.apply(this,arguments)}(Object(F.a)({},Et(a),{},{address:e}))}function St(e,t,a){return Tt.apply(this,arguments)}function Tt(){return(Tt=Object(J.a)(Z.a.mark((function e(t,a,n){var r,s,o,i;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={utxos:[],balanceSats:W()(0),fetchedUTXOs:!1,fetchUTXOsError:""},e.prev=1,e.next=4,yt(t,a,n);case 4:r=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),s="private"===n.type&&mt(e.t0)?{utxos:[],balanceSats:W()(0),addressKnown:!1,fetchedUTXOs:!0,fetchUTXOsError:""}:{fetchUTXOsError:e.t0.toString()};case 10:if(r){e.next=12;break}return e.abrupt("return",s);case 12:return o=Object(ae.sortInputs)(r),i=o.map((function(e){return e.amountSats})).reduce((function(e,t){return e.plus(t)}),new W.a(0)),e.abrupt("return",Object(F.a)({},s,{balanceSats:i,utxos:o,fetchedUTXOs:!0,fetchUTXOsError:""}));case 15:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function It(e,t,a){return"public"===a.type?function(e,t){return lt.apply(this,arguments)}(e,t):ft(Object(F.a)({},Et(a),{},{address:e}))}function Ot(e,t){return"public"===t.type?function(e){return ct.apply(this,arguments)}(e):function(e){return vt.apply(this,arguments)}(Object(F.a)({},Et(t),{},{numBlocks:1}))}function wt(e,t,a){return"public"===a.type?function(e,t){return ut.apply(this,arguments)}(e,t):function(e){return gt.apply(this,arguments)}(Object(F.a)({},Et(a),{},{hex:e}))}function xt(e){return function(t){return{type:e,value:t}}}function Ct(e){var t,a={},n=Object.keys(e);for(t=0;t<n.length;t+=1){var r=n[t],s=e[r];a[r]=xt(s)}return a}function Rt(e){return function(t,a){return{type:e,number:t,value:a}}}function jt(e){var t,a={},n=Object.keys(e);for(t=0;t<n.length;t+=1){var r=n[t],s=e[r];a[r]=Rt(s)}return a}var kt=function(e){var t=e.handleUrlChange,a=e.handleUsernameChange,n=e.handlePasswordChange,r=e.client,s=e.urlError,o=e.usernameError,i=e.passwordError,l=e.privateNotes,u=e.connectSuccess,d=e.connectError,p=e.testConnection;return c.a.createElement("div",null,c.a.createElement("p",null,"A ",c.a.createElement("code",null,"bitcoind"),"-compatible client is required to query UTXO data, estimate fees, and broadcast transactions."),c.a.createElement("p",null,c.a.createElement("small",null,"Due to CORS requirements, you must use a proxy around the node. Instructions are available ",H("https://github.com/unchained-capital/caravan#adding-cors-headers","here"),".")),c.a.createElement("form",null,c.a.createElement(I.a,{container:!0,direction:"column",spacing:1},c.a.createElement(I.a,{item:!0},c.a.createElement(ke.a,{fullWidth:!0,label:"URL",value:r.url,onChange:t,error:""!==s,helperText:s})),c.a.createElement(I.a,{item:!0},c.a.createElement(ke.a,{id:"bitcoind-username",fullWidth:!0,label:"Username",value:r.username,onChange:a,error:""!==o,helperText:o})),c.a.createElement(I.a,{item:!0},c.a.createElement(ke.a,{id:"bitcoind-password",fullWidth:!0,type:"password",label:"Password",value:r.password,onChange:n,error:""!==i,helperText:i})),c.a.createElement(I.a,{item:!0},c.a.createElement(S.a,{mt:1},c.a.createElement(C.a,{variant:"contained",onClick:p},"Test Connection")),c.a.createElement(S.a,{mt:2},u&&c.a.createElement(ne.a,null,"Connection Success!"),""!==d&&c.a.createElement(ne.a,{error:!0},d))))),l)};kt.defaultProps={urlError:"",usernameError:"",passwordError:"",privateNotes:c.a.createElement("span")};var Nt=kt,_t=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Q.a)(this,a),(n=t.call(this,e)).handleTypeChange=function(e){var t=n.props,a=t.setType,r=t.network,s=t.setUrl,o=n.state.urlEdited,i=e.target.value;"private"!==i||o||s("http://localhost:".concat("mainnet"===r?8332:18332)),a(i)},n.handleUrlChange=function(e){var t=n.props,r=t.setUrl,s=t.setUrlError,o=n.state.urlEdited,i=e.target.value,l=a.validateUrl(i);o||l||n.setState({urlEdited:!0}),r(i),s(l)},n.handleUsernameChange=function(e){var t=n.props,r=t.setUsername,s=t.setUsernameError,o=e.target.value,i=a.validateUsername(o);r(o),s(i)},n.handlePasswordChange=function(e){var t=n.props,r=t.setPassword,s=t.setPasswordError,o=e.target.value,i=a.validatePassword(o);r(o),s(i)},n.testConnection=Object(J.a)(Z.a.mark((function e(){var t,a,r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.network,r=t.client,n.setState({connectError:"",connectSuccess:!1}),e.prev=2,e.next=5,Ot(a,r);case 5:n.setState({connectSuccess:!0}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),n.setState({connectError:e.t0.message});case 11:case"end":return e.stop()}}),e,null,[[2,8]])}))),n.state={urlEdited:!1,connectError:"",connectSuccess:!1},n}return Object($.a)(a,null,[{key:"validatePassword",value:function(){return""}},{key:"validateUsername",value:function(){return""}},{key:"validateUrl",value:function(e){return/^http(s)?:\/\/[^\s]+$/.exec(e)?"":"Must be a valid URL."}}]),Object($.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.client,n=t.urlError,r=t.usernameError,s=t.passwordError,o=t.privateNotes,i=this.state,l=i.connectSuccess,u=i.connectError;return c.a.createElement(O.a,null,c.a.createElement(I.a,{container:!0,justify:"space-between"},c.a.createElement(w.a,{title:"Bitcoin Client"})),c.a.createElement(x.a,null,c.a.createElement(I.a,{item:!0},c.a.createElement(Ue.a,{component:"fieldset"},c.a.createElement(Le.a,null,c.a.createElement(Fe.a,{id:"public",control:c.a.createElement(ze.a,{color:"primary"}),name:"clientType",value:"public",label:c.a.createElement("strong",null,"Public"),onChange:this.handleTypeChange,checked:"public"===a.type}),c.a.createElement(Fe.a,{id:"private",control:c.a.createElement(ze.a,{color:"primary"}),name:"clientType",value:"private",label:"Private",onChange:this.handleTypeChange,checked:"private"===a.type})),"public"===a.type?c.a.createElement(ne.a,null,"'Public' uses the ",c.a.createElement("code",null,"blockstream.info")," API. Switch to private to use a ",c.a.createElement("code",null,"bitcoind")," node."):c.a.createElement(Nt,{handleUrlChange:function(t){return e.handleUrlChange(t)},handleUsernameChange:function(t){return e.handleUsernameChange(t)},handlePasswordChange:function(t){return e.handlePasswordChange(t)},client:a,urlError:n,usernameError:r,passwordError:s,privateNotes:o,connectSuccess:l,connectError:u,testConnection:function(){return e.testConnection()}})))))}}]),a}(c.a.Component);_t.defaultProps={urlError:"",usernameError:"",passwordError:"",privateNotes:c.a.createElement("span")};var At=Object(m.b)((function(e){return{network:e.settings.network,client:e.client,urlError:e.client.urlError,url:e.client.url}}),Ct({setType:"SET_CLIENT_TYPE",setUrl:"SET_CLIENT_URL",setUsername:"SET_CLIENT_USERNAME",setPassword:"SET_CLIENT_PASSWORD",setUrlError:"SET_CLIENT_URL_ERROR",setUsernameError:"SET_CLIENT_USERNAME_ERROR",setPasswordError:"SET_CLIENT_PASSWORD_ERROR"}))(_t),Kt=a(262),Mt=a(613),Bt=a(686),Dt=a.n(Bt),Ut=a(587),Lt=a(588),Ft=a(589),zt=a(590),Wt=a(591),Ht=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(Q.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).render=function(){return c.a.createElement(S.a,null,c.a.createElement(Ut.a,null,c.a.createElement(Lt.a,null,c.a.createElement(Ft.a,null,c.a.createElement(zt.a,null,"Name"),c.a.createElement(zt.a,null,"BIP32 Path"),c.a.createElement(zt.a,null,"Extended Public Key"))),c.a.createElement(Wt.a,null,e.renderConfirmationInfo())))},e.renderConfirmationInfo=function(){var t=e.props.extendedPublicKeyImporters;return Object.values(t).map((function(e){return c.a.createElement(Ft.a,{key:e.extendedPublicKey},c.a.createElement(zt.a,null,e.name),c.a.createElement(zt.a,null,"text"===e.method?"N/A":e.bip32Path),c.a.createElement(zt.a,null,e.extendedPublicKey))}))},e}return a}(c.a.Component);var Gt=Object(m.b)((function(e){return{extendedPublicKeyImporters:e.quorum.extendedPublicKeyImporters}}),{})(Ht),qt=a(1123),Xt=a(1101),Yt=a(614);function Vt(e){return{type:"SET_REQUIRED_SIGNERS",value:e}}function Zt(e){return{type:"SET_INPUTS",value:e}}function Jt(){return{type:"ADD_OUTPUT"}}function Qt(e){return{type:"SET_CHANGE_OUTPUT_INDEX",value:e}}function $t(e,t){return{type:"SET_OUTPUT_ADDRESS",number:e,value:t}}function ea(e,t){return{type:"SET_OUTPUT_AMOUNT",number:e,value:t}}function ta(e){return{type:"SET_FEE_RATE",value:e}}function aa(e){return{type:"FINALIZE_OUTPUTS",value:e}}function na(e){return{type:"UPDATE_AUTO_SPEND",value:e}}function ra(e){return{type:"SET_SPEND_STEP",value:e}}var sa=a(342),oa=a.n(sa),ia=a(4),la=a.n(ia),ca=(la.a.bool,la.a.string,la.a.array,la.a.shape({}),la.a.string.isRequired,la.a.shape({s:la.a.number,e:la.a.number,c:la.a.array}),la.a.array,la.a.bool.isRequired,la.a.bool.isRequired,la.a.bool,la.a.string.isRequired,la.a.bool.isRequired,la.a.bool.isRequired,la.a.string,la.a.string.isRequired,la.a.string,la.a.string,la.a.string,la.a.string,la.a.string,la.a.string,la.a.string,la.a.string,la.a.number,la.a.number,la.a.string,la.a.bool,a(61)),ua=a(351),da=a(671),pa=a.n(da),ma=a(1097),Ea=Object(xe.a)((function(){return{copyText:{"&:hover":{cursor:"pointer"}},code:{fontSize:"1rem"}}})),ha=function(e){var t=e.newline,a=e.text,n=e.children,r=e.showIcon,s=e.showText,o=e.code,i=Object(ua.a)(e,["newline","text","children","showIcon","showText","code"]),u=Object(l.useState)(!1),d=Object(ca.a)(u,2),p=d[0],m=d[1],E=Object(l.useState)(null),h=Object(ca.a)(E,2),f=h[0],b=h[1],v=Object(y.useSnackbar)().enqueueSnackbar;Object(l.useEffect)((function(){f&&clearTimeout(f)}),[]);var g=Ea(),P=function(){return o?c.a.createElement("code",{className:g.code},a):c.a.createElement("span",null,a)};return c.a.createElement("span",Object.assign({onClick:function(e){return e.stopPropagation()}},i),c.a.createElement(pa.a,{text:a,onCopy:function(){var e=setTimeout((function(){m(!1),b(null)}),1e3);m(!0),b(e),function(){var e=a.length>25?"".concat(a.substring(0,25),"..."):a;v("Copied ".concat(e," to clipboard"),{preventDuplicate:!0})}()},options:{format:"text/plain"}},c.a.createElement("span",{style:{fontStyle:p?"italic":"inherit"},className:"copyable ".concat(g.copyText)},n,s&&c.a.createElement(P,null),t&&c.a.createElement("br",null),r&&c.a.createElement(re.a,null,c.a.createElement(ma.a,{fontSize:"small",color:p?"primary":"action"})))))};ha.defaultProps={newline:!1,showIcon:!1,children:c.a.createElement("span"),showText:!0,code:!1};var fa=ha,ba=a(672),va=a.n(ba),ga=function(e){return"asc"===e?-1:1};function Pa(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";if(!e.bip32Path&&!t.bip32Path)throw new Error("Mising BIP32 path for comparing slices.");var n=ga(a);if(e.change&&!t.change)return n;if(!e.change&&t.change)return-n;var r=parseInt(e.bip32Path.split("/").reverse()[0],10),s=parseInt(t.bip32Path.split("/").reverse()[0],10);return r>s?n:-n}function ya(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";if(!e.balanceSats&&!t.balanceSats)throw new Error("Missing balance for comparing slices");var n=ga(a);return e.balanceSats.isEqualTo(t.balanceSats)?0:e.balanceSats.isGreaterThan(t.balanceSats)?n:-n}function Sa(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";if(!e.utxos&&!t.utxos)throw new Error("Missing utxo array for comparing slices");var n=ga(a);return e.utxos.length===t.utxos.length?0:e.utxos.length>t.utxos.length?n:-n}function Ta(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";if(!e.utxos&&!t.utxos||!e.lastUsed&&!t.lastUsed)throw new Error("Cannot compare slices, missing utxo list or lastUsed property");var n=ga(a);if(e.lastUsed&&t.lastUsed)return e.lastUsed>=t.lastUsed?n:-n;if(0===e.utxos.length)return 0===t.utxos.length?0:n;if(0===t.utxos.length)return 0===e.utxos.length?0:-n;var r=Math.min.apply(Math,Object(he.a)(e.utxos.map((function(e){return e.time})))),s=Math.min.apply(Math,Object(he.a)(t.utxos.map((function(e){return e.time}))));return Number.isNaN(r)&&Number.Number.isNaN(s)?0:Number.isNaN(r)?n:Number.isNaN(s)?-n:r>s?n:-n}var Ia=a(601),Oa=a(1102),wa=a(615),xa=a(1109),Ca=(a(422),a(90)),Ra=a.n(Ca),ja=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(Q.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).renderInputs=function(){var t=e.props,a=t.inputs,n=t.network;return a.map((function(e,t){var a="".concat(Ra.a.utxoTxid).concat(e.confirmed?"":" ".concat(Ra.a.unconfirmed)),r=e.confirmed?"confirmed":"unconfirmed";return c.a.createElement(Ft.a,{hover:!0,key:e.txid},c.a.createElement(zt.a,null,t+1),c.a.createElement(zt.a,{className:a},c.a.createElement(fa,{text:e.txid,showIcon:!0,showText:!1},c.a.createElement("code",{title:r},e.txid))),c.a.createElement(zt.a,null,c.a.createElement(fa,{text:e.index.toString()})),c.a.createElement(zt.a,null,c.a.createElement(fa,{text:Object(ae.satoshisToBitcoins)(e.amountSats).toString()})),c.a.createElement(zt.a,null,H(Object(ae.blockExplorerTransactionURL)(e.txid,n),c.a.createElement(xa.a,null))))}))},e}return Object($.a)(a,[{key:"render",value:function(){var e=this.props,t=e.inputs,a=e.inputsTotalSats;return c.a.createElement(c.a.Fragment,null,c.a.createElement(T.a,{variant:"h5"},"Available Inputs (".concat(t.length,")")," "),c.a.createElement("p",null,"The following UTXOs will be spent as inputs in a new transaction."),c.a.createElement(Ut.a,null,c.a.createElement(Lt.a,null,c.a.createElement(Ft.a,{hover:!0},c.a.createElement(zt.a,null,"Number"),c.a.createElement(zt.a,null,"TXID"),c.a.createElement(zt.a,null,"Index"),c.a.createElement(zt.a,null,"Amount (BTC)"),c.a.createElement(zt.a,null,"View"))),c.a.createElement(Wt.a,null,this.renderInputs()),c.a.createElement(wa.a,null,c.a.createElement(Ft.a,{hover:!0},c.a.createElement(zt.a,{colSpan:3},"TOTAL:"),c.a.createElement(zt.a,{colSpan:2},Object(ae.satoshisToBitcoins)(a).toString())))))}}]),a}(c.a.Component);var ka=Object(m.b)((function(e){return Object(F.a)({},e.settings)}))(ja),Na=a(664),_a=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(Q.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).renderScript=function(e,t){var a=Object(ae.scriptToHex)(t),n=Object(ae.scriptToOps)(t);return c.a.createElement(S.a,{mt:2},c.a.createElement(T.a,{variant:"h6"},e),c.a.createElement(I.a,{container:!0,spacing:2},c.a.createElement(I.a,{item:!0,sm:6},c.a.createElement(fa,{text:a,showIcon:!0,code:!0})),c.a.createElement(I.a,{item:!0,sm:6},c.a.createElement(fa,{text:n,showIcon:!0,code:!0}))))},e}return Object($.a)(a,[{key:"render",value:function(){var e=this.props,t=e.network,a=e.multisig,n=e.showAddress,r=a.address,s=Object(ae.multisigRedeemScript)(a),o=Object(ae.multisigWitnessScript)(a);return c.a.createElement(S.a,{mt:2},n&&c.a.createElement(T.a,{variant:"h6"},"Address"),c.a.createElement(T.a,{align:"center",variant:"h5"},c.a.createElement(I.a,{container:!0,direction:"column",spacing:2},n&&c.a.createElement(I.a,{item:!0},c.a.createElement(fa,{text:r,showIcon:!0,code:!0}),"\xa0",H(Object(ae.blockExplorerAddressURL)(r,t),c.a.createElement(xa.a,null))),c.a.createElement(I.a,{item:!0,justify:"center",container:!0,spacing:3},c.a.createElement(I.a,{item:!0},c.a.createElement(Na.a,{label:"BTC"})),c.a.createElement(I.a,{item:!0},c.a.createElement(Na.a,{label:Object(ae.networkLabel)(t)})),c.a.createElement(I.a,{item:!0},c.a.createElement(Na.a,{label:"".concat(Object(ae.multisigRequiredSigners)(a),"-of-").concat(Object(ae.multisigTotalSigners)(a))})),c.a.createElement(I.a,{item:!0},c.a.createElement(Na.a,{label:Object(ae.multisigAddressType)(a)}))))),this.renderScript("Script",a),s&&this.renderScript("Redeem Script",s),o&&this.renderScript("Witness Script",o))}}]),a}(c.a.Component);_a.defaultProps={showAddress:!0};var Aa=Object(m.b)((function(e){return e.settings}),{})(_a),Ka=a(1108),Ma=a(678),Ba=a.n(Ma),Da=Object(xe.a)((function(){return{tooltip:{fontSize:".8rem"},container:{textAlign:"left"}}}));function Ua(e){var t=e.addresses,a=void 0===t?[]:t,n=e.client,r=e.importCallback,s=Object(l.useState)(!1),o=Object(ca.a)(s,2),i=o[0],u=o[1],d=Object(l.useState)(""),p=Object(ca.a)(d,2),m=p[0],E=p[1],h=Object(l.useState)(!1),f=Object(ca.a)(h,2),b=f[0],v=f[1],g=Object(l.useState)(""),P=Object(ca.a)(g,2),y=P[0],T=P[1],O=Object(l.useState)(!1),w=Object(ca.a)(O,2),x=w[0],R=w[1],j=Da();Object(l.useEffect)((function(){var e=function(){var e=Object(J.a)(Z.a.mark((function e(){var t,r,s,o;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!1),t=a[a.length-1],e.prev=2,e.next=5,ft(Object(F.a)({},Et(n),{address:t}));case 5:(r=e.sent)&&"undefined"!==typeof r.used?R(!1):R(!0),T(""),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(2),s=e.t0.response&&e.t0.response.status||"unknown",o=401===s?e.t0.response.statusText:500===s?e.t0.response.data.error.message:e.t0.message||"An unknown address error occured",T(o);case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();"private"!==n.type||x&&1!==a.length||e()}),[a,n,x]);var k=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return"".concat(e?"A":"a","ddress").concat(a&&a.length>1?"es":"")};function N(){return(N=Object(J.a)(Z.a.mark((function e(){var t,s,o;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"",e.prev=1,e.next=4,Pt(Object(F.a)({},Et(n),{},{addresses:a,label:"",rescan:b}));case 4:if(t=e.sent,s=t.result.reduce((function(e,t){return t.error&&t.error.message||e}),""),E(s),u(!s.length),!r){e.next=12;break}return o=t.result.filter((function(e){return e.success})),e.next=12,r(o,b);case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),E("Unable to import, check your settings and try again"),u(!1);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}var _="To get accurate information from your node, your ".concat(k(),"\nwill need to be imported to your node. Importing will give you accurate balance information\nhowever to know if an address has been used prior to import, a rescan needs to take place.");return c.a.createElement(I.a,{className:j.container},c.a.createElement(S.a,{component:"span",ml:2},c.a.createElement(C.a,{variant:"contained",disabled:!x&&!b||!a.length,onClick:function(){return N.apply(this,arguments)}},"Import")),c.a.createElement(S.a,{component:"span",ml:2},c.a.createElement(Fe.a,{control:c.a.createElement(Ka.a,{checked:b,onChange:function(e){return v(e.target.checked)},color:"secondary"}),label:"Rescan"}),c.a.createElement(Ia.a,{title:_,classes:{tooltip:j.tooltip}},c.a.createElement(Ba.a,{fontSize:"small",color:"disabled"}))),c.a.createElement(S.a,null,y.length>0&&c.a.createElement(ne.a,{error:!0},y),m.length>0&&c.a.createElement(ne.a,{error:!0},m),i&&b&&c.a.createElement(ne.a,null,k(!0)," imported, rescan of your node may take some time."),i&&!b&&c.a.createElement(ne.a,null,k(!0)," imported.")))}Ua.defaultProps={addresses:[],importCallback:function(){}};var La=Ua,Fa=a(1113),za=a(1112),Wa=a(7),Ha=a(441),Ga=a(444),qa=a(599),Xa=jt({setSignatureImporterName:"SET_SIGNATURE_IMPORTER_NAME",setSignatureImporterMethod:"SET_SIGNATURE_IMPORTER_METHOD",setSignatureImporterBIP32Path:"SET_SIGNATURE_IMPORTER_BIP32_PATH",setSignatureImporterPublicKeys:"SET_SIGNATURE_IMPORTER_PUBLIC_KEYS",setSignatureImporterSignature:"SET_SIGNATURE_IMPORTER_SIGNATURE",setSignatureImporterFinalized:"SET_SIGNATURE_IMPORTER_FINALIZED",setSignatureImporterComplete:"SET_SIGNATURE_IMPORTER_COMPLETE"}),Ya=Xa.setSignatureImporterName,Va=Xa.setSignatureImporterMethod,Za=Xa.setSignatureImporterBIP32Path,Ja=Xa.setSignatureImporterPublicKeys,Qa=Xa.setSignatureImporterSignature,$a=Xa.setSignatureImporterFinalized,en=Xa.setSignatureImporterComplete,tn=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Q.a)(this,a),(n=t.call(this,e)).render=function(){var e=n.state,t=e.signatureJSON,a=e.error;return c.a.createElement(S.a,{mt:2},c.a.createElement(ke.a,{fullWidth:!0,multiline:!0,variant:"outlined",name:"signature",label:"Signature",rows:5,value:t,onChange:n.handleChange,error:n.hasError(),helperText:a}),c.a.createElement(S.a,{mt:2},c.a.createElement(C.a,{variant:"contained",color:"primary",size:"large",onClick:n.finalize,disabled:""===t},"Add Signature")))},n.hasError=function(){return""!==n.state.error},n.setError=function(e){n.setState({error:e})},n.handleChange=function(e){var t=e.target.value,a="";try{JSON.parse(t)}catch(r){a="Invalid JSON."}n.setState({signatureJSON:t,error:a})},n.finalize=function(){var e=n.props.validateAndSetSignature,t=n.state.signatureJSON;e(JSON.parse(t),n.setError)},n.state={signatureJSON:"",error:""},n}return a}(c.a.Component),an=a(679),nn=a.n(an),rn=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Q.a)(this,a),(n=t.call(this,e)).render=function(){var e=n.state,t=e.status,a=e.error,r=n.props,s=r.interaction,o=r.width,i=r.startText;if(t===Wa.PENDING){var l=s.messageFor({state:t,code:"hermit.command"});return c.a.createElement("div",null,c.a.createElement("p",null,l.instructions),c.a.createElement(I.a,{container:!0,justify:"center",className:"mb-2"},c.a.createElement(fa,{text:l.command,showText:!1},c.a.createElement("code",null,c.a.createElement("strong",null,l.mode,">")," ",l.command))),c.a.createElement("p",null,"When you are ready, scan the QR code produced by Hermit:"),c.a.createElement(S.a,{mt:2},c.a.createElement(C.a,{variant:"contained",color:"primary",className:"mt-2",size:"large",onClick:n.handleStart},i)))}return t===Wa.ACTIVE?c.a.createElement(I.a,{container:!0,direction:"column"},c.a.createElement(I.a,{item:!0},c.a.createElement(nn.a,{delay:300,onError:n.handleError,onScan:n.handleScan,style:{width:o},facingMode:"user"})),c.a.createElement(I.a,{item:!0},c.a.createElement(C.a,{variant:"contained",color:"secondary",size:"small",onClick:n.handleStop},"Cancel"))):"error"===t||"success"===t?c.a.createElement("div",null,c.a.createElement(ne.a,{error:!0},a),c.a.createElement(C.a,{variant:"contained",color:"secondary",size:"small",onClick:n.handleStop},"Reset")):null},n.handleStart=function(){var e=n.props.onStart;n.setState({status:Wa.ACTIVE,error:""}),e&&e()},n.handleError=function(e){var t=n.props.onClear;n.setState({status:"error",error:e.message}),t&&t()},n.handleScan=function(e){var t=n.props,a=t.onSuccess,r=t.interaction;if(e)try{a(r.parse(e)),n.setState({status:"success"})}catch(s){n.handleError(s)}},n.handleStop=function(){var e=n.props.onClear;n.setState({status:Wa.PENDING,error:""}),e&&e()},n.state={status:Wa.PENDING,error:""},n}return a}(l.Component);rn.defaultProps={width:"256px",startText:"Scan"};var sn=rn,on=function(e){var t=e.width,a=e.string;return c.a.createElement(fa,{text:a,newline:!0,showText:!1},c.a.createElement(oa.a,{size:t,value:a,level:"L"}))};on.defaultProps={string:"",width:120};var ln=on,cn=a(187),un=a(1110),dn=a(1111),pn=(a(1049),function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(Q.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).render=function(){var t=e.props.messages;return c.a.createElement(R.a,{style:{maxHeight:"400px",overflow:"auto"},dense:!0},t.map(e.renderMessage))},e.renderMessage=function(t,a){return c.a.createElement(j.a,{key:a},t.level&&c.a.createElement(k.a,null,e.messageIcon(t)),c.a.createElement(N.a,null,e.renderMessageBodyAndSubmessages(t)))},e.renderMessageBodyAndSubmessages=function(t){return c.a.createElement(S.a,null,e.renderMessageBody(t),t.messages&&c.a.createElement(R.a,{dense:!0},t.messages.map(e.renderMessage)))},e.renderMessageBody=function(e){return c.a.createElement(S.a,null,e.image&&c.a.createElement(S.a,{align:"center"},c.a.createElement("img",{className:"InteractionMessages-image",src:"data:".concat(e.image.mimeType,";base64, ").concat(e.image.data),alt:e.image.label})),c.a.createElement("p",null,e.text))},e.messageIcon=function(e){switch(e.level){case Wa.INFO:return c.a.createElement(un.a,null);case Wa.WARNING:return c.a.createElement(dn.a,null);case Wa.ERROR:return c.a.createElement(za.a,null);default:return null}},e}return a}(c.a.Component)),mn=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(Q.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).render=function(){var t=e.props,a=t.version,n=t.currentVersion;return c.a.createElement(S.a,{role:"tabpanel",hidden:a!==n,id:"interactionMessages-tabpanel-".concat(a),"aria-labelledby":"interactionMessages-tab-".concat(a)},a===n&&c.a.createElement(pn,{messages:e.filteredMessages()}))},e.filteredMessages=function(){var t=e.props,a=t.messages,n=t.version;return a.filter((function(e){return!e.version||e.version===n}))},e}return a}(c.a.Component),En=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Q.a)(this,a),(n=t.call(this,e)).render=function(){var e=n.filteredMessages(),t=e.messages,a=e.versions,r=n.currentVersion(a);return a.length<2?c.a.createElement(pn,{messages:t}):c.a.createElement(S.a,null,c.a.createElement(T.a,{variant:"h6"},"Model"),c.a.createElement(cn.a,{square:!0},c.a.createElement(qt.a,{value:r,onChange:n.handleChange,"aria-label":"interactionMessages-version"},a.map((function(e){return c.a.createElement(Xt.a,{key:e,value:e,label:e,id:"interactionMessages-tab-".concat(e),"aria-controls":"interactionMessages-tabpanel-".concat(e)})})))),a.map((function(e){return c.a.createElement(mn,{key:e,version:e,currentVersion:r,messages:t})})))},n.currentVersion=function(e){var t=n.state.currentVersion;return t||e[e.length-1]},n.handleChange=function(e,t){n.setState({currentVersion:t})},n.filteredMessages=function(){var e=n.props,t=e.messages,a=e.excludeCodes,r=[],s=[];return t.forEach((function(e){for(var t=0;t<a.length;t+=1){var n=a[t];if((e.code||"").includes(n))return}r.push(e),e.version&&!s.includes(e.version)&&s.push(e.version)})),{versions:s,messages:r}},n.state={currentVersion:""},n}return a}(c.a.Component);En.defaultProps={messages:[],excludeCodes:[]};var hn=En,fn=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Q.a)(this,a),(n=t.call(this,e)).interaction=function(){var e=n.props,t=e.signatureImporter,a=e.network,r=e.inputs,s=e.outputs,o=r.map((function(e){return"undefined"===typeof e.bip32Path?t.bip32Path:"".concat(t.bip32Path).concat(e.bip32Path.slice(1))}));return Object(Wa.SignMultisigTransaction)({keystore:Wa.HERMIT,network:a,inputs:r,outputs:s,bip32Paths:o})},n.render=function(){var e=n.props,t=e.signatureImporter,a=e.disableChangeMethod,r=e.resetBIP32Path,s=n.state,o=s.bip32PathError,i=s.signatureError,l=s.status,u=n.interaction();return l===Wa.UNSUPPORTED?c.a.createElement(hn,{messages:u.messagesFor({state:l}),excludeCodes:["hermit.signature_request","hermit.command"]}):c.a.createElement(S.a,{mt:2},c.a.createElement(I.a,{container:!0},c.a.createElement(I.a,{item:!0,md:10},c.a.createElement(ke.a,{name:"bip32Path",value:t.bip32Path,onChange:n.handleBIP32PathChange,disabled:l!==Wa.PENDING,error:n.hasBIP32PathError(),helperText:o})),c.a.createElement(I.a,{item:!0,md:2},!n.bip32PathIsDefault()&&c.a.createElement(C.a,{type:"button",variant:"contained",size:"small",onClick:r,disabled:l!==Wa.PENDING},"Default"))),c.a.createElement(ne.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),c.a.createElement(S.a,{mt:2},c.a.createElement(I.a,{container:!0,justify:"center"},c.a.createElement(I.a,{item:!0},c.a.createElement(ln,{width:400,string:u.request()}))),c.a.createElement(sn,{startText:"Scan Signature QR Code",interaction:u,onStart:a,onSuccess:n.import,onClear:n.clear}),c.a.createElement(hn,{messages:u.messagesFor({state:l}),excludeCodes:["hermit.signature_request","hermit.command"]}),c.a.createElement(ne.a,{error:!0},i)))},n.import=function(e){var t=n.props,a=t.validateAndSetSignature,r=t.enableChangeMethod;n.setState({signatureError:""}),r(),a(e,(function(e){n.setState({signatureError:e})}))},n.clear=function(){var e=n.props,t=e.resetBIP32Path,a=e.enableChangeMethod;t(),n.setState({signatureError:""}),a()},n.hasBIP32PathError=function(){return""!==n.state.bip32PathError},n.handleBIP32PathChange=function(e){(0,n.props.validateAndSetBIP32Path)(e.target.value,(function(){}),(function(e){n.setState({bip32PathError:e})}))},n.bip32PathIsDefault=function(){var e=n.props,t=e.signatureImporter,a=e.defaultBIP32Path;return t.bip32Path===a},n.state={bip32PathError:"",signatureError:"",status:n.interaction(!0).isSupported()?Wa.PENDING:Wa.UNSUPPORTED},n}return a}(c.a.Component),bn=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Q.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.resetBIP32Path()},n.interaction=function(){var e=n.props,t=e.signatureImporter,a=e.network,r=e.inputs,s=e.outputs,o=t.method,i=r.map((function(e){return"undefined"===typeof e.bip32Path?t.bip32Path:"".concat(t.bip32Path).concat(e.bip32Path.slice(1))}));return Object(Wa.SignMultisigTransaction)({network:a,keystore:o,inputs:r,outputs:s,bip32Paths:i})},n.render=function(){var e=n.props,t=e.signatureImporter,a=e.extendedPublicKeyImporter,r=n.state.status,s=n.interaction();return r===Wa.UNSUPPORTED?c.a.createElement(ne.a,{error:!0},s.messageTextFor({state:r})):c.a.createElement(S.a,{mt:2},(null===a||"undefined"===typeof a||"text"===a.method)&&c.a.createElement(c.a.Fragment,null,c.a.createElement(I.a,{container:!0},c.a.createElement(I.a,{item:!0,md:10},c.a.createElement(ke.a,{fullWidth:!0,name:"bip32Path",label:"BIP32 Path",type:"text",value:t.bip32Path,onChange:n.handleBIP32PathChange,disabled:r!==Wa.PENDING,error:n.hasBIP32PathError(),helperText:n.bip32PathError()})),c.a.createElement(I.a,{item:!0,md:2},!n.bip32PathIsDefault()&&c.a.createElement(C.a,{type:"button",variant:"contained",size:"small",onClick:n.resetBIP32Path,disabled:r!==Wa.PENDING},"Default"))),c.a.createElement(ne.a,null,"Use the default value if you don\u2019t understand BIP32 paths.")),c.a.createElement(S.a,{mt:2},n.renderAction()),n.renderDeviceConfirmInfo(),c.a.createElement(hn,{messages:s.messagesFor({state:r}),excludeCodes:["bip32"]}))},n.renderDeviceConfirmInfo=function(){var e=n.props,t=e.fee,a=e.inputsTotalSats;return n.state.status===Wa.ACTIVE?c.a.createElement(S.a,null,c.a.createElement("p",null,"Your device will ask you to verify the following information:"),c.a.createElement(Ut.a,null,c.a.createElement(Lt.a,null,c.a.createElement(Ft.a,{hover:!0},c.a.createElement(zt.a,null),c.a.createElement(zt.a,null,"Amount (BTC)"))),c.a.createElement(Wt.a,null,n.renderTargets(),c.a.createElement(Ft.a,{hover:!0},c.a.createElement(zt.a,null,"Fee"),c.a.createElement(zt.a,null,t)),c.a.createElement(Ft.a,{hover:!0},c.a.createElement(zt.a,null,"Total"),c.a.createElement(zt.a,null,Object(ae.satoshisToBitcoins)(a).toString()))))):""},n.renderTargets=function(){return n.props.outputs.map((function(e){return c.a.createElement(Ft.a,{hover:!0,key:e.address},c.a.createElement(zt.a,null,"Address ",c.a.createElement("code",null,e.address)),c.a.createElement(zt.a,null,e.amount))}))},n.renderAction=function(){var e=n.state,t=e.signatureError,a=e.status;return c.a.createElement(I.a,{container:!0,alignItems:"center"},c.a.createElement(I.a,{item:!0,md:3},c.a.createElement(C.a,{variant:"contained",size:"large",color:"primary",onClick:n.sign,disabled:a!==Wa.PENDING},"Sign")),c.a.createElement(I.a,{item:!0,md:9},c.a.createElement(ne.a,{error:!0},t)))},n.hasBIP32PathError=function(){var e=n.state,t=e.bip32PathError,a=e.status;return""!==t||n.interaction().hasMessagesFor({state:a,level:Wa.ERROR,code:"bip32"})},n.bip32PathError=function(){var e=n.state,t=e.bip32PathError,a=e.status;return""!==t?t:n.interaction().messageTextFor({state:a,level:Wa.ERROR,code:"bip32"})},n.setBIP32PathError=function(e){n.setState({bip32PathError:e})},n.handleBIP32PathChange=function(e){(0,n.props.validateAndSetBIP32Path)(e.target.value,(function(){}),n.setBIP32PathError)},n.bip32PathIsDefault=function(){var e=n.props,t=e.signatureImporter,a=e.defaultBIP32Path;return t.bip32Path===a},n.resetBIP32Path=function(){var e=n.props.resetBIP32Path;n.setBIP32PathError(""),e()},n.sign=Object(J.a)(Z.a.mark((function e(){var t,a,r,s,o;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.disableChangeMethod,r=t.validateAndSetSignature,s=t.enableChangeMethod,a(),n.setState({signatureError:"",status:Wa.ACTIVE}),e.prev=3,e.next=6,n.interaction().run();case 6:o=e.sent,r(o,(function(e){var t={signatureError:e};""!==e&&(t.status=Wa.PENDING),n.setState(t)})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),n.setState({signatureError:e.t0.message,status:Wa.PENDING});case 14:s();case 15:case"end":return e.stop()}}),e,null,[[3,10]])}))),n.state={signatureError:"",bip32PathError:"",status:n.interaction(!0).isSupported()?Wa.PENDING:Wa.UNSUPPORTED},n}return a}(c.a.Component),vn=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Q.a)(this,a),(n=t.call(this,e)).titleRef=c.a.createRef(),n.componentDidMount=function(){n.resetBIP32Path(),n.scrollToTitle()},n.componentDidUpdate=function(){n.scrollToTitle()},n.title=function(){var e=n.props,t=e.number,a=e.signatureImporter,r=e.setName;return c.a.createElement(Ke,{number:t,name:a.name,setName:r})},n.scrollToTitle=function(){n.props.number===n.getCurrent()&&n.titleRef.current.scrollIntoView({behavior:"smooth"})},n.renderImport=function(){var e=n.props,t=e.signatureImporter,a=e.number,r=e.extendedPublicKeyImporter,s=a>n.getCurrent(),o=n.state.disableChangeMethod,i="signature-".concat(a,"-importer-select-label");return s?c.a.createElement("p",null,"Once you have imported the signature above, you will be able to import another signature here."):c.a.createElement("form",null,(null===r||"undefined"===typeof r||"text"===r.method)&&c.a.createElement(Ue.a,{fullWidth:!0},c.a.createElement(Ha.a,{id:i},"Select Method"),c.a.createElement(Ga.a,{labelId:i,id:"signature-".concat(a,"-importer-select"),disabled:o,value:t.method,onChange:n.handleMethodChange},c.a.createElement(qa.a,{value:""},"< Select method >"),c.a.createElement(qa.a,{value:Wa.TREZOR},"Trezor"),c.a.createElement(qa.a,{value:Wa.LEDGER},"Ledger"),c.a.createElement(qa.a,{value:Wa.HERMIT},"Hermit"),c.a.createElement(qa.a,{value:"text"},"Enter as text"))),n.renderImportByMethod())},n.renderImportByMethod=function(){var e=n.props,t=e.network,a=e.signatureImporter,r=e.signatureImporters,s=e.inputs,o=e.inputsTotalSats,i=e.outputs,l=e.fee,u=e.isWallet,d=e.extendedPublicKeyImporter;return"text"===a.method?c.a.createElement(tn,{signatureImporter:a,validateAndSetSignature:n.validateAndSetSignature}):a.method===Wa.HERMIT?c.a.createElement(fn,{network:t,signatureImporter:a,inputs:s,outputs:i,validateAndSetBIP32Path:n.validateAndSetBIP32Path,resetBIP32Path:n.resetBIP32Path,defaultBIP32Path:n.defaultBIP32Path(),validateAndSetSignature:n.validateAndSetSignature,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod}):a.method===Wa.TREZOR||a.method===Wa.LEDGER?c.a.createElement(bn,{network:t,signatureImporter:a,signatureImporters:r,inputs:s,outputs:i,inputsTotalSats:o,fee:l,isWallet:u,extendedPublicKeyImporter:d,validateAndSetBIP32Path:n.validateAndSetBIP32Path,resetBIP32Path:n.resetBIP32Path,defaultBIP32Path:n.defaultBIP32Path(),validateAndSetSignature:n.validateAndSetSignature,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod}):null},n.handleMethodChange=function(e){var t=n.props,a=t.number;(0,t.setMethod)(a,e.target.value),n.reset()},n.disableChangeMethod=function(){n.setState({disableChangeMethod:!0})},n.enableChangeMethod=function(){n.setState({disableChangeMethod:!1})},n.reset=function(){var e=n.props,t=e.number,a=e.setSignature,r=e.setPublicKeys,s=e.setFinalized;a(t,""),r(t,[]),s(t,!1)},n.defaultBIP32Path=function(){var e=n.props,t=e.addressType,a=e.network;return e.isWallet?Object(ae.multisigBIP32Root)(t,a):Object(ae.multisigBIP32Path)(t,a)},n.resetBIP32Path=function(){var e=n.props,t=e.number,a=e.setBIP32Path;if(e.isWallet&&"text"!==n.props.extendedPublicKeyImporter.method)return;a(t,n.defaultBIP32Path())},n.validateAndSetBIP32Path=function(e,t,a,r){var s=n.props,o=s.number,i=s.setBIP32Path,l=Object(ae.validateBIP32Path)(e,r);i(o,e),l?a(l):(a(""),t())},n.renderSignature=function(){var e=n.props,t=e.signatureImporter,a=e.txid,r=JSON.stringify(t.signature);return c.a.createElement("div",null,c.a.createElement("p",null,"The following signature was imported:"),c.a.createElement(S.a,null,c.a.createElement(fa,{text:r,showIcon:!0,code:!0})),c.a.createElement(S.a,{mt:2},c.a.createElement(C.a,{variant:"contained",color:"secondary",disabled:""!==a,size:"small",onClick:n.reset},"Remove Signature")))},n.validateAndSetSignature=function(e,t){var a=n.props,r=a.number,s=a.inputs,o=a.signatureImporters,i=a.setComplete,l=a.network,c=a.outputs;if(Array.isArray(e))if(e.length<s.length)t("Not enough signatures (must be exactly one for each input).");else if(e.length>s.length)t("Too many signatures (must be exactly one for each input).");else{for(var u=[],d=Object.values(o).filter((function(e){return e.finalized})),p=0;p<e.length;p+=1){var m=p+1,E=e[p];if(""!==Object(ae.validateHex)(E))return void t("Signature for input ".concat(m," is not valid hex."));var h=void 0;try{h=Object(ae.validateMultisigSignature)(l,s,c,p,E)}catch(v){return void t("Signature for input ".concat(m," is invalid."))}if(!h)return void t("Signature for input ".concat(m," is invalid."));for(var f=0;f<d.length;f+=1){var b=d[f];if(b.signature[p]===E||b.publicKeys[p]===h)return void t("Signature for input ".concat(m," is a duplicate of a previously provided signature."))}u.push(h)}i(r,{signature:e,publicKeys:u,finalized:!0})}else t("Signature is not an array of strings.")},n.state={disableChangeMethod:!1},n}return Object($.a)(a,[{key:"getCurrent",value:function(){var e=this.props.signatureImporters;return Object.keys(e).reduce((function(t,a){return t+(e[a].finalized?1:0)}),1)}},{key:"render",value:function(){var e=this.props.signatureImporter;return c.a.createElement(O.a,null,c.a.createElement(w.a,{title:this.title(),ref:this.titleRef}),c.a.createElement(x.a,null,e.finalized?this.renderSignature():this.renderImport()))}}]),a}(c.a.Component);var gn={setName:Ya,setMethod:Va,setBIP32Path:Za,setPublicKeys:Ja,setSignature:Qa,setFinalized:$a,setComplete:en},Pn=Object(m.b)((function(e,t){return Object(F.a)({},{signatureImporters:e.spend.signatureImporters,signatureImporter:e.spend.signatureImporters[t.number],fee:e.spend.transaction.fee,txid:e.spend.transaction.txid},{},e.spend.transaction)}),gn)(vn),yn=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Q.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){var e=n.props,t=e.signingKeys,a=e.number;t[a-1]>0&&n.updateKeySelection(t[a-1])},n.render=function(){var e=n.state.selection,t=n.props.number;return c.a.createElement("div",null,n.renderKeySelectorMenu(),e>0&&t>0&&n.renderSignatureImporter())},n.renderSignatureImporter=function(){var e=n.props.number,t=n.getAssociatedExtendedPublicKeyImporter();return c.a.createElement(S.a,{mt:2},c.a.createElement(Pn,{number:e,extendedPublicKeyImporter:t}))},n.getAssociatedExtendedPublicKeyImporter=function(){var e=n.props.extendedPublicKeyImporters,t=n.state.selection,a=null;return t&&(a=e[t]),a},n.renderKeySelectorMenu=function(){var e=n.props,t=e.number,a=e.signatureImporters,r=e.setBIP32Path,s=n.state.selection,o="keySelector".concat(t),i=n.getAssociatedExtendedPublicKeyImporter();if(null!==i&&t>0){var l=a[t];if(l.signature.length>0)return"";i.bip32Path!==l.bip32Path&&"text"!==i.method&&setTimeout((function(){r(t,i.bip32Path)}),0)}return c.a.createElement("form",null,c.a.createElement(Ue.a,{fullWidth:!0},c.a.createElement(Ha.a,{id:o},"Select Key"),c.a.createElement(Ga.a,{labelId:o,id:"signature-".concat(t,"-key-select"),value:s,onChange:n.handleKeyChange},c.a.createElement(qa.a,{value:""},"< Select Extended Public Key >"),n.renderKeySelectorMenuItems())))},n.extendedPublicKeyImporterNotUsed=function(e){var t=n.props,a=t.inputs,r=t.network,s=t.signatureImporters;if(0===t.number)return!0;for(var o=0;o<a.length;o+=1)for(var i=a[o],l=Object(ae.deriveChildPublicKey)(e.extendedPublicKey,i.bip32Path,r),c=1;c<=Object.keys(s).length;c+=1)for(var u=s[c],d=0;d<u.publicKeys.length;d+=1){if(u.publicKeys[d]===l)return!1}return!0},n.renderKeySelectorMenuItems=function(){for(var e=n.props,t=e.extendedPublicKeyImporters,a=e.totalSigners,r=[],s=1;s<=a;s+=1){var o=t[s];n.extendedPublicKeyImporterNotUsed(o)&&r.push(c.a.createElement(qa.a,{value:s,key:s},o.name))}return r},n.handleKeyChange=function(e){var t=n.props.onChange;(n.updateKeySelection(e.target.value),t)&&t(e,n.props.extendedPublicKeyImporters[e.target.value])},n.state={selection:""},n}return Object($.a)(a,[{key:"updateKeySelection",value:function(e){if(this.setState({selection:e}),""!==e){var t=this.props,a=t.extendedPublicKeyImporters,n=t.setMethod,r=t.number,s=t.setSigningKey,o=a[e].method;n(r,"text"===o?"":o),r>0&&s(r,e)}}}]),a}(c.a.Component);yn.defaultProps={onChange:null};var Sn={setBIP32Path:Za,setMethod:Va,setSigningKey:function(e,t){return{type:"SET_SIGNING_KEY",number:e,value:t}}},Tn=Object(m.b)((function(e){return Object(F.a)({},e.quorum,{totalSigners:e.spend.transaction.totalSigners,inputs:e.spend.transaction.inputs,network:e.settings.network,signatureImporters:e.spend.signatureImporters,signingKeys:e.spend.transaction.signingKeys})}),Sn)(yn),In={hasInteraction:!1,interactionState:Wa.PENDING,interactionError:"",interactionMessage:""},On=function(e,t){switch(t.type){case"RESET":return Object(F.a)({},e,{interactionError:"",interactionMessage:"",interactionState:Wa.PENDING});case"SET_ACTIVE":return Object(F.a)({},e,{interactionState:Wa.ACTIVE});case"HAS_INTERACTION":return Object(F.a)({},e,{hasInteraction:t.value});case"SET_MESSAGE":return Object(F.a)({},e,{interactionMessage:t.value,interactionError:""});case"SET_ERROR":return Object(F.a)({},e,{interactionError:t.value,interactionMessage:""});default:return e}},wn=function(e){var t=e.slice,a=e.network,n=Object(l.useReducer)(On,In),r=Object(ca.a)(n,2),s=r[0],o=r[1],i=Object(l.useState)(null),u=Object(ca.a)(i,2),d=u[0],p=u[1],m=Object(ae.multisigAddressType)(t.multisig),E=Object(ae.multisigRequiredSigners)(t.multisig),h=Object(ae.multisigTotalSigners)(t.multisig);function f(){return(f=Object(J.a)(Z.a.mark((function e(){var a,n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o({type:"SET_ACTIVE"}),a=t.multisig,e.prev=2,e.next=5,d.run();case 5:(n=e.sent).address===a.address&&n.serializedPath===d.bip32Path?o({type:"SET_MESSAGE",value:"Success"}):o({type:"SET_ERROR",value:"An unknown error occured"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),o({type:"SET_ERROR",value:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}return c.a.createElement(I.a,{item:!0,md:12},c.a.createElement(Tn,{number:0,onChange:function(e,n){var r=t.multisig,s=t.bip32Path;p(Object(Wa.ConfirmMultisigAddress)({keystore:n.method,network:a,bip32Path:"".concat(n.bip32Path).concat(s.slice(1)),multisig:r})),o({type:"HAS_INTERACTION",value:!0}),o({type:"RESET"})}}),s.hasInteraction&&c.a.createElement(c.a.Fragment,null,c.a.createElement(S.a,null,c.a.createElement("p",null,"Confirm the following",a.length?a:""," ",m," ",E,"-of-",h," multisig address on your device:"),c.a.createElement(Ut.a,null,c.a.createElement(Wt.a,null,c.a.createElement(Ft.a,null,c.a.createElement(zt.a,null,"Address:"),c.a.createElement(zt.a,null,c.a.createElement("code",null,t.multisig.address))),c.a.createElement(Ft.a,null,c.a.createElement(zt.a,null,"BIP32 Path:"),c.a.createElement(zt.a,null,c.a.createElement("code",null,d.bip32Path)))))),""!==s.interactionMessage&&c.a.createElement(S.a,{mt:2,align:"center"},c.a.createElement(T.a,{variant:"h5",style:{color:"green"}},c.a.createElement(Fa.a,null),"\xa0 ",s.interactionMessage)),""!==s.interactionError&&c.a.createElement(S.a,{mt:2,align:"center",style:{color:"red"}},c.a.createElement(T.a,{variant:"h5"},c.a.createElement(za.a,null),"\xa0 Confirmation Error"),c.a.createElement(T.a,{variant:"caption"},s.interactionError)),""===s.interactionMessage&&""===s.interactionError&&c.a.createElement(hn,{messages:d.messagesFor({state:s.interactionState})}),c.a.createElement(C.a,{variant:"contained",size:"large",onClick:function(){return f.apply(this,arguments)},disabled:s.interactionState===Wa.ACTIVE},"Confirm"),(""!==s.interactionMessage||""!==s.interactionError)&&c.a.createElement(C.a,{size:"large",onClick:function(){return o({type:"RESET"})}},"Reset")))};wn.defaultProps={network:""};var xn=wn,Cn=Object(xe.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper}}}));var Rn=function(e,t){var a=e.tab,n=c.a.createElement(Xt.a,Object.assign({value:t.toString(),key:t},function(e){return{id:"scrollable-auto-tab-".concat(e),"aria-controls":"scrollable-auto-tabpanel-".concat(e)}}(t),a));return a.disabled?c.a.createElement(Ia.a,{title:"Not available for this address",key:t,arrow:!0},c.a.createElement("div",null,n)):n};function jn(e){var t=e.children,a=e.value,n=e.index,r=Object(ua.a)(e,["children","value","index"]);return c.a.createElement(I.a,Object.assign({container:!0,justify:"center",style:{display:a===n?"inherit":"none"}},r),c.a.createElement(I.a,{item:!0,md:11},c.a.createElement(S.a,null,t)))}jn.defaultProps={children:c.a.createElement("span")};var kn=function(e){var t=e.slice,a=e.client,n=e.network,r=c.a.useState("0"),s=Object(ca.a)(r,2),o=s[0],i=s[1],l=Cn(),u=[{tab:{label:"Redeem Script"},panel:c.a.createElement(Aa,{multisig:t.multisig,showAddress:!1})},{tab:{label:"Confirm on Device"},panel:c.a.createElement("div",null,c.a.createElement(T.a,{variant:"h6"},"Verify Address with Quorum Participants"),c.a.createElement(T.a,{variant:"caption"},"(not all device variants supported)"),c.a.createElement(xn,{slice:t,network:n}))},{tab:{label:"UTXOs",disabled:!t.balanceSats.isGreaterThan(0)},panel:c.a.createElement(ka,{inputs:t.utxos,inputsTotalSats:t.balanceSats})},{tab:{label:"Watch Address",disabled:"private"!==a.type},panel:c.a.createElement(La,{addresses:[t.multisig.address],client:a})}];return c.a.createElement(I.a,{container:!0,className:l.root},c.a.createElement(Oa.a,{position:"static",color:"default",variant:"outlined"},c.a.createElement(qt.a,{value:o,onChange:function(e,t){return i(t)},"aria-label":"Slice Details View",centered:!0},u.map(Rn))),u.map((function(e,t){var a=e.panel;return c.a.createElement(jn,{value:o,index:t.toString(),key:t},c.a.createElement(S.a,{my:3},a))})))},Nn=Object(xe.a)((function(e){return{panel:{boxShadow:"inset 0px 0px 4px 1px ".concat(e.palette.grey[500])},spent:{textDecoration:"line-through"}}})),_n=function(e){var t=e.slices,a=e.search,n=e.paging,r=e.title,s=e.client,o=e.network,i=e.disabled,l=Nn(),u={search:a,paging:n,detailPanelType:"single",showTitle:r&&r.length||!1,emptyRowsWhenPaging:!1,pageSize:10,pageSizeOptions:[10,20,50]};u.toolbar=u.showTitle&&u.search;var d=[{title:"BIP32 Path",field:"bip32Path",type:"string",defaultSort:"asc",customSort:Pa},{title:"UTXOs",field:"utxos",width:"50px",render:function(e){return c.a.createElement(T.a,null,e.utxos.length)},customSort:Sa},{title:"Balance",field:"balanceSats",render:function(e){return c.a.createElement(T.a,null,Object(ae.satoshisToBitcoins)(e.balanceSats).toString())},customSort:ya},{title:"Last Used",field:"lastUsed",render:function(e){return c.a.createElement(T.a,null,e.lastUsed||"")},customSort:Ta},{title:"Address",field:"address",sorting:!1,render:function(e){return c.a.createElement(fa,{text:e.multisig.address,showIcon:!0,showText:!0,code:!0,className:e.addressUsed&&e.balanceSats.isEqualTo(0)?l.spent:""})}}];return d=d.filter((function(e){return!i.includes(e.field)})),c.a.createElement(va.a,{options:u,columns:d,data:t,detailPanel:[{tooltip:"Address Details",render:function(e){return c.a.createElement(S.a,{p:1,className:l.panel},c.a.createElement(kn,{client:s,slice:e,network:o}))}}]})};_n.defaultProps={search:!1,paging:!1,title:"",disabled:[]};var An,Kn=_n,Mn=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Q.a)(this,a),(n=t.call(this,e)).getNextDepositAddress=function(){var e=n.state.depositIndex;n.setState({depositIndex:e+1}),setTimeout(n.getDepositAddress,0)},n.getDepositAddress=function(){var e=n.props,t=e.network,a=e.client,r=e.updateDepositSlice,s=e.depositableSlices,o=e.enqueueSnackbar,i=n.state.depositIndex;i<s.length&&n.setState({slice:s[i],address:s[i].multisig.address}),clearInterval(An),An=setInterval(Object(J.a)(Z.a.mark((function e(){var s,i,l,c;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=n.state,l=i.address,c=i.slice,e.next=4,St(l,t,a);case 4:(s=e.sent)&&s.utxos&&s.utxos.length&&(clearInterval(An),r(Object(F.a)({},s,{bip32Path:c.bip32Path})),o("Deposit received. A new address should now be available for deposit."),n.resetDepositAddressIndex(),setTimeout(n.getDepositAddress,2e3)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),2e3)},n.handleAmountChange=function(e){var t=e.target.value,a="";t.length&&!t.match(/^[0-9.]+$/)&&(a="Amount must be numeric");var r=t.split(".");r.length>2?a="Amount must be numeric":2===r.length&&r[1].length>8&&(a="Amount must have maximum precision of 8 decimal places"),n.setState({amount:e.target.value,amountError:a})},n.qrString=function(){var e=n.state,t=e.address,a=e.amount;return"bitcoin:".concat(t).concat(a?"?amount=".concat(a):"")},n.resetDepositAddressIndex=function(){var e=n.props.depositableSlices;n.setState({slice:e[0],address:e[0].multisig.address,depositIndex:0})},n.state={address:"",amount:0,amountError:"",depositIndex:0,slice:null},n}return Object($.a)(a,[{key:"componentDidMount",value:function(){this.getDepositAddress()}},{key:"componentWillUnmount",value:function(){clearInterval(An)}},{key:"render",value:function(){var e=this.props,t=e.resetWalletView,a=e.client,n=e.network,r=e.depositableSlices,s=this.state,o=s.amount,i=s.amountError,l=s.depositIndex,u=s.slice;return c.a.createElement("div",null,c.a.createElement(O.a,null,c.a.createElement(w.a,{title:"Deposit"}),c.a.createElement(x.a,null,c.a.createElement(I.a,{container:!0,justify:"center",direction:"column",alignItems:"center"},c.a.createElement(I.a,{item:!0,md:6},c.a.createElement(fa,{text:this.qrString(),newline:!0,showText:!1},c.a.createElement(oa.a,{size:300,value:this.qrString(),level:"L"}))),c.a.createElement(I.a,{item:!0},c.a.createElement(T.a,{align:"center",variant:"subtitle1"},"Scan QR code or click to copy address to clipboard.")),c.a.createElement(I.a,{item:!0,md:6},c.a.createElement(S.a,{my:3},c.a.createElement(ke.a,{fullWidth:!0,label:"Amount BTC",name:"depositAmount",onChange:this.handleAmountChange,value:o,error:""!==i,helperText:i,InputProps:{endAdornment:c.a.createElement(Mt.a,{position:"end"},c.a.createElement(je,{network:n}))}})))),u?c.a.createElement(Kn,{slices:[u],client:a,network:n,disabled:["lastUsed"]}):"",c.a.createElement(S.a,{mt:2},c.a.createElement(C.a,{variant:"contained",color:"primary",onClick:this.getNextDepositAddress,disabled:l>=r.length-1},"Next Address"),c.a.createElement(S.a,{ml:2,component:"span"},c.a.createElement(C.a,{variant:"contained",onClick:t},"Return"))))))}}]),a}(c.a.Component);var Bn,Dn={updateDepositSlice:de,resetWalletView:Ee},Un=Object(m.b)((function(e){return Object(F.a)({},e.settings,{depositableSlices:we(e),client:e.client})}),Dn)(Object(y.withSnackbar)(Mn)),Ln=a(85),Fn=a(1069),zn=a(1064),Wn=a(661),Hn=a(665),Gn=a(663),qn=a(325),Xn=a(1125),Yn=a(1107),Vn=a(1106),Zn=a(683),Jn=a.n(Zn),Qn=a(682),$n=a.n(Qn),er=a(681),tr=a.n(er),ar=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Q.a)(this,a),(n=t.call(this,e)).interaction=null,n.componentDidMount=function(){n.defaultMode()},n.addressContent=function(){var e=n.props,t=e.node,a=e.network,r=e.client,s=t.multisig,o=t.addressUsed,i=t.balanceSats,l=n.state,u=l.expandMode,d=l.showMenu,p=l.showMenuIcon;return c.a.createElement("div",{style:{width:"100%"}},c.a.createElement(T.a,null,c.a.createElement(fa,{text:s.address,showIcon:!0,showText:!1},c.a.createElement("code",{className:o&&i.isEqualTo(0)?Ra.a.spent:""},s.address),"\xa0"),H(Object(ae.blockExplorerAddressURL)(s.address,a),c.a.createElement(tr.a,{onClick:function(e){return e.stopPropagation()}}))),c.a.createElement($n.a,{onClick:n.handleMenu,style:{float:"right",display:p&&n.hasAdditionalOptions()?"block":"none"},"aria-controls":"address-menu","aria-haspopup":"true"}),c.a.createElement(qn.a,{id:"address-menu",anchorEl:Bn,keepMounted:!0,open:d,onClose:n.handleClose},i.isGreaterThan(0)&&c.a.createElement(qa.a,{selected:0===u,onClick:function(e){n.setState({expandMode:0}),n.handleClose(e)}},"UTXOs"),c.a.createElement(qa.a,{selected:1===u,onClick:function(e){n.setState({expandMode:1}),n.handleClose(e)}},"Scripts"),n.canConfirm()&&c.a.createElement(qa.a,{selected:2===u,onClick:function(e){n.setState({expandMode:2}),n.handleClose(e)}},"Confirm on Device"),"private"===r.type&&c.a.createElement(qa.a,{selected:3===u,onClick:function(e){n.setState({expandMode:3}),n.handleClose(e)}},"Watch with bitcoind Node")))},n.canConfirm=function(){var e=n.props.extendedPublicKeyImporters;return Object.values(e).filter((function(e){return"trezor"===e.method})).length>0},n.hasAdditionalOptions=function(){var e=n.props,t=e.client;return e.node.balanceSats.isGreaterThan(0)||"private"===t.type||n.canConfirm()},n.handleClose=function(e){e.stopPropagation(),n.setState({showMenu:!1})},n.handleMenu=function(e){e.stopPropagation(),Bn=e.target,n.setState({showMenu:!0})},n.panelExpand=function(e,t){n.setState({showMenuIcon:t})},n.render=function(){var e=n.props.node.bip32Path;return c.a.createElement(Xn.a,{onChange:n.panelExpand},c.a.createElement(Yn.a,{expandIcon:c.a.createElement(Jn.a,null),"aria-controls":"panel1a-content",id:"address-header".concat(e)},n.addressContent()),c.a.createElement(Vn.a,null,c.a.createElement(I.a,{container:!0},n.expandContent())))},n.defaultMode=function(){var e=n.props.node.balanceSats;n.setState({expandMode:e.isGreaterThan(0)?0:1})},n.expandContent=function(){var e=n.props,t=e.client,a=e.node,r=a.utxos,s=a.balanceSats,o=a.multisig,i=n.state.expandMode;switch("public"===t.type&&3===i&&n.defaultMode(),s.isEqualTo(0)&&0===i&&n.defaultMode(),i){case 0:return c.a.createElement(I.a,{item:!0,md:12},c.a.createElement(ka,{inputs:r,inputsTotalSats:s}));case 1:return c.a.createElement(I.a,{item:!0,md:12},c.a.createElement(Aa,{multisig:o,showAddress:!1}));case 2:return n.renderAddressConfirmation();case 3:return c.a.createElement(I.a,{item:!0,md:12},c.a.createElement(La,{addresses:[o.address]}));default:return""}},n.renderAddressConfirmation=function(){var e=n.state,t=e.interactionState,a=e.interactionMessage,r=e.interactionError,s=e.hasInteraction;return c.a.createElement(I.a,{item:!0,md:12},c.a.createElement(Tn,{number:0,onChange:n.keySelected}),s&&c.a.createElement(c.a.Fragment,null,n.confirmAddressDescription(),""!==a&&c.a.createElement(S.a,{mt:2,align:"center"},c.a.createElement(T.a,{variant:"h5",style:{color:"green"}},c.a.createElement(Fa.a,null),"\xa0 ",a)),""!==r&&c.a.createElement(S.a,{mt:2,align:"center",style:{color:"red"}},c.a.createElement(T.a,{variant:"h5"},c.a.createElement(za.a,null),"\xa0 Confirmation Error"),c.a.createElement(T.a,{variant:"caption"},r)),""===a&&""===r&&c.a.createElement(hn,{messages:n.interaction.messagesFor({state:t})}),c.a.createElement(C.a,{variant:"contained",size:"large",onClick:n.confirmOnDevice,disabled:t===Wa.ACTIVE},"Confirm"),(""!==a||""!==r)&&c.a.createElement(C.a,{size:"large",onClick:n.resetInteractionState},"Reset")))},n.resetInteractionState=function(){n.setState({interactionError:"",interactionMessage:"",interactionState:Wa.PENDING})},n.confirmOnDevice=Object(J.a)(Z.a.mark((function e(){var t,a,r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({interactionState:Wa.ACTIVE}),t=n.props.node,a=t.multisig,e.prev=3,e.next=6,n.interaction.run();case 6:(r=e.sent).address===a.address&&r.serializedPath===n.interaction.bip32Path?n.setState({interactionState:Wa.ACTIVE,interactionMessage:"Success",interactionError:""}):n.setState({interactionState:Wa.ACTIVE,interactionError:"An unknow error occured",interactionMessage:""}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),n.setState({interactionState:Wa.ACTIVE,interactionError:e.t0.message,interactionMessage:""});case 13:case"end":return e.stop()}}),e,null,[[3,10]])}))),n.keySelected=function(e,t){var a=n.props,r=a.network,s=a.node,o=s.multisig,i=s.bip32Path;n.interaction=Object(Wa.ConfirmMultisigAddress)({keystore:t.method,network:r,bip32Path:"".concat(t.bip32Path).concat(i.slice(1)),multisig:o}),n.setState({hasInteraction:!0}),n.resetInteractionState()},n.state={expandMode:null,showMenu:!1,showMenuIcon:!1,hasInteraction:!1,interactionState:Wa.PENDING,interactionError:"",interactionMessage:""},n}return Object($.a)(a,[{key:"confirmAddressDescription",value:function(){var e=this.props,t=e.network,a=e.node,n=e.requiredSigners,r=e.totalSigners,s=a.multisig,o=Object(ae.multisigAddressType)(s);return c.a.createElement(S.a,null,c.a.createElement("p",null,"Confirm the following ",t," ",o," ",n,"-of-",r," multisig address on your device:"),c.a.createElement(Ut.a,null,c.a.createElement(Wt.a,null,c.a.createElement(Ft.a,null,c.a.createElement(zt.a,null,"Address:"),c.a.createElement(zt.a,null,c.a.createElement("code",null,s.address))),c.a.createElement(Ft.a,null,c.a.createElement(zt.a,null,"BIP32 Path:"),c.a.createElement(zt.a,null,c.a.createElement("code",null,this.interaction.bip32Path))))))}}]),a}(c.a.Component);ar.defaultProps={network:ae.NETWORKS.TESTNET};var nr=Object(m.b)((function(e){return{network:e.settings.network,requiredSigners:e.settings.requiredSigners,totalSigners:e.settings.totalSigners,client:e.client,extendedPublicKeyImporters:e.quorum.extendedPublicKeyImporters}}),{})(ar),rr=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(Q.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).componentDidMount=function(){e.generate()},e.render=function(){var t=e.props,a=t.bip32Path,n=t.spend,r=t.fetchedUTXOs,s=t.balanceSats,o=t.multisig,i=t.utxos,l=t.walletMode,u=t.addressKnown,d=l===ue;return c.a.createElement(Ft.a,{key:a},d&&c.a.createElement(zt.a,null,c.a.createElement(Wn.a,{id:a,name:"spend",onChange:e.handleSpend,checked:n,disabled:!r||s.isEqualTo(0)})),c.a.createElement(zt.a,null,c.a.createElement("code",null,a)),c.a.createElement(zt.a,null,i.length),c.a.createElement(zt.a,null,r&&u?Object(ae.satoshisToBitcoins)(s).toFixed():""),c.a.createElement(zt.a,null,e.maxUtxoDate()),c.a.createElement(zt.a,null,o?e.renderAddress():"..."))},e.maxUtxoDate=function(){var t=e.props.utxos;if(!t.length)return"";var a=Math.max.apply(Math,Object(he.a)(t.map((function(e){return e.time}))));return Number.isNaN(a)?"Pending":new Date(1e3*a).toLocaleDateString()},e.renderAddress=function(){var t=e.props.braidNode;return c.a.createElement(nr,{node:t})},e.generate=function(){var t=e.props,a=t.present,n=t.change,r=t.bip32Path,s=t.addNode;a||s(n,r)},e.handleSpend=function(t){var a=e.props,n=a.change,r=a.bip32Path,s=a.updateNode,o=a.inputs,i=a.utxos,l=a.multisig,c=a.setInputs,u=a.updateAutoSpend,d=a.setFeeRate,p=a.feeRate;c(t.target.checked?o.concat(i.map((function(e){return Object(F.a)({},e,{multisig:l,bip32Path:r})}))):o.filter((function(e){return 0===i.filter((function(t){return t.txid===e.txid&&t.index===e.index})).length}))),s(n,{spend:t.target.checked,bip32Path:r}),u(!1),d(p)},e}return a}(c.a.Component);rr.defaultProps={multisig:{},present:!1};var sr={setInputs:Zt,setFeeRate:ta,updateAutoSpend:na},or=Object(m.b)((function(e,t){var a="1"===(t.bip32Path||"").split("/")[1],n=e.wallet[a?"change":"deposits"];return Object(F.a)({},e.settings,{},{change:a},{},n.nodes[t.bip32Path],{},e.spend.transaction,{walletMode:e.wallet.common.walletMode,braidNode:n.nodes[t.bip32Path]})}),sr)(rr),ir=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Q.a)(this,a),(n=t.call(this,e)).sortAddresses=function(e){var t=n.state,a=t.orderBy,r=t.orderDir;e===a?n.setState({page:0,orderDir:"asc"===r?"desc":"asc"}):n.setState({page:0,orderBy:e})},n.renderFilters=function(){var e=n.state,t=e.filterIncludeSpent,a=e.filterIncludeZeroBalance;return c.a.createElement(Fn.a,{row:!0},c.a.createElement(zn.a,{component:"h2"},c.a.createElement(S.a,{mr:3},"Show Additional")),c.a.createElement(Fe.a,{control:c.a.createElement(Wn.a,{checked:t,value:"filterIncludeSpent",onChange:n.filterAddresses}),label:"Spent Addresses"}),c.a.createElement(Fe.a,{control:c.a.createElement(Wn.a,{checked:a,value:"filterIncludeZeroBalance",onChange:n.filterAddresses}),label:"Zero Balance"}))},n.filterAddresses=function(e,t){var a;n.setState((a={},Object(Ln.a)(a,e.target.value,t),Object(Ln.a)(a,"page",0),a))},n.getNodeSet=function(){var e=n.props,t=e.changeNodes,a=e.depositNodes,r=n.state,s=r.filterIncludeSpent,o=r.filterIncludeZeroBalance,i=r.orderBy,l=r.orderDir,c=Object.values(a).concat(Object.values(t)).reduce((function(e,t){var a=e;return a[t.bip32Path]=t,a}),{}),u=[];return Object.values(c).forEach((function(e){(e.balanceSats.isGreaterThan(0)||o&&e.balanceSats.isEqualTo(0)&&!e.addressUsed||s&&e.addressUsed)&&u.push(e)})),u=(u=u.sort((function(e,t){var a="asc"===l?1:-1;if("bip32Path"===i)return e.change&&!t.change?a:!e.change&&t.change?-a:parseInt(e.bip32Path.split("/").reverse()[0],10)>parseInt(t.bip32Path.split("/").reverse()[0],10)?a:-a;if("balanceSats"===i)return e.balanceSats.isEqualTo(t.balanceSats)?0:e.balanceSats.isGreaterThan(t.balanceSats)?a:-a;if("utxos"===i)return e.utxos.length===t.utxos.length?0:e.utxos.length>t.utxos.length?a:-a;if("time"===i){if(0===e.utxos.length)return 0===t.utxos.length?0:a;if(0===t.utxos.length)return 0===e.utxos.length?0:-a;var n=Math.min.apply(Math,Object(he.a)(e.utxos.map((function(e){return e.time})))),r=Math.min.apply(Math,Object(he.a)(t.utxos.map((function(e){return e.time}))));return Number.isNaN(n)&&Number.Number.isNaN(r)?0:Number.isNaN(n)?a:Number.isNaN(r)?-a:n>r?a:-a}return 0}))).reduce((function(e,t){var a=e;return a[t.bip32Path]=t,a}),{})},n.renderNodes=function(){for(var e=n.state,t=e.page,a=e.nodesPerPage,r=e.spend,s=n.props,o=s.addNode,i=s.updateNode,l=t*a,u=[],d=n.getNodeSet(),p=0;p<a;p+=1){var m=l+p;if(m>Object.keys(d).length-1)break;var E=Object.values(d)[m].bip32Path,h=Object.values(d)[m].change,f=c.a.createElement(or,{key:E,bip32Path:E,addNode:o,updateNode:i,change:h,spend:r});u.push(f)}return u},n.handlePageChange=function(e,t){var a=t;n.setState({page:a})},n.handleChangeRowsPerPage=function(e){n.setState({nodesPerPage:e.target.value,page:0})},n.pageCount=function(){var e=n.state.nodesPerPage;return Math.ceil(n.rowCount()/e)},n.rowCount=function(){var e=n.getNodeSet();return Object.keys(e).length},n.state={page:0,nodesPerPage:10,spend:!1,filterIncludeSpent:!1,filterIncludeZeroBalance:!1,orderBy:"bip32Path",orderDir:"asc"},n}return Object($.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.page,n=t.nodesPerPage,r=t.orderBy,s=t.orderDir,o=this.props.walletMode===ue;return c.a.createElement(I.a,{item:!0,md:12},c.a.createElement(Ut.a,{style:{tableLayout:"fixed"}},c.a.createElement(Lt.a,null,c.a.createElement(Ft.a,null,o&&c.a.createElement(zt.a,{width:62},"Spend?"),c.a.createElement(zt.a,{width:106},c.a.createElement(Hn.a,{active:"bip32Path"===r,direction:s,onClick:function(){return e.sortAddresses("bip32Path")}},"BIP32 Path")),c.a.createElement(zt.a,{width:78},c.a.createElement(Hn.a,{active:"utxos"===r,direction:s,onClick:function(){return e.sortAddresses("utxos")}},"UTXOs")),c.a.createElement(zt.a,{width:82},c.a.createElement(Hn.a,{active:"balanceSats"===r,direction:s,onClick:function(){return e.sortAddresses("balanceSats")}},"Balance")),c.a.createElement(zt.a,{width:98},c.a.createElement(Hn.a,{active:"time"===r,direction:s,onClick:function(){return e.sortAddresses("time")}},"Last Used")),c.a.createElement(zt.a,null,"Address"))),c.a.createElement(Wt.a,null,this.renderNodes())),c.a.createElement(I.a,{container:!0},c.a.createElement(I.a,{item:!0,md:6},c.a.createElement(Gn.a,{component:"div",count:this.rowCount(),rowsPerPage:n,page:a,backIconButtonProps:{"aria-label":"previous page"},nextIconButtonProps:{"aria-label":"next page"},onChangePage:this.handlePageChange,onChangeRowsPerPage:this.handleChangeRowsPerPage}))),!o&&this.renderFilters())}}]),a}(c.a.Component);var lr=Object(m.b)((function(e){return Object(F.a)({changeNodes:e.wallet.change.nodes,depositNodes:e.wallet.deposits.nodes,walletMode:e.wallet.common.walletMode,client:e.client},e.settings)}),{})(ir),cr=a(685),ur=a.n(cr),dr=a(684),pr=a.n(dr),mr=a(1114),Er=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(Q.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).displayBalanceAction=function(){var t=e.props,a=t.isWallet,n=t.finalizedOutputs,r=t.autoSpend;return a?!r&&!n&&e.hasBalanceError()&&e.isBalanceable():!n&&e.hasBalanceError()&&e.isBalanceable()},e.addChangeAddress=function(){var t=e.props,a=t.changeNode,n=t.number,r=t.setAddress,s=t.setChangeOutput;r(n,a.multisig.address),s(n)},e.renderChangeAdornment=function(){var t=e.props,a=t.changeNode,n=t.number,r=t.changeOutputIndex,s=t.address,o=t.isWallet,i=t.autoSpend;if(o&&i)return{};if(null!==a){var l,u=!1;if(0===r&&""===s)l="Set to wallet change address";else{if(n!==r)return{};l="Your change will go here.",u=!0}return{endAdornment:c.a.createElement(Mt.a,{position:"end"},c.a.createElement(Ia.a,{placement:"top",title:l},c.a.createElement("small",null,c.a.createElement(re.a,{onClick:e.addChangeAddress,disabled:u},c.a.createElement(pr.a,null)))))}}return{}},e.handleAddressChange=function(t){var a=e.props,n=a.number;(0,a.setAddress)(n,t.target.value)},e.hasAddressError=function(){return""!==e.props.addressError},e.handleAmountChange=function(t){var a=e.props,n=a.number;(0,a.setAmount)(n,t.target.value)},e.hasAmountError=function(){return""!==e.props.amountError},e.isNotBalanceable=function(){var t=e.props,a=t.number,n=t.outputs,r=t.feeError,s=t.amountError,o=t.amount,i=t.inputsTotalSats;if(""!==r)return!0;for(var l=0;l<n.length;l+=1)if(l!==a-1&&(""!==n[l].amountError||""===n[l].amount))return!0;var c=e.autoBalancedAmount();return""!==Object(ae.validateOutputAmount)(Object(ae.bitcoinsToSatoshis)(c),i)||""===s&&c===new W.a(o)},e.isBalanceable=function(){return!e.isNotBalanceable()},e.hasBalanceError=function(){return""!==e.props.balanceError},e.autoBalancedAmount=function(){var t=e.props,a=t.number,n=t.fee,r=t.inputsTotalSats,s=t.outputs.filter((function(e,t){return t!==a-1})).map((function(e){return e.amountSats})).reduce((function(e,t){return e.plus(t)}),new W.a(0)),o=Object(ae.bitcoinsToSatoshis)(new W.a(n));return Object(ae.satoshisToBitcoins)(r.minus(s.plus(o)))},e.balanceAction=function(){var t=e.props.balanceError;return!e.hasBalanceError()||e.isNotBalanceable()?null:t.split(" ")[0]},e.handleBalance=function(){var t=e.props,a=t.number;(0,t.setAmount)(a,e.autoBalancedAmount().toString())},e.hasError=function(){return e.hasAddressError()||e.hasAmountError()},e.handleDelete=function(){var t=e.props,a=t.number;(0,t.remove)(a)},e}return Object($.a)(a,[{key:"render",value:function(){var e=this.props,t=e.outputs,a=e.finalizedOutputs,n=e.address,r=e.amount,s=e.addressError,o=e.amountError,i=e.changeOutputIndex,l=e.autoSpend,u=e.isWallet?10:1;return c.a.createElement(I.a,{container:!0,spacing:u},c.a.createElement(I.a,{item:!0,xs:7},c.a.createElement(ke.a,{fullWidth:!0,placeholder:"Address",name:"destination",className:Ra.a.outputsFormInput,disabled:a,onChange:this.handleAddressChange,value:n,error:this.hasAddressError(),helperText:s,InputProps:this.renderChangeAdornment()})),c.a.createElement(I.a,{item:!0,xs:3},c.a.createElement(ke.a,{fullWidth:!0,placeholder:"Amount",className:Ra.a.outputsFormInput,name:"amount",disabled:a,onChange:this.handleAmountChange,value:r,error:this.hasAmountError(),helperText:o,InputProps:{endAdornment:c.a.createElement(Mt.a,{position:"end"},c.a.createElement(ne.a,null,"BTC"))}})),this.displayBalanceAction()&&c.a.createElement(I.a,{item:!0,xs:1},c.a.createElement(Ia.a,{title:"".concat(this.balanceAction()," to ").concat(this.autoBalancedAmount().toString()),placement:"top"},c.a.createElement("small",null,c.a.createElement(re.a,{onClick:this.handleBalance},"Increase"===this.balanceAction()?c.a.createElement(Je.a,null):c.a.createElement(Qe.a,null))))),!a&&t.length>(i>0&&l?2:1)&&c.a.createElement(I.a,{item:!0,xs:1},c.a.createElement(Ia.a,{title:"Remove Output",placement:"top"},c.a.createElement(re.a,{onClick:this.handleDelete},c.a.createElement(mr.a,null)))))}}]),a}(c.a.Component);Er.defaultProps={changeNode:{}};var hr={setAddress:$t,setAmount:ea,remove:function(e){return{type:"DELETE_OUTPUT",number:e}},setChangeOutput:Qt},fr=Object(m.b)((function(e,t){return Object(F.a)({},e.spend.transaction,{},e.spend.transaction.outputs[t.number-1],{changeNode:e.wallet.change.nextNode})}),hr)(Er),br=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Q.a)(this,a),(n=t.call(this,e)).titleRef=c.a.createRef(),n.outputsTotal=0,n.componentDidMount=function(){n.initialOutputState(),n.scrollToTitle()},n.componentDidUpdate=function(){n.scrollToTitle()},n.scrollToTitle=function(){var e=n.props,t=e.signatureImporters,a=e.isWallet;0!==Object.keys(t).reduce((function(e,a){return e+t[a].finalized}),0)||a||n.titleRef.current.scrollIntoView({behavior:"smooth"})},n.renderOutputs=function(){var e=n.props,t=e.outputs,a=e.changeOutputIndex,r=e.autoSpend;return Object(Kt.map)(t).map((function(e,t){return c.a.createElement(S.a,{key:t,display:r&&a===t+1?"none":"block"},c.a.createElement(I.a,{container:!0},c.a.createElement(fr,{number:t+1})))}))},n.inputsTotal=function(){var e=n.props.inputsTotalSats;return Object(ae.satoshisToBitcoins)(e)},n.outputsAndFeeTotal=function(){var e=n.props,t=e.outputs,a=e.fee,r=e.inputs,s=e.updatesComplete;if(!r.length)return"";var o=t.map((function(e){return new W.a(e.amount||0)})).reduce((function(e,t){return e.plus(t)}),new W.a(0)).plus(new W.a(a));return s?(n.outputsTotal=o,o):n.outputsTotal},n.hasFeeRateFetchError=function(){return""!==n.state.feeRateFetchError},n.hasFeeRateError=function(){return""!==n.props.feeRateError},n.hasFeeError=function(){return""!==n.props.feeError},n.hasBalanceError=function(){return""!==n.props.balanceError},n.hasError=function(){return n.hasFeeRateFetchError()||n.hasFeeRateError()||n.hasFeeError()||n.hasBalanceError()},n.handleAddOutput=function(){(0,n.props.addOutput)()},n.handleFeeRateChange=function(e){var t=n.props,a=t.setFeeRate;t.inputs.length&&a(e.target.value)},n.handleFeeChange=function(e){(0,n.props.setFee)(e.target.value)},n.handleFinalize=function(){(0,n.props.finalizeOutputs)(!0)},n.handleReset=function(){var e=n.props,t=e.resetOutputs,a=e.isWallet;t(),a||setTimeout((function(){return n.initialOutputState()}),0)},n.getFeeEstimate=Object(J.a)(Z.a.mark((function e(){var t,a,r,s,o,i;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.client,r=t.network,s=t.setFeeRate,o=1,i="",e.prev=3,e.next=6,Ot(r,a);case 6:o=e.sent,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(3),console.error(e.t0),i="There was an error fetching the fee rate.";case 13:return e.prev=13,s(o.toString()),n.setState({feeRateFetchError:i}),e.finish(13);case 17:case"end":return e.stop()}}),e,null,[[3,9,13,17]])}))),n.gatherSignaturesDisabled=function(){var e=n.props,t=e.finalizedOutputs,a=e.outputs;if(0===e.inputs.length)return!0;if(t||n.hasError())return!0;for(var r=0;r<a.length;r+=1){var s=a[r];if(""===s.address||""===s.amount||""!==s.addressError||""!==s.amountError)return!0}return!1},n.state={feeRateFetchError:""},n}return Object($.a)(a,null,[{key:"unitLabel",value:function(e,t){var a={endAdornment:c.a.createElement(Mt.a,{position:"end"},c.a.createElement(ne.a,null,e))};return t&&(a=Object(F.a)({},a,{},t)),a}}]),Object($.a)(a,[{key:"initialOutputState",value:function(){var e=Object(J.a)(Z.a.mark((function e(){var t,a,n,r,s,o,i,l,c,u,d,p,m,E,h;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.inputs,n=t.outputs,r=t.isWallet,s=t.change,o=t.setChangeOutputIndex,i=t.addOutput,l=t.setOutputAddress,c=t.changeOutputIndex,e.next=3,this.getFeeEstimate();case 3:u=this.props,d=u.inputsTotalSats,p=u.fee,m=u.setOutputAmount,E=Object(ae.bitcoinsToSatoshis)(new W.a(p)),h=Object(ae.satoshisToBitcoins)(d.minus(E)),a.length&&""===n[0].amount&&m(1,h.toFixed(8)),r&&0===c&&(i(),l(2,s.nextNode.multisig.address),o(2),m(2,W()(0).toFixed(8)));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.feeRate,n=e.fee,r=e.finalizedOutputs,s=e.feeRateError,o=e.feeError,i=e.balanceError,l=e.inputs,u=e.isWallet,d=e.autoSpend,p=this.state.feeRateFetchError,m=l&&l.length>0?n:"0.0000",E=u?10:1;return c.a.createElement(c.a.Fragment,null,c.a.createElement(S.a,{ref:this.titleRef},c.a.createElement(I.a,{container:!0,spacing:E},c.a.createElement(I.a,{item:!0,xs:4},c.a.createElement(T.a,{variant:"caption",className:Ra.a.outputsFormLabel},"To")),c.a.createElement(I.a,{item:!0,xs:3},"\xa0"),c.a.createElement(I.a,{item:!0,xs:3},c.a.createElement(T.a,{variant:"caption",className:Ra.a.outputsFormLabel},"Amount"))),c.a.createElement(I.a,null,this.renderOutputs()),c.a.createElement(I.a,{item:!0,container:!0,spacing:E},c.a.createElement(I.a,{item:!0,xs:12},c.a.createElement(C.a,{color:"primary",disabled:r,onClick:this.handleAddOutput},c.a.createElement(ur.a,null)," Add output"))),c.a.createElement(I.a,{item:!0,container:!0,spacing:E},c.a.createElement(I.a,{item:!0,xs:3},c.a.createElement(S.a,{mt:3},c.a.createElement(T.a,{variant:"caption",className:Ra.a.outputsFormLabel},"Fee Rate"),c.a.createElement(ke.a,{fullWidth:!0,value:t,name:"fee_rate",disabled:r,onChange:this.handleFeeRateChange,error:this.hasFeeRateError(),helperText:p||s,InputProps:{endAdornment:c.a.createElement(Mt.a,{position:"end"},c.a.createElement(Ia.a,{placement:"top",title:"Estimate best rate"},c.a.createElement("small",null,c.a.createElement(re.a,{onClick:this.getFeeEstimate,disabled:r},c.a.createElement(L.a,null)))),c.a.createElement(ne.a,null,"Sats/byte"))}}))),c.a.createElement(I.a,{item:!0,xs:4},c.a.createElement(S.a,{mt:3},"\xa0")),c.a.createElement(I.a,{item:!0,xs:3},c.a.createElement(S.a,{mt:3},c.a.createElement(T.a,{variant:"caption",className:Ra.a.outputsFormLabel},"Estimated Fees"),c.a.createElement(ke.a,{fullWidth:!0,name:"fee_total",disabled:r,value:m,onChange:this.handleFeeChange,error:this.hasFeeError(),helperText:o,InputProps:a.unitLabel("BTC",{readOnly:!0,disableUnderline:!0,style:{color:"gray"}})}))),c.a.createElement(I.a,{item:!0,xs:2})),c.a.createElement(I.a,{item:!0,container:!0,spacing:E},c.a.createElement(I.a,{item:!0,xs:4},c.a.createElement(S.a,{mt:7},c.a.createElement(T.a,{variant:"h6"},!u||u&&!d?"Totals":"Outputs & Fee Total"))),c.a.createElement(I.a,{item:!0,xs:3},c.a.createElement(S.a,{display:!u||u&&!d?"block":"none",mt:7},c.a.createElement(ke.a,{fullWidth:!0,label:"Inputs Total",readOnly:!0,value:this.inputsTotal().toString(),disabled:r,InputProps:a.unitLabel("BTC",{readOnly:!0})}))),c.a.createElement(I.a,{item:!0,xs:3},c.a.createElement(S.a,{mt:7},c.a.createElement(ke.a,{fullWidth:!0,label:!u||u&&!d?"Outputs & Fee Total":"",value:this.outputsAndFeeTotal().toString()||"0.0000",error:this.hasBalanceError(),disabled:r,helperText:i,InputProps:a.unitLabel("BTC",{readOnly:!0,disableUnderline:!0})}))),c.a.createElement(I.a,{item:!0,xs:2}))),!u&&c.a.createElement(S.a,{mt:7},c.a.createElement(I.a,{container:!0,spacing:3,justify:"center"},c.a.createElement(I.a,{item:!0},c.a.createElement(C.a,{variant:"contained",color:"primary",disabled:this.gatherSignaturesDisabled(),onClick:this.handleFinalize},"Gather Signatures")),c.a.createElement(I.a,{item:!0},c.a.createElement(C.a,{variant:"contained",color:"secondary",disabled:r,onClick:this.handleReset},"Reset Outputs")))))}}]),a}(c.a.Component);br.defaultProps={updatesComplete:!1};var vr={addOutput:Jt,setOutputAmount:ea,setFeeRate:ta,setFee:function(e){return{type:"SET_FEE",value:e}},finalizeOutputs:aa,resetOutputs:function(){return{type:"RESET_OUTPUTS"}},setChangeOutputIndex:Qt,setOutputAddress:$t},gr=Object(m.b)((function(e){return Object(F.a)({},{network:e.settings.network,client:e.client},{},e.spend.transaction,{},e.client,{signatureImporters:e.spend.signatureImporters,change:e.wallet.change})}),vr)(br),Pr=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Q.a)(this,a),(n=t.call(this,e)).buildSignedTransaction=function(){var e=n.props,t=e.network,a=e.inputs,r=e.outputs,s=e.signatureImporters;return Object(ae.signedMultisigTransaction)(t,a,r,Object.values(s).map((function(e){return e.signature})))},n.handleBroadcast=Object(J.a)(Z.a.mark((function e(){var t,a,r,s,o,i,l;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.client,r=t.network,s=t.setTxid,o=n.buildSignedTransaction(),i="",l="",n.setState({broadcasting:!0}),e.prev=5,e.next=8,wt(o.toHex(),r,a);case 8:l=e.sent,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),console.error(e.t0),i="There was an error broadcasting the transaction.: ".concat(e.t0);case 15:return e.prev=15,n.setState({txid:l,error:i,broadcasting:!1}),s(l),e.finish(15);case 19:case"end":return e.stop()}}),e,null,[[5,11,15,19]])}))),n.transactionURL=function(){var e=n.props.network,t=n.state.txid;return Object(ae.blockExplorerTransactionURL)(t,e)},n.state={error:"",broadcasting:!1,txid:""},n}return Object($.a)(a,[{key:"render",value:function(){var e=this.state,t=e.error,a=e.broadcasting,n=e.txid,r=this.buildSignedTransaction(),s=r.toHex();return c.a.createElement(O.a,null,c.a.createElement(w.a,{title:"Broadcast"}),c.a.createElement(x.a,null,c.a.createElement("form",null,r&&c.a.createElement(S.a,{mt:4},c.a.createElement(T.a,{variant:"h6"},"Signed Transaction"),c.a.createElement(fa,{text:s,code:!0,showIcon:!0})),""===n?c.a.createElement(S.a,{mt:2},c.a.createElement(C.a,{variant:"contained",color:"primary",disabled:!r||a,onClick:this.handleBroadcast},"Broadcast Transaction"),c.a.createElement(ne.a,{error:!0},t),c.a.createElement("small",null,c.a.createElement(ne.a,null,"Warning: Broadcasting this transaction cannot be undone."))):c.a.createElement(S.a,{mt:2},c.a.createElement(T.a,{variant:"h5"},c.a.createElement(fa,{text:n,code:!0,showIcon:!0}),"\xa0",H(this.transactionURL(),c.a.createElement(xa.a,null))),c.a.createElement("p",null,"Transaction successfully broadcast.")))))}}]),a}(c.a.Component);var yr={setTxid:function(e){return{type:"SET_TXID",value:e}}},Sr=Object(m.b)((function(e){return Object(F.a)({network:e.settings.network,client:e.client},e.client,{signatureImporters:e.spend.signatureImporters,inputs:e.spend.transaction.inputs,outputs:e.spend.transaction.outputs})}),yr)(Pr),Tr=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Q.a)(this,a),(n=t.call(this,e)).render=function(){var e=n.state.showUnsignedTransaction,t=n.props.unsignedTransaction;if(e){var a=t.toHex();return c.a.createElement("div",null,c.a.createElement("small",null,c.a.createElement(C.a,{size:"small",onClick:n.handleHideUnsignedTransaction},"Hide Unsigned Transaction")),c.a.createElement("p",null,c.a.createElement(fa,{text:a,showIcon:!0})))}return c.a.createElement("small",null,c.a.createElement(C.a,{size:"small",onClick:n.handleShowUnsignedTransaction},"Show Unsigned Transaction"))},n.handleShowUnsignedTransaction=function(){n.setState({showUnsignedTransaction:!0})},n.handleHideUnsignedTransaction=function(){n.setState({showUnsignedTransaction:!1})},n.state={showUnsignedTransaction:!1},n}return a}(c.a.Component);var Ir=Object(m.b)((function(e){return{unsignedTransaction:e.spend.transaction.unsignedTransaction}}),{})(Tr),Or=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Q.a)(this,a),(n=t.call(this,e)).render=function(){var e=n.state.spent;return c.a.createElement(S.a,null,c.a.createElement(C.a,{href:"#",onClick:n.handleCancel},"Edit Transaction"),c.a.createElement(S.a,{mt:2},c.a.createElement(Ir,null)),n.renderKeySelectors(),c.a.createElement(S.a,{mt:2},c.a.createElement(C.a,{href:"#",onClick:function(e){e.preventDefault(),n.handleReturn()}},"Abandon Transaction")),n.signaturesFinalized()&&c.a.createElement(S.a,{mt:2},c.a.createElement(Sr,null)),(n.transactionFinalized()||e)&&c.a.createElement(C.a,{variant:"contained",color:"primary",onClick:n.handleReturn},"Return"))},n.renderKeySelectors=function(){for(var e=n.props.requiredSigners,t=[],a=1;a<=e;a+=1)t.push(c.a.createElement(S.a,{key:a,mt:2},c.a.createElement(Tn,{number:a})));return t},n.signaturesFinalized=function(){var e=n.props.signatureImporters;return Object.values(e).length>0&&Object.values(e).every((function(e){return e.finalized}))},n.transactionFinalized=function(){var e=n.props,t=e.transaction,a=e.spendNodes,r=e.changeNode,s=e.updateChangeNode,o=t.txid,i=n.state.spent;if(""!==o&&!i){n.setState({spent:!0});for(var l=r.multisig.address,c=0;c<t.outputs.length;c+=1)if(l===t.outputs[c].address){s({bip32Path:r.bip32Path,balanceSats:t.outputs[c].amountSats});break}return a(),!0}return!1},n.handleReturn=function(){var e=n.props,t=e.resetTransaction,a=e.resetWalletView;t(),a()},n.handleCancel=function(e){var t=n.props,a=t.finalizeOutputs,r=t.requiredSigners,s=t.setRequiredSigners,o=t.setSpendStep;e.preventDefault(),s(r),a(!1),o(0)},n.state={spent:!1},n}return a}(c.a.Component);var wr={finalizeOutputs:aa,setRequiredSigners:Vt,spendNodes:function(){return{type:"SPEND_NODES"}},resetTransaction:function(){return{type:"RESET_TRANSACTION"}},resetWalletView:Ee,updateChangeNode:pe,setSpendStep:ra},xr=Object(m.b)((function(e){return Object(F.a)({},e.wallet,{},e.spend,{},e.quorum,{requiredSigners:e.spend.transaction.requiredSigners,totalSigners:e.spend.transaction.totalSigners,changeNode:e.wallet.change.nextNode})}),wr)(Or),Cr=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(Q.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).render=function(){var t=e.props,a=t.feeRate,n=t.fee,r=t.inputsTotalSats,s=t.editTransaction,o=t.signTransaction;return c.a.createElement(S.a,null,c.a.createElement(C.a,{href:"#",onClick:function(e){e.preventDefault(),s()}},"Edit Transaction"),c.a.createElement("h1",null,"Transaction Preview"),c.a.createElement(Ir,null),c.a.createElement("h2",null,"Inputs"),e.renderInputs(),c.a.createElement("h2",null,"Outputs"),e.renderOutputs(),c.a.createElement(I.a,{container:!0},c.a.createElement(I.a,{item:!0,xs:4},c.a.createElement("h2",null,"Fee"),c.a.createElement("div",null,n)),c.a.createElement(I.a,{item:!0,xs:4},c.a.createElement("h2",null,"Fee Rate"),c.a.createElement("div",null,a)),c.a.createElement(I.a,{item:!0,xs:4},c.a.createElement("h2",null,"Total"),c.a.createElement("div",null,Object(ae.satoshisToBitcoins)(W()(r||0)).toString()))),c.a.createElement(I.a,{container:!0,justify:"center"},c.a.createElement(S.a,{mt:5},c.a.createElement(C.a,{variant:"contained",color:"primary",onClick:o},"Sign Transaction"))))},e.renderAddresses=function(){var t=e.mapAddresses();return Object.keys(t).map((function(e){return c.a.createElement(Ft.a,{key:e},c.a.createElement(zt.a,null,c.a.createElement("code",null,e)),c.a.createElement(zt.a,null,t[e].utxos.length),c.a.createElement(zt.a,null,c.a.createElement("code",null,t[e].amount.toFixed(8))))}))},e.renderOutputAddresses=function(){return e.props.outputs.map((function(e){return c.a.createElement(Ft.a,{key:e.address},c.a.createElement(zt.a,null,c.a.createElement("code",null,e.address)),c.a.createElement(zt.a,null,c.a.createElement("code",null,W()(e.amount).toFixed(8))))}))},e.renderOutputs=function(){return c.a.createElement(Ut.a,null,c.a.createElement(Lt.a,null,c.a.createElement(Ft.a,null,c.a.createElement(zt.a,null,"Address"),c.a.createElement(zt.a,null,"Amount (BTC)"))),c.a.createElement(Wt.a,null,e.renderOutputAddresses()),c.a.createElement(wa.a,null,c.a.createElement(Ft.a,null,c.a.createElement(zt.a,null,"TOTAL:"),c.a.createElement(zt.a,null,e.outputsTotal()))))},e.renderInputs=function(){var t=e.props.inputsTotalSats;return c.a.createElement(Ut.a,null,c.a.createElement(Lt.a,null,c.a.createElement(Ft.a,null,c.a.createElement(zt.a,null,"Address"),c.a.createElement(zt.a,null,"UTXO count"),c.a.createElement(zt.a,null,"Amount (BTC)"))),c.a.createElement(Wt.a,null,e.renderAddresses()),c.a.createElement(wa.a,null,c.a.createElement(Ft.a,null,c.a.createElement(zt.a,{colSpan:2},"TOTAL:"),c.a.createElement(zt.a,null,Object(ae.satoshisToBitcoins)(t).toString()))))},e.mapAddresses=function(){return e.props.inputs.reduce((function(e,t){var a=e,n=t.confirmed,r=t.txid,s=t.index,o=t.amount;return a[t.multisig.address]=e[t.multisig.address]||{amount:W()(0),utxos:[]},a[t.multisig.address].utxos.push({confirmed:n,txid:r,index:s,amount:o}),a[t.multisig.address].amount=e[t.multisig.address].amount.plus(W()(t.amount)),a}),{})},e.outputsTotal=function(){var t=e.props.outputs;return Object(ae.satoshisToBitcoins)(t.reduce((function(e,t){return e.plus(W()(t.amountSats||0))}),W()(0))).toString()},e}return a}(c.a.Component);var Rr=Object(m.b)((function(e){return Object(F.a)({},e.spend.transaction)}),{})(Cr),jr=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(Q.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).outputsAmount=new W.a(0),e.feeAmount=new W.a(0),e.componentDidMount=function(){var t=e.props,a=t.changeNode,n=t.setChangeAddress,r=t.finalizeOutputs,s=t.finalizedOutputs;t.autoSpend&&n(a.multisig.address),s&&r(!1)},e.previewDisabled=function(){var t=e.props,a=t.finalizedOutputs,n=t.outputs,r=t.inputs,s=t.feeRateError,o=t.feeError,i=t.balanceError;if(0===r.length)return!0;if(a||s||o||i)return!0;for(var l=0;l<n.length;l+=1){var c=n[l];if(""===c.address||""===c.amount||""!==c.addressError||""!==c.amountError)return!0}return!1},e.signTransaction=function(){(0,e.props.setSpendStep)(2)},e.showPreview=function(){var t=e.props,a=t.finalizeOutputs;(0,t.setSpendStep)(1),a(!0)},e.showCreate=function(){var t=e.props,a=t.finalizeOutputs;(0,t.setSpendStep)(0),a(!1)},e.renderSpend=function(){var t=e.props.autoSpend;return c.a.createElement(S.a,null,c.a.createElement(Fe.a,{control:c.a.createElement(Ka.a,{checked:!t,onChange:e.handleSpendMode}),label:"Manual"}))},e.handleSpendMode=function(t){var a=e.props.updateAutoSpend;t.target.checked,a(!t.target.checked)},e.selectCoins=function(){var t=e.props,a=t.outputs,n=t.setInputs,r=t.fee,s=t.depositNodes,o=t.changeNodes,i=t.feeRate,l=t.changeOutputIndex,c=t.autoSpend,u=t.updateChangeSlice,d=t.updateDepositSlice,p=t.resetNodesSpend,m=t.setFeeRate,E=t.coinSelection,h=a.reduce((function(e,t,a){return l===a+1?e:e.plus(t.amountSats)}),new W.a(0));if(!h.isNaN()){var f=Object(ae.bitcoinsToSatoshis)(new W.a(r));if(!h.isEqualTo(e.outputsAmount)||!f.isEqualTo(e.feeAmount)){var b=h.plus(f),v=Object.values(s).concat(Object.values(o)).filter((function(e){return e.balanceSats.isGreaterThan(0)}));p();var g=E(v,b);g.forEach((function(e){(e.change?u:d)({bip32Path:e.bip32Path,spend:!0})})),e.outputsAmount=h,e.feeAmount=f,n(g),(l>0||!c)&&m(i)}}},e}return Object($.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.autoSpend&&setTimeout(this.selectCoins,0)}},{key:"render",value:function(){var e=this.props,t=e.autoSpend,a=e.updateNode,n=e.addNode,r=e.spendingStep;return c.a.createElement(S.a,{style:{marginLeft:"10%"}},c.a.createElement(I.a,{container:!0},2===r&&c.a.createElement(I.a,{item:!0,md:12},c.a.createElement(S.a,null,c.a.createElement(xr,null))),0===r&&c.a.createElement(I.a,{item:!0,md:12},c.a.createElement(S.a,{mt:2},c.a.createElement(S.a,{mb:7},c.a.createElement("div",{style:{width:"100%"}},c.a.createElement(S.a,{display:"flex",p:1},c.a.createElement(S.a,{p:1,flexGrow:1},c.a.createElement(T.a,{align:"center",variant:"h4"},"Create Transaction")),c.a.createElement(S.a,{p:1},this.renderSpend()))),c.a.createElement(S.a,{component:"div",display:t?"none":"block"},c.a.createElement(lr,{addNode:n,updateNode:a})),c.a.createElement(gr,null),c.a.createElement("div",{style:{width:"100%"}},c.a.createElement(S.a,{display:"flex",p:1},c.a.createElement(S.a,{p:1,flexGrow:1,mt:8},c.a.createElement(T.a,{align:"center",variant:"h4"},c.a.createElement(C.a,{onClick:this.showPreview,variant:"contained",color:"primary",disabled:this.previewDisabled()},"Preview Transaction")))))))),1===r&&c.a.createElement(I.a,{item:!0,md:12},c.a.createElement(S.a,{mt:3},c.a.createElement(Rr,{editTransaction:this.showCreate,signTransaction:this.signTransaction})))))}}]),a}(c.a.Component);jr.defaultProps={autoSpend:!1,balanceError:null,changeNodes:{},depositNodes:{},finalizedOutputs:!1,feeError:null,feeRateError:null,spendingStep:0};var kr={updateAutoSpend:na,setInputs:Zt,updateChangeSlice:pe,updateDepositSlice:de,setAddress:$t,resetNodesSpend:function(){return{type:"RESET_NODES_SPEND"}},setFeeRate:ta,addOutput:Jt,finalizeOutputs:aa,setChangeAddress:function(e){return{type:"SET_CHANGE_ADDRESS",value:e}},setSpendStep:ra},Nr=Object(m.b)((function(e){return Object(F.a)({},e.spend.transaction,{changeNodes:e.wallet.change.nodes,changeNode:e.wallet.change.nextNode,depositNodes:e.wallet.deposits.nodes,autoSpend:e.spend.transaction.autoSpend})}),kr)(jr),_r=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Q.a)(this,a),(n=t.call(this,e)).filterAddresses=function(e,t){var a=n.props,r=a.slicesWithBalance,s=a.zeroBalanceSlices,o=a.spentSlices;n.setState(Object(Ln.a)({},e.target.value,t),(function(){var e=n.state,t=e.filterIncludeSpent,a=e.filterIncludeZeroBalance,i=Object(he.a)(r);t&&i.push.apply(i,Object(he.a)(o)),a&&i.push.apply(i,Object(he.a)(s)),n.setState({displaySlices:i})}))},n.state={filterIncludeSpent:!1,filterIncludeZeroBalance:!1,displaySlices:e.slicesWithBalance.length?Object(he.a)(e.slicesWithBalance):[]},n}return Object($.a)(a,[{key:"render",value:function(){var e=this.state,t=e.filterIncludeSpent,a=e.filterIncludeZeroBalance,n=e.displaySlices,r=this.props,s=r.client,o=r.network;return c.a.createElement(I.a,{container:!0,direction:"column"},c.a.createElement(I.a,{item:!0},c.a.createElement(Kn,{slices:n,client:s,network:o,paging:!0})),c.a.createElement(I.a,{item:!0},c.a.createElement(Fn.a,{row:!0},c.a.createElement(zn.a,{component:"h2"},c.a.createElement(S.a,{mr:3},"Show Additional")),c.a.createElement(Fe.a,{control:c.a.createElement(Wn.a,{checked:t,value:"filterIncludeSpent",onChange:this.filterAddresses}),label:"Spent Addresses"}),c.a.createElement(Fe.a,{control:c.a.createElement(Wn.a,{checked:a,value:"filterIncludeZeroBalance",onChange:this.filterAddresses}),label:"Zero Balance"}))))}}]),a}(c.a.PureComponent);var Ar=Object(m.b)((function(e){return{slicesWithBalance:Se(e),zeroBalanceSlices:Te(e),spentSlices:ye(e),walletMode:e.wallet.common.walletMode,client:e.client,network:e.settings.network}}))(_r),Kr=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(Q.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).scrollRef=c.a.createRef(),e.componentDidMount=function(){e.scrollRef.current.scrollIntoView({behavior:"smooth"})},e.render=function(){var t=e.props.walletMode;return c.a.createElement("div",null,c.a.createElement(qt.a,{ref:e.scrollRef,value:t,onChange:e.handleModeChange,indicatorColor:"primary",textColor:"primary",variant:"fullWidth"},c.a.createElement(Xt.a,{label:"Addresses",value:le}),c.a.createElement(Xt.a,{label:"Receive",value:ce}),c.a.createElement(Xt.a,{label:"Send",value:ue})),c.a.createElement(S.a,{mt:2},e.renderModeComponent()))},e.renderModeComponent=function(){var t=e.props,a=t.walletMode,n=t.addNode,r=t.updateNode;if(e.addressesAreLoaded())return a===ce?c.a.createElement(Un,null):a===ue?c.a.createElement(Nr,{addNode:n,updateNode:r,coinSelection:q}):a===le?c.a.createElement(Ar,null):"";var s=e.progress();return c.a.createElement(Yt.a,{variant:"determinate",value:s})},e.progress=function(){var t=e.props,a=t.change;return 100*(t.deposits.trailingEmptyNodes+a.trailingEmptyNodes)/40},e.addressesAreLoaded=function(){var t=e.props,a=t.change,n=t.deposits,r=t.nodesLoaded,s=t.initialLoadComplete;return!!r||(n.trailingEmptyNodes>=20||n.fetchUTXOsErrors>=5)&&(a.trailingEmptyNodes>=20||a.fetchUTXOsErrors>=5)&&(s(),!0)},e.handleModeChange=function(t,a){var n=e.props,r=n.setMode,s=n.requiredSigners,o=n.setRequiredSigners,i=n.signatureImporters;a===ue&&Object.keys(i).length!==s&&o(s),r(a)},e}return a}(c.a.Component);var Mr={setMode:function(e){return{type:"UPDATE_WALLET_MODE",value:e}},setRequiredSigners:Vt,initialLoadComplete:function(){return{type:"INITIAL_LOAD_COMPLETE"}}},Br=Object(m.b)((function(e){return Object(F.a)({},e.wallet,{},e.wallet.common,{requiredSigners:e.spend.transaction.requiredSigners,signatureImporters:e.spend.signatureImporters})}),Mr)(Kr),Dr=function(e){var t=e.onClearFn,a=e.onDownloadFn;return c.a.createElement(I.a,{container:!0,spacing:2},c.a.createElement(I.a,{item:!0},c.a.createElement(C.a,{variant:"contained",color:"primary",onClick:a},"Download Wallet Details")),c.a.createElement(I.a,{item:!0},c.a.createElement(C.a,{onClick:function(e){return function(e){e.preventDefault(),sessionStorage&&sessionStorage.removeItem("caravan_config"),t(e)}(e)},variant:"contained",color:"secondary"},"Clear Wallet")))},Ur="SET_ERROR_NOTIFICATION",Lr="CLEAR_ERROR_NOTIFICATION";function Fr(e){return{type:Ur,value:e}}function zr(){return{type:Lr}}var Wr=function(){var e=Object(J.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=Object(J.a)(Z.a.mark((function e(a,n){var r,s,o,i;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n().settings.network,s=n(),o=s.client,e.prev=2,i=t.map((function(e){var t=e.multisig.address;return Promise.all([St(t,r,o),It(t,r,o)])})),e.next=6,Promise.all(i);case 6:e.sent.forEach((function(e,n){var r=Object(ca.a)(e,2),s=r[0],o=r[1],i=t[n];if(s&&s.utxos.length){var l=i.change?pe:de,c=Object(F.a)({bip32Path:i.bip32Path,addressKnown:!0},s,{addressStatus:o});a(l(c))}})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error("There was a problem getting updated braid data:",e.t0.message),a(Fr(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,a){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Hr=jt({setExtendedPublicKeyImporterName:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_NAME",resetExtendedPublicKeyImporterBIP32Path:"RESET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH",setExtendedPublicKeyImporterBIP32Path:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH",setExtendedPublicKeyImporterMethod:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_METHOD",setExtendedPublicKeyImporterExtendedPublicKey:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY",setExtendedPublicKeyImporterFinalized:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_FINALIZED"}),Gr=Hr.setExtendedPublicKeyImporterName,qr=Hr.setExtendedPublicKeyImporterBIP32Path,Xr=Hr.resetExtendedPublicKeyImporterBIP32Path,Yr=Hr.setExtendedPublicKeyImporterMethod,Vr=Hr.setExtendedPublicKeyImporterExtendedPublicKey,Zr=Hr.setExtendedPublicKeyImporterFinalized;var Jr=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Q.a)(this,a),(n=t.call(this,e)).title=function(){var e=n.props,t=e.totalSigners,a=e.requiredSigners,r=e.addressType;return c.a.createElement("span",{className:"justify-content-between d-flex"},"Your ",a,"-of-",t," ",r," Multisig Wallet",c.a.createElement("small",{className:"text-muted"}," Extended Public Keys: ".concat(n.extendedPublicKeyCount(),"/").concat(t)))},n.testConnection=function(){var e=Object(J.a)(Z.a.mark((function e(t,a){var r,s,o;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.network,s=t.client,o=t.setPasswordError,e.prev=1,e.next=4,Ot(r,s);case 4:o(""),n.setState({connectSuccess:!0},(function(){a&&setTimeout(a,750)})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),n.setState({connectSuccess:!1}),e.t0.response&&401===e.t0.response.status?o("Unauthorized: Incorrect username and password combination"):o(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}(),n.extendedPublicKeyCount=function(){var e=n.props.extendedPublicKeyImporters;return Object.values(e).filter((function(e){return e.finalized})).length},n.toggleImporters=function(e){e.preventDefault();var t=n.props,a=t.setImportersVisible,r=t.configuring,s=t.resetWallet;r||n.setState({generating:!1},(function(){s()})),a(!r)},n.generate=function(){var e=n.props,t=e.setImportersVisible;(0,e.freeze)(!0),t(!1),n.setState({generating:!0,connectSuccess:!1},(function(){n.addNode(!1,"m/0/0",!0),n.addNode(!0,"m/1/0",!0)}))},n.updateNode=function(e,t){var a=n.props,r=a.updateChangeSlice,s=a.updateDepositSlice;(e?r:s)(t)},n.addNode=function(){var e=Object(J.a)(Z.a.mark((function e(t,a,r){var s;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.generateMultisig(t,a,r);case 2:s=e.sent,n.updateNode(t,Object(F.a)({bip32Path:a},s));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),n.generateMultisig=function(){var e=Object(J.a)(Z.a.mark((function e(t,a,r){var s,o,i,l,c,u,d,p,m,E,h,f;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s=n.props,o=s.extendedPublicKeyImporters,i=s.totalSigners,l=s.network,c=s.addressType,u=s.requiredSigners,d=[],p=1;p<=i;p+=1)m=o[p],E=Object(ae.deriveChildPublicKey)(m.extendedPublicKey,a,l),d.push(E);return d.sort(),h=ae.generateMultisigFromPublicKeys.apply(void 0,[l,c,u].concat(d)),e.next=7,n.fetchUTXOs(t,h,r);case 7:return f=e.sent,e.abrupt("return",Object(F.a)({multisig:h},f));case 9:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),n.fetchUTXOs=function(){var e=Object(J.a)(Z.a.mark((function e(t,a,r){var s,o,i,l,c;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.props,o=s.network,i=s.client,e.next=3,St(a.address,o,i);case 3:if(!(c=e.sent)||c.fetchUTXOsError.length){e.next=8;break}return e.next=7,It(a.address,o,i);case 7:l=e.sent;case 8:return l&&(c=Object(F.a)({},c,{addressUsed:l.used})),r&&setTimeout((function(){return n.generateNextNodeIfNecessary(t)})),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),n.generateNextNodeIfNecessary=function(e){var t=n.props,a=t.change,r=t.deposits,s=(e?a:r).trailingEmptyNodes,o=(e?a:r).fetchUTXOsErrors,i=Object.keys((e?a:r).nodes);if(!(s>=20||o>=5)){i.sort((function(e,t){var a=(e||"").split("/"),n=(t||"").split("/");return parseInt(a[2],10)-parseInt(n[2],10)}));var l=(i[i.length-1]||"").split("/"),c=parseInt(l[2],10),u="m/".concat(l[1],"/").concat(c+1);setTimeout((function(){return n.addNode(e,u,!0)}))}},n.refreshNodes=Object(J.a)(Z.a.mark((function e(){var t,a,r,s,o,i;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.change,r=t.deposits,s=t.resetNodesFetchErrors,o=Object.values(r.nodes).concat(Object.values(a.nodes)),i=Math.max(a.fetchUTXOsErrors,r.fetchUTXOsErrors),s(),e.next=6,Promise.all(o.map(function(){var e=Object(J.a)(Z.a.mark((function e(t){var a;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.fetchUTXOs(t.change,t.multisig);case 2:a=e.sent,n.updateNode(t.change,Object(F.a)({bip32Path:t.bip32Path},a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:i>=5&&Math.max(a.fetchUTXOsErrors,r.fetchUTXOsErrors)<5&&console.log("we had errors but now looks good, try to build more");case 7:case"end":return e.stop()}}),e)}))),n.state={generating:!1},n}return Object($.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.setIsWallet,n=t.refreshNodes,r=t.common.nodesLoaded;this.debouncedTestConnection=Object(Kt.debounce)((function(t){return e.testConnection(t)}),500,{trailing:!0,leading:!1}),a(),n(this.refreshNodes),r&&this.setState({generating:!0})}},{key:"componentDidUpdate",value:function(){var e=Object(J.a)(Z.a.mark((function e(t){var a,n,r,s,o;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.client.password,n=this.props,r=n.setPasswordError,s=n.network,o=n.client,a!==o.password&&o.password.length&&this.debouncedTestConnection({network:s,client:o,setPasswordError:r});case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"afterImportAddresses",value:function(){var e=Object(J.a)(Z.a.mark((function e(t,a){var n,r,s,o;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=2;break}return e.abrupt("return");case 2:return n=this.props,r=n.unknownSlices,s=n.fetchSliceData,o=r.reduce((function(e,a){return t.indexOf(a.multisig.address)>-1&&e.push(a),a}),[]),e.next=6,s(o);case 6:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"handlePasswordEnter",value:function(){var e=Object(J.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.debouncedTestConnection.cancel(),e.next=4,this.testConnection(this.props,this.generate);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handlePasswordChange",value:function(){var e=Object(J.a)(Z.a.mark((function e(t){var a,n,r,s;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a=this.props,n=a.setPassword,r=a.setPasswordError,s=t.target.value,this.setState({connectSuccess:!1},(function(){n(s),r("")}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"body",value:function(){var e=this,t=this.props,a=t.totalSigners,n=t.configuring,r=t.downloadWalletDetails,s=t.client,o=t.unknownAddresses,i=this.state,l=i.generating,u=i.connectSuccess;return this.extendedPublicKeyCount()===a?l&&!n?c.a.createElement("div",null,c.a.createElement(Br,{addNode:this.addNode,updateNode:this.updateNode}),c.a.createElement(S.a,{mt:2,textAlign:"center"},c.a.createElement(I.a,{container:!0},c.a.createElement(I.a,{item:!0},c.a.createElement(Dr,{onClearFn:function(t){return e.toggleImporters(t)},onDownloadFn:r})),"private"===s.type&&c.a.createElement(I.a,{item:!0},c.a.createElement(La,{addresses:o,client:s,importCallback:function(t){return e.afterImportAddresses(t)}}))))):c.a.createElement(O.a,null,c.a.createElement(w.a,{title:this.title()}),c.a.createElement(x.a,null,c.a.createElement(C.a,{href:"#",onClick:this.toggleImporters},n?"Hide Key Selection":"Edit Details"),c.a.createElement(Gt,null),c.a.createElement("p",null,"You have imported all\xa0",a," extended public keys. You will need to save this information."),c.a.createElement(Dr,{onClearFn:function(t){return e.toggleImporters(t)},onDownloadFn:r}),"private"===s.type&&c.a.createElement(S.a,{my:5},c.a.createElement(I.a,{container:!0,spacing:2,alignItems:"center"},c.a.createElement(I.a,{item:!0,xs:12},c.a.createElement(T.a,{variant:"subtitle1"},"This config uses a private client. Please enter password if not set.")),c.a.createElement(I.a,{item:!0},c.a.createElement(ke.a,{id:"client-username",label:"Username",defaultValue:s.username,InputProps:{readOnly:!0,disabled:!0,startAdornment:c.a.createElement(Mt.a,{position:"start"},c.a.createElement(Dt.a,null))}})),c.a.createElement(I.a,{item:!0,md:4,xs:10},c.a.createElement("form",{onSubmit:function(t){return e.handlePasswordEnter(t)}},c.a.createElement(ke.a,{id:"bitcoind-password",fullWidth:!0,type:"password",label:"Password",placeholder:"Enter bitcoind password",value:s.password,onChange:function(t){return e.handlePasswordChange(t)},error:s.passwordError.length>0,helperText:s.passwordError}),u&&c.a.createElement(ne.a,null,"Connection confirmed with password!"))))),c.a.createElement("p",null,"Please confirm that the above information is correct and you wish to generate your wallet."),c.a.createElement(C.a,{id:"confirm-wallet",type:"button",variant:"contained",color:"primary",onClick:this.generate,disabled:"private"===s.type&&!u},"Confirm"))):c.a.createElement("p",null,"Once you have imported all ".concat(a," extended public keys, "),"your wallet will be generated here.")}},{key:"render",value:function(){return c.a.createElement("div",null,this.body())}}]),a}(c.a.Component);Jr.defaultProps={unknownAddresses:[]};var Qr=Object(F.a)({freeze:Xe,updateDepositSlice:de,updateChangeSlice:pe,fetchSliceData:Wr,setImportersVisible:function(e){return{type:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_VISIBLE",value:e}},setIsWallet:function(){return{type:"SET_IS_WALLET"}},resetWallet:function(){return{type:"RESET_WALLET"}},resetNodesFetchErrors:function(){return{type:"RESET_NODES_FETCH_ERRORS"}}},Ct({setPassword:"SET_CLIENT_PASSWORD",setPasswordError:"SET_CLIENT_PASSWORD_ERROR"})),$r=Object(m.b)((function(e){return Object(F.a)({},e.settings,{},{client:e.client},{},e.quorum,{},e.wallet,{},e.wallet.common,{unknownAddresses:Oe(e),unknownSlices:Ie(e)})}),Qr)(Jr),es=a(6),ts=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Q.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.setBIP32PathToDefault()},n.render=function(){var e=n.props.extendedPublicKeyImporter,t=n.state,a=t.error,r=t.extendedPublicKey,s=t.extendedPublicKeyError,o=t.bip32PathError;return c.a.createElement("div",null,c.a.createElement(S.a,{mt:2},c.a.createElement(ke.a,{fullWidth:!0,name:"extendedPublicKey",label:"Extended Public Key",value:r,onChange:n.handleExtendedPublicKeyChange,error:n.hasExtendedPublicKeyError(),helperText:s})),c.a.createElement(S.a,{mt:2},c.a.createElement(I.a,{container:!0},c.a.createElement(I.a,{item:!0,md:10},c.a.createElement(ke.a,{fullWidth:!0,name:"bip32Path",label:"BIP32 Path (relative to xpub)",type:"text",value:e.bip32Path,onChange:n.handleBIP32PathChange,error:n.hasBIP32PathError(),helperText:o}),c.a.createElement(ne.a,null,"Use the default value if you don\u2019t understand BIP32 paths.")),c.a.createElement(I.a,{item:!0,md:2},!n.bip32PathIsDefault()&&c.a.createElement(C.a,{type:"button",variant:"contained",size:"small",onClick:n.resetBIP32Path},"Default"))),c.a.createElement(S.a,{mt:2},c.a.createElement(C.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:n.import,disabled:""===r||n.hasError()},"Import Extended Public Key"))),c.a.createElement(ne.a,{className:"text-danger"},a))},n.import=function(){var e=n.props,t=e.network,a=e.extendedPublicKeyImporter,r=e.validateAndSetExtendedPublicKey,s=n.state.extendedPublicKey;r(Object(ae.deriveChildExtendedPublicKey)(s,a.bip32Path,t),(function(e){n.setState({error:e})}))},n.setBIP32PathToDefault=function(){(0,n.props.validateAndSetBIP32Path)("m/0",(function(){}),(function(){}))},n.hasBIP32PathError=function(){return""!==n.state.bip32PathError},n.hasExtendedPublicKeyError=function(){return""!==n.state.extendedPublicKeyError},n.hasError=function(){return n.hasBIP32PathError()||n.hasExtendedPublicKeyError()},n.setBIP32PathError=function(e){n.setState({bip32PathError:e})},n.handleBIP32PathChange=function(e){(0,n.props.validateAndSetBIP32Path)(e.target.value,(function(){}),n.setBIP32PathError,{mode:"unhardened"})},n.bip32PathIsDefault=function(){return"m/0"===n.props.extendedPublicKeyImporter.bip32Path},n.resetBIP32Path=function(){n.setBIP32PathToDefault(),n.setBIP32PathError("")},n.handleExtendedPublicKeyChange=function(e){var t=n.props,a=t.network,r=t.extendedPublicKeyImporters,s=e.target.value,o=Object(ae.validateExtendedPublicKey)(s,a);""===o&&Object.values(r).find((function(e){return e.extendedPublicKey===s}))&&(o="This extended public key has already been imported."),n.setState({extendedPublicKey:s,extendedPublicKeyError:o})},n.state={error:"",extendedPublicKey:"",extendedPublicKeyError:"",bip32PathError:""},n}return a}(c.a.Component),as=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Q.a)(this,a),(n=t.call(this,e)).render=function(){var e=n.props.extendedPublicKeyImporter,t=n.state.error;return c.a.createElement(S.a,{mt:2},c.a.createElement(ke.a,{fullWidth:!0,name:"publicKey",label:"Extended Public Key",value:e.extendedPublicKey,onChange:n.handleChange,error:n.hasError(),helperText:t}))},n.hasError=function(){return""!==n.state.error},n.setError=function(e){n.setState({error:e})},n.handleChange=function(e){(0,n.props.validateAndSetExtendedPublicKey)(e.target.value,n.setError)},n.state={error:""},n}return a}(c.a.Component),ns=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Q.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){(0,n.props.resetBIP32Path)()},n.interaction=function(){var e=n.props,t=e.network,a=e.extendedPublicKeyImporter;return new Wa.HermitExportExtendedPublicKey({network:t,bip32Path:a.bip32Path})},n.render=function(){var e=n.props.disableChangeMethod,t=n.state.extendedPublicKeyError;return c.a.createElement(Fn.a,null,c.a.createElement(sn,{startText:"Import Extended Public Key",interaction:n.interaction(),onStart:e,onSuccess:n.import,onClear:n.onClear}),c.a.createElement(ne.a,{className:"text-danger"},t))},n.setError=function(e){n.setState({extendedPublicKeyError:e})},n.import=function(e){var t=n.props,a=t.validateAndSetBIP32Path,r=t.validateAndSetExtendedPublicKey;(0,t.enableChangeMethod)();var s=e.xpub;a(e.bip32Path,(function(){r(s,n.setError)}),n.setError)},n.onClear=function(){var e=n.props,t=e.reset,a=e.enableChangeMethod;t(!0),n.setError(""),a()},n.state={extendedPublicKeyError:""},n}return a}(c.a.Component),rs=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Q.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.resetBIP32Path()},n.interaction=function(){var e=n.props,t=e.network,a=e.extendedPublicKeyImporter;return Object(Wa.ExportExtendedPublicKey)({network:t,keystore:a.method,bip32Path:a.bip32Path})},n.render=function(){var e=n.props.extendedPublicKeyImporter,t=n.state,a=t.status,r=t.extendedPublicKeyError,s=n.interaction();return a===Wa.UNSUPPORTED?c.a.createElement(ne.a,{className:"text-danger"},s.messageTextFor({status:a})):c.a.createElement(S.a,{mt:2},c.a.createElement(I.a,{container:!0},c.a.createElement(I.a,{item:!0,md:6},c.a.createElement(ke.a,{fullWidth:!0,label:"BIP32 Path",value:e.bip32Path,onChange:n.handleBIP32PathChange,disabled:a!==Wa.PENDING,error:n.hasBIP32PathError(),helperText:n.bip32PathError()})),c.a.createElement(I.a,{item:!0,md:6},!n.bip32PathIsDefault()&&c.a.createElement(C.a,{type:"button",variant:"contained",size:"small",onClick:n.resetBIP32Path,disabled:a!==Wa.PENDING},"Default"))),c.a.createElement(ne.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),c.a.createElement(S.a,{mt:2},c.a.createElement(C.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:n.import,disabled:n.hasBIP32PathError()||a===Wa.ACTIVE},"Import Extended Public Key")),c.a.createElement(hn,{messages:s.messagesFor({state:a}),excludeCodes:["bip32"]}),c.a.createElement(ne.a,{className:"text-danger"},r))},n.import=Object(J.a)(Z.a.mark((function e(){var t,a,r,s;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.validateAndSetExtendedPublicKey,r=t.enableChangeMethod,(0,t.disableChangeMethod)(),n.setState({extendedPublicKeyError:"",status:Wa.ACTIVE}),e.prev=3,e.next=6,n.interaction().run();case 6:s=e.sent,a(s,(function(e){n.setState({extendedPublicKeyError:e,status:Wa.PENDING})})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),n.setState({extendedPublicKeyError:e.t0.message,status:Wa.PENDING});case 14:r();case 15:case"end":return e.stop()}}),e,null,[[3,10]])}))),n.hasBIP32PathError=function(){var e=n.state,t=e.bip32PathError,a=e.status;return""!==t||n.interaction().hasMessagesFor({state:a,level:Wa.ERROR,code:"bip32"})},n.bip32PathError=function(){var e=n.state,t=e.bip32PathError,a=e.status;return""!==t?t:n.interaction().messageTextFor({state:a,level:Wa.ERROR,code:"bip32"})},n.setBIP32PathError=function(e){n.setState({bip32PathError:e})},n.handleBIP32PathChange=function(e){(0,n.props.validateAndSetBIP32Path)(e.target.value,(function(){}),n.setBIP32PathError)},n.bip32PathIsDefault=function(){var e=n.props,t=e.extendedPublicKeyImporter,a=e.defaultBIP32Path;return t.bip32Path===a},n.resetBIP32Path=function(){var e=n.props.resetBIP32Path;n.setBIP32PathError(""),e()},n.state={extendedPublicKeyError:"",bip32PathError:"",status:n.interaction().isSupported()?Wa.PENDING:Wa.UNSUPPORTED},n}return a}(c.a.Component),ss=function(e){var t=e.message;return c.a.createElement("small",null,c.a.createElement(R.a,null,c.a.createElement(j.a,{color:"error.main"},c.a.createElement(k.a,null,c.a.createElement(T.a,{color:"error"},c.a.createElement(dn.a,null))),c.a.createElement(N.a,null,c.a.createElement(T.a,{color:"error"},t)))))},os=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Q.a)(this,a),(n=t.call(this,e)).title=function(){var e=n.props,t=e.number,a=e.extendedPublicKeyImporter,r=e.setName;return c.a.createElement(Ke,{number:t,name:a.name,setName:r})},n.renderImport=function(){var e=n.props,t=e.extendedPublicKeyImporter,a=e.number,r=n.state.disableChangeMethod,s="xpub-".concat(a,"-importer-select-label");return c.a.createElement("div",null,c.a.createElement(Ue.a,{fullWidth:!0},c.a.createElement(Ha.a,{id:s},"Select Method"),c.a.createElement(Ga.a,{labelId:s,id:"public-key-".concat(a,"-importer-select"),disabled:r,value:t.method,onChange:n.handleMethodChange},c.a.createElement(qa.a,{value:""},"< Select method >"),c.a.createElement(qa.a,{value:Wa.TREZOR},"Trezor"),c.a.createElement(qa.a,{value:Wa.LEDGER},"Ledger"),c.a.createElement(qa.a,{value:Wa.HERMIT},"Hermit"),c.a.createElement(qa.a,{value:"xpub"},"Derive from extended public key"),c.a.createElement(qa.a,{value:"text"},"Enter as text"))),n.renderImportByMethod())},n.renderImportByMethod=function(){var e=n.props,t=e.extendedPublicKeyImporters,a=e.extendedPublicKeyImporter,r=e.network,s=e.addressType,o=e.defaultBIP32Path;return a.method===Wa.TREZOR||a.method===Wa.LEDGER?c.a.createElement(rs,{extendedPublicKeyImporter:a,validateAndSetExtendedPublicKey:n.validateAndSetExtendedPublicKey,validateAndSetBIP32Path:n.validateAndSetBIP32Path,resetBIP32Path:n.resetBIP32Path,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod,addressType:s,defaultBIP32Path:o,network:r}):a.method===Wa.HERMIT?c.a.createElement(ns,{extendedPublicKeyImporter:a,validateAndSetExtendedPublicKey:n.validateAndSetExtendedPublicKey,validateAndSetBIP32Path:n.validateAndSetBIP32Path,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod,resetBIP32Path:n.resetBIP32Path,reset:n.reset}):"xpub"===a.method?c.a.createElement(ts,{extendedPublicKeyImporter:a,extendedPublicKeyImporters:t,validateAndSetExtendedPublicKey:n.validateAndSetExtendedPublicKey,network:r,validateAndSetBIP32Path:n.validateAndSetBIP32Path}):"text"===a.method?c.a.createElement(as,{extendedPublicKeyImporter:a,validateAndSetExtendedPublicKey:n.validateAndSetExtendedPublicKey}):null},n.handleMethodChange=function(e){var t=n.props,a=t.number,r=t.setMethod,s=t.setExtendedPublicKey;r(a,e.target.value),s(a,"")},n.disableChangeMethod=function(){n.setState({disableChangeMethod:!0})},n.enableChangeMethod=function(){n.setState({disableChangeMethod:!1})},n.finalize=function(){var e=n.props,t=e.number;(0,e.setFinalized)(t,!0)},n.reset=function(e){var t=n.props,a=t.number,r=t.setExtendedPublicKey,s=t.setFinalized;r(a,""),s(a,!1),e&&n.resetBIP32Path()},n.renderBIP32Path=function(){var e=n.props.extendedPublicKeyImporter;return"text"===e.method?c.a.createElement("div",{className:"mt-4"},c.a.createElement("p",null,"Make sure you ",c.a.createElement("strong",null,"record the corresponding BIP32 path."))):c.a.createElement("div",{className:"mt-4"},c.a.createElement("p",null,"The BIP32 path for this extended public key is:"),c.a.createElement("div",{className:"text-center"},c.a.createElement(fa,{text:e.bip32Path,showIcon:!0})),c.a.createElement("p",{className:"mt-4"},"You will need this BIP32 path to sign for this key later."," ",c.a.createElement("strong",null,"Write down this BIP32 path!")))},n.validateAndSetBIP32Path=function(e,t,a,r){var s=n.props,o=s.number,i=s.setBIP32Path,l=Object(ae.validateBIP32Path)(e,r);i(o,e),l?a(l):(a(""),t())},n.resetBIP32Path=function(){var e=n.props,t=e.number;(0,e.resetBIP32Path)(t)},n.renderExtendedPublicKey=function(){var e=n.props,t=e.extendedPublicKeyImporter,a=e.network,r=e.classes,s=n.state.conversionMessage,o=t.method===Wa.HERMIT&&a===ae.NETWORKS.TESTNET?"this should not be an issue as hermit signing is not affected by the conversion.":"this may indicate an invalid network setting, if so correct setting, remove key and try again.";return c.a.createElement("div",null,c.a.createElement("p",null,"The following extended public key was imported:"),c.a.createElement("div",{className:r.xpub},c.a.createElement(fa,{text:t.extendedPublicKey,showIcon:!0})),n.renderBIP32Path(),""!==s&&c.a.createElement(S.a,{mb:2},c.a.createElement(ne.a,null,s,", ",o," ")),c.a.createElement(C.a,{variant:"contained",color:"secondary",size:"small",onClick:function(){n.reset(t.method===Wa.HERMIT)}},"Remove Extended Public Key"))},n.validateAndSetExtendedPublicKey=function(e,t,a){var r=n.props,s=r.number,o=r.network,i=r.extendedPublicKeyImporters,l=r.setExtendedPublicKey,c=Object(ae.validateExtendedPublicKey)(e,o),u=e;if(""!==c)try{u=Object(ae.convertExtendedPublicKey)(e,"testnet"===o?"tpub":"xpub")}catch(m){return t(m.message),void l(s,e)}var d=Object(ae.validateExtendedPublicKey)(u,o);if(""!==d)return t(d),void l(s,e);if(l(s,u),u&&Object.values(i).find((function(e,t){return t!==s-1&&e.extendedPublicKey===u})))t("This extended public key has already been imported.");else{t("");var p=u===e?"":"Your extended public key has been converted from ".concat(e.slice(0,4)," to ").concat(u.slice(0,4));n.setState({conversionMessage:p}),n.finalize(),a&&a()}},n.state={disableChangeMethod:!1,conversionMessage:""},n}return Object($.a)(a,[{key:"render",value:function(){var e=this.props,t=e.extendedPublicKeyImporter,a=e.finalizedNetwork,n=e.network,r=t.method&&t.conflict,s="";return r&&(s=a!==n?"Warning, you can not mix xpub and tpub.  Do not proceed without resolving by either removing conflicting imported keys or returning network type to original state!":"Warning, BIP32 path is in conflict with the network and address type settings.  Do not proceed unless you are absolutely sure you know what you are doing!"),c.a.createElement(O.a,null,c.a.createElement(w.a,{title:this.title()}),c.a.createElement(x.a,null,r&&c.a.createElement(ss,{message:s}),t.finalized?this.renderExtendedPublicKey():this.renderImport()))}}]),a}(c.a.Component);var is={setName:Gr,resetBIP32Path:Xr,setBIP32Path:qr,setMethod:Yr,setExtendedPublicKey:Vr,setFinalized:Zr},ls=Object(es.a)((function(){return{xpub:{lineHeight:".8rem",overflowWrap:"break-word"}}}))(os),cs=Object(m.b)((function(e,t){return Object(F.a)({},e.settings,{},e.quorum,{},{extendedPublicKeyImporter:e.quorum.extendedPublicKeyImporters[t.number]})}),is)(ls),us=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Q.a)(this,a),(n=t.call(this,e)).handleImport=function(e){var t=e.target,a=new FileReader;a.readAsText(t.files[0]),a.onload=function(e){var t=e.target.result;n.setConfigJson(t)}},n.walletActivated=function(){return n.props.nodesLoaded},n.refesh=Object(J.a)(Z.a.mark((function e(){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({refreshing:!0}),e.next=3,n.generatorRefresh();case 3:n.setState({refreshing:!1});case 4:case"end":return e.stop()}}),e)}))),n.importDetails=function(){var e=n.state.configJson,t=n.props,a=t.setTotalSigners,r=t.setRequiredSigners,s=t.setAddressType,o=t.setNetwork,i=t.setExtendedPublicKeyImporterMethod,l=t.setExtendedPublicKeyImporterExtendedPublicKey,c=t.setExtendedPublicKeyImporterBIP32Path,u=t.setExtendedPublicKeyImporterFinalized,d=t.setExtendedPublicKeyImporterName,p=t.updateWalletNameAction,m=t.setClientType,E=t.setClientUrl,h=t.setClientUsername,f=JSON.parse(e);a(f.quorum.totalSigners),r(f.quorum.requiredSigners),s(f.addressType),o(f.network),p(0,f.name),m(f.client.type),"private"===f.client.type&&(E(f.client.url),h(f.client.username)),f.extendedPublicKeys.forEach((function(e,t){var a=t+1;d(a,e.name),i(a,e.method),c(a,e.bip32Path),l(a,e.xpub),u(a,!0)}))},n.renderWalletImporter=function(){var e=n.state.configError;return n.props.configuring?c.a.createElement(c.a.Fragment,null,c.a.createElement("label",{htmlFor:"upload-config"},c.a.createElement("input",{style:{display:"none"},id:"upload-config",name:"upload-config",accept:"application/json",onChange:n.handleImport,type:"file"}),c.a.createElement(C.a,{color:"primary",variant:"contained",component:"span",style:{marginTop:"20px"}},"Import Wallet Configuration")),c.a.createElement(ne.a,{error:!0},e)):""},n.renderSettings=function(){var e=null;return n.props.configuring&&(e=c.a.createElement(I.a,{item:!0,md:4},c.a.createElement(S.a,null,c.a.createElement(tt,null)),c.a.createElement(S.a,{mt:2},c.a.createElement(rt,null)),c.a.createElement(S.a,{mt:2},c.a.createElement(Ze,null)),c.a.createElement(S.a,{mt:2},c.a.createElement(At,null)))),e},n.renderExtendedPublicKeyImporters=function(){for(var e=n.props,t=e.totalSigners,a=e.configuring,r=[],s=1;s<=t;s+=1)r.push(c.a.createElement(S.a,{key:s,mt:1===s?0:2,display:a?"block":"none"},c.a.createElement(cs,{key:s,number:s})));return r},n.downloadWalletDetails=function(e){e.preventDefault(),G(n.walletDetailsText(),n.walletDetailsFilename())},n.walletDetailsText=function(){var e=n.props,t=e.addressType,a=e.network,r=e.totalSigners,s=e.requiredSigners,o=e.walletName;return'{\n  "name": "'.concat(o,'",\n  "addressType": "').concat(t,'",\n  "network": "').concat(a,'",\n  "client":  ').concat(n.clientDetails(),',\n  "quorum": {\n    "requiredSigners": ').concat(s,',\n    "totalSigners": ').concat(r,'\n  },\n  "extendedPublicKeys": [\n').concat(n.extendedPublicKeyImporterBIP32Paths(),"\n  ]\n}\n")},n.clientDetails=function(){var e=n.props.client;return"private"===e.type?'{\n    "type": "private",\n    "url": "'.concat(e.url,'",\n    "username": "').concat(e.username,'"\n  }'):'{\n    "type": "public"\n  }'},n.extendedPublicKeyImporterBIP32Paths=function(){for(var e=n.props.totalSigners,t=[],a=1;a<=e;a+=1)t.push("".concat(n.extendedPublicKeyImporterBIP32Path(a)).concat(a<e?",":""));return t.join("\n")},n.extendedPublicKeyImporterBIP32Path=function(e){var t=n.props.extendedPublicKeyImporters[e],a="text"===t.method?"Unknown (make sure you have written this down previously!)":t.bip32Path;return'    {\n      "name": "'.concat(t.name,'",\n      "bip32Path": "').concat(a,'",\n      "xpub": "').concat(t.extendedPublicKey,'",\n      "method": "').concat(t.method,'"\n    }')},n.walletDetailsFilename=function(){var e=n.props,t=e.totalSigners,a=e.requiredSigners,r=e.addressType,s=e.walletName;return"bitcoin-".concat(a,"-of-").concat(t,"-").concat(r,"-").concat(s,".json")},n.totalBalance=function(){var e=n.props,t=e.deposits,a=e.change;return Object.keys(t.nodes).length?Object(ae.satoshisToBitcoins)(t.balanceSats.plus(a.balanceSats)).toFixed():""},n.render=function(){var e=n.props,t=e.configuring,a=e.walletName,r=e.setName,s=e.deposits,o=e.change,i=e.network,l=e.pendingBalance,u=n.totalBalance(),d=n.state.refreshing,p=o.fetchUTXOsErrors+s.fetchUTXOsErrors>0?"Wallet loaded with errors":"";return c.a.createElement(c.a.Fragment,null,c.a.createElement(S.a,{mt:3},c.a.createElement(I.a,{container:!0},c.a.createElement(I.a,{item:!0,xs:10,md:6},c.a.createElement(De,{editable:!Object.keys(s.nodes).length||!Object.keys(o.nodes).length,walletName:a,setName:r,balance:u,pendingBalance:+Object(ae.satoshisToBitcoins)(l).toFixed(),network:i})),c.a.createElement(I.a,{item:!0,xs:1},c.a.createElement(re.a,{onClick:n.refesh,style:{float:"right",display:n.walletActivated()?"block":"none"}},c.a.createElement(oe.a,{style:{display:d?"none":"block"}}),c.a.createElement(ie.a,{size:24,style:{display:d?"block":"none"}}))))),p.length?c.a.createElement(ne.a,{style:{float:"right",padding:"11px"},error:!0},p):"",c.a.createElement(S.a,null,c.a.createElement(I.a,{container:!0,spacing:3},c.a.createElement(I.a,{item:!0,xs:12},n.renderWalletImporter()),c.a.createElement(I.a,{item:!0,md:t?8:12},n.renderExtendedPublicKeyImporters(),c.a.createElement(S.a,{mt:2},c.a.createElement($r,{downloadWalletDetails:n.downloadWalletDetails,refreshNodes:function(e){return n.generatorRefresh=e}}))),n.renderSettings())))},n.state={configError:"",configJson:"",refreshing:!1},n}return Object($.a)(a,null,[{key:"validateProperties",value:function(e,t,a){for(var n=0;n<t.length;n+=1){var r=t[n],s=""!==a?e[a]:e;if(!Object.prototype.hasOwnProperty.call(s,r))return'Configuration missing property "'.concat(""!==a?"".concat(a,"."):"").concat(r,'"')}return""}},{key:"validateConfig",value:function(e){var t=a.validateProperties(e,["name","addressType","network","client","quorum","extendedPublicKeys"],"");if(""!==t)return t;var n="public"===e.client.type?["type"]:["type","url","username"],r=a.validateProperties(e,n,"client");if(""!==r)return r;var s=a.validateProperties(e,["requiredSigners","totalSigners"],"quorum");return""!==s?s:a.validateExtendedPublicKeys(e.extendedPublicKeys,e.network)}},{key:"validateExtendedPublicKeys",value:function(e,t){for(var a={name:function(e,t){return"string"===typeof e?"":"Extended public key ".concat(t," name must be a string")},bip32Path:function(t,a){if("text"===e[a-1].method)return"";var n=Object(ae.validateBIP32Path)(t);return""!==n?"Extended public key ".concat(a," error: ").concat(n):""},xpub:function(e){return Object(ae.validateExtendedPublicKey)(e,t)},method:function(e,t){return~["trezor","ledger","hermit","xpub","text"].indexOf(e)?"":"Invalid method for extended public key ".concat(t)}},n=Object.keys(a),r=0;r<e.length;r+=1)for(var s=0;s<n.length;s+=1){var o=n[s],i=e[r][o],l=a[o](i,r+1);if(""!==l)return l}return""}}]),Object($.a)(a,[{key:"componentDidMount",value:function(){if(sessionStorage){var e=sessionStorage.getItem("caravan_config");e&&this.setConfigJson(e)}}},{key:"setConfigJson",value:function(e){var t,n=this;try{var r=JSON.parse(e);t=a.validateConfig(r)}catch(s){t="Invlaid JSON"}sessionStorage&&sessionStorage.setItem("caravan_config",e),this.setState({configJson:e,configError:t},(function(){""===t&&n.importDetails()}))}}]),a}(c.a.Component);us.defaultProps={pendingBalance:0};var ds=Object(F.a)({setName:me,setTotalSigners:He,setRequiredSigners:Ge,setAddressType:qe,setNetwork:We,setExtendedPublicKeyImporterMethod:Yr,setExtendedPublicKeyImporterExtendedPublicKey:Vr,setExtendedPublicKeyImporterBIP32Path:qr,setExtendedPublicKeyImporterName:Gr,setExtendedPublicKeyImporterFinalized:Zr,updateWalletNameAction:me},Ct({setClientType:"SET_CLIENT_TYPE",setClientUrl:"SET_CLIENT_URL",setClientUsername:"SET_CLIENT_USERNAME",setClientPassword:"SET_CLIENT_PASSWORD"}),{updateDepositNode:de,updateChangeNode:pe}),ps=Object(m.b)((function(e){return Object(F.a)({},e.settings,{},e.quorum,{},{walletName:e.wallet.common.walletName,nodesLoaded:e.wallet.common.nodesLoaded,walletMode:e.wallet.common.walletMode},{pendingBalance:n.getPendingBalance(e),changeNodes:e.wallet.change.nodes,depositNodes:e.wallet.deposits.nodes},e.wallet,{client:e.client})}),ds)(us);var ms=jt({setPublicKeyImporterName:"SET_PUBLIC_KEY_IMPORTER_NAME",resetPublicKeyImporterBIP32Path:"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH",setPublicKeyImporterBIP32Path:"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH",setPublicKeyImporterMethod:"SET_PUBLIC_KEY_IMPORTER_METHOD",setPublicKeyImporterPublicKey:"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY",setPublicKeyImporterFinalized:"SET_PUBLIC_KEY_IMPORTER_FINALIZED",movePublicKeyImporterUp:"MOVE_PUBLIC_KEY_IMPORTER_UP",movePublicKeyImporterDown:"MOVE_PUBLIC_KEY_IMPORTER_DOWN"}),Es=ms.setPublicKeyImporterName,hs=ms.setPublicKeyImporterBIP32Path,fs=ms.resetPublicKeyImporterBIP32Path,bs=ms.setPublicKeyImporterMethod,vs=ms.setPublicKeyImporterPublicKey,gs=ms.setPublicKeyImporterFinalized,Ps=ms.movePublicKeyImporterUp,ys=ms.movePublicKeyImporterDown,Ss=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(Q.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).isInConflict=function(){var t=e.props.publicKeyImporters;return Object.values(t).some((function(e){return e.conflict}))},e.publicKeyCount=function(){var t=e.props.publicKeyImporters;return Object.values(t).filter((function(e){return e.finalized})).length},e.publicKeysAreCanonicallySorted=function(){var t=e.props.publicKeyImporters,a=Object.values(t).map((function(e){return e.publicKey})).filter((function(e){return""!==e})),n=Object.values(t).map((function(e){return e.publicKey})).filter((function(e){return""!==e})).sort();return a.filter((function(e,t){return e===n[t]})).length===a.length},e.canonicallySortPublicKeys=function(){(0,e.props.sortPublicKeyImporters)()},e.generateMultisig=function(){for(var t=e.props,a=t.network,n=t.publicKeyImporters,r=t.totalSigners,s=t.requiredSigners,o=t.addressType,i=t.setMultisigAddress,l=[],c=1;c<=r;c+=1)l.push(n[c].publicKey);var u=ae.generateMultisigFromPublicKeys.apply(void 0,[a,o,s].concat(l));return i(u.address),u},e.downloadAddressDetails=function(t){t.preventDefault();var a=e.generateMultisig();G(e.addressDetailsText(a),e.addressDetailsFilename(a))},e.addressDetailsFilename=function(t){var a=e.props,n=a.totalSigners,r=a.requiredSigners,s=a.addressType;return"bitcoin-".concat(r,"-of-").concat(n,"-").concat(s,"-").concat(t.address,".txt")},e.addressDetailsText=function(t){var a=e.props,n=a.addressType,r=a.network,s=a.totalSigners,o=a.requiredSigners,i=Object(ae.multisigRedeemScript)(t),l=Object(ae.multisigWitnessScript)(t),c=i?"Redeem Script: ".concat(Object(ae.scriptToHex)(i)):"",u=l?"Witness Script: ".concat(Object(ae.scriptToHex)(l)):"",d=i&&l?"\n\n":"";return"Address: ".concat(t.address,"\n\nType: ").concat(n,"\n\nNetwork: ").concat(r,"\n\nQuorum: ").concat(o,"-of-").concat(s,"\n\nBIP32 Paths:\n").concat(e.publicKeyImporterBIP32Paths(),"\n\n").concat(c).concat(d).concat(u,"\n")},e.publicKeyImporterBIP32Paths=function(){for(var t=e.props.totalSigners,a=[],n=1;n<=t;n+=1)a.push(e.publicKeyImporterBIP32Path(n));return a.join("\n")},e.publicKeyImporterBIP32Path=function(t){var a=e.props.publicKeyImporters[t],n="text"===a.method?"Unknown (make sure you have written this down previously!)":a.bip32Path;return"  * ".concat(a.name,": ").concat(n,": ").concat(a.publicKey)},e.title=function(){var t=e.props,a=t.totalSigners,n=t.requiredSigners,r=t.addressType;return c.a.createElement(I.a,{container:!0,justify:"space-between"},c.a.createElement(I.a,{item:!0},n,"-of-",a," Multisig",r," "),c.a.createElement(I.a,{item:!0},c.a.createElement("small",null,"Public Keys: ".concat(e.publicKeyCount(),"/").concat(a))))},e}return Object($.a)(a,[{key:"body",value:function(){var e=this.props.totalSigners;if(this.publicKeyCount()===e){var t=this.generateMultisig(),a=this.publicKeysAreCanonicallySorted();return c.a.createElement("div",null,this.isInConflict()&&c.a.createElement(ss,null),!a&&c.a.createElement(I.a,{container:!0,justify:"space-between"},c.a.createElement(I.a,{item:!0,md:8},c.a.createElement(ne.a,{error:!0},"WARNING: These public keys are not in the standard"," ",H("https://github.com/bitcoin/bips/blob/master/bip-0067.mediawiki","BIP67 order"),".")),c.a.createElement(I.a,{item:!0,md:4},c.a.createElement(C.a,{variant:"contained",color:"primary",onClick:this.canonicallySortPublicKeys},"Sort Public Keys"))),c.a.createElement(S.a,{mt:2},c.a.createElement(Aa,{multisig:t})),c.a.createElement(S.a,{mt:2},c.a.createElement(C.a,{variant:"contained",color:"primary",onClick:this.downloadAddressDetails},"Download Address Details")))}return c.a.createElement("p",null,"Once you have imported all ".concat(e," public keys, "),"your address details will be displayed here.")}},{key:"render",value:function(){return c.a.createElement(O.a,null,c.a.createElement(w.a,{title:this.title()}),c.a.createElement(x.a,null,this.body()))}}]),a}(c.a.Component);var Ts={sortPublicKeyImporters:function(){return{type:"SORT_PUBLIC_KEY_IMPORTERS"}},setMultisigAddress:function(e){return{type:"UPDATE_MULTISIG_ADDRESS",value:e}}},Is=Object(m.b)((function(e){return Object(F.a)({},e.settings,{},e.address)}),Ts)(Ss),Os=a(1115),ws=a(1116),xs=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Q.a)(this,a),(n=t.call(this,e)).render=function(){var e=n.state,t=e.error,a=e.publicKey;return c.a.createElement(S.a,{mt:2},c.a.createElement(ke.a,{fullWidth:!0,name:"publicKey",label:"Public Key",value:a,onChange:n.handleChange,error:n.hasError(),helperText:t}),c.a.createElement(S.a,{mt:2},c.a.createElement(C.a,{variant:"contained",color:"primary",size:"large",onClick:n.import,disabled:""===a||n.hasError()},"Add Public Key")))},n.import=function(){(0,n.props.validateAndSetPublicKey)(n.state.publicKey,n.setError)},n.hasError=function(){return""!==n.state.error},n.setError=function(e){n.setState({error:e})},n.handleChange=function(e){var t=e.target.value,a=Object(ae.validatePublicKey)(t);n.setState({publicKey:t,error:a})},n.state={error:"",publicKey:""},n}return a}(c.a.Component),Cs=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Q.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.setBIP32PathToDefault()},n.render=function(){var e=n.props.publicKeyImporter,t=n.state,a=t.extendedPublicKey,r=t.extendedPublicKeyError,s=t.bip32PathError,o=t.conversionMessage;return c.a.createElement("div",null,c.a.createElement(S.a,{mt:2},c.a.createElement(ke.a,{fullWidth:!0,name:"extendedPublicKey",label:"Extended Public Key",value:a,onChange:n.handleExtendedPublicKeyChange,error:n.hasExtendedPublicKeyError(),helperText:r})),""!==o&&c.a.createElement(S.a,{mb:2},c.a.createElement(ne.a,null,o,", this may indicate an invalid network setting, if so correct setting, remove key and try again.")),")",c.a.createElement(S.a,{mt:2},c.a.createElement(I.a,{container:!0},c.a.createElement(I.a,{item:!0,md:10},c.a.createElement(ke.a,{fullWidth:!0,name:"bip32Path",label:"BIP32 Path (relative to xpub)",type:"text",value:e.bip32Path,onChange:n.handleBIP32PathChange,error:n.hasBIP32PathError(),helperText:s}),c.a.createElement(ne.a,null,"Use the default value if you don\u2019t understand BIP32 paths.")),c.a.createElement(I.a,{item:!0,md:2},!n.bip32PathIsDefault()&&c.a.createElement(C.a,{type:"button",variant:"contained",size:"small",onClick:n.resetBIP32Path},"Default"))),c.a.createElement(S.a,{mt:2},c.a.createElement(C.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:n.import,disabled:""===a||n.hasError()},"Import Public Key"))))},n.import=function(){var e=n.props,t=e.network,a=e.publicKeyImporter,r=e.validateAndSetPublicKey,s=n.state.extendedPublicKey;r(Object(ae.deriveChildPublicKey)(s,a.bip32Path,t),(function(e){return n.setState({bip32PathError:e})}))},n.setBIP32PathToDefault=function(){(0,n.props.validateAndSetBIP32Path)("m/0",(function(){}),(function(){}))},n.hasBIP32PathError=function(){return""!==n.state.bip32PathError},n.hasExtendedPublicKeyError=function(){return""!==n.state.extendedPublicKeyError},n.hasError=function(){return n.hasBIP32PathError()||n.hasExtendedPublicKeyError()},n.setBIP32PathError=function(e){n.setState({bip32PathError:e})},n.handleBIP32PathChange=function(e){(0,n.props.validateAndSetBIP32Path)(e.target.value,(function(){}),n.setBIP32PathError,{mode:"unhardened"})},n.bip32PathIsDefault=function(){return"m/0"===n.props.publicKeyImporter.bip32Path},n.resetBIP32Path=function(){n.setBIP32PathToDefault(),n.setBIP32PathError("")},n.handleExtendedPublicKeyChange=function(e){var t=n.props.network,a=e.target.value,r=a;if(""!==Object(ae.validateExtendedPublicKeyForNetwork)(a,t))try{r=Object(ae.convertExtendedPublicKey)(a,"testnet"===t?"tpub":"xpub")}catch(i){return void n.setState({extendedPublicKey:a,extendedPublicKeyError:i.message,conversionMessage:""})}var s=Object(ae.validateExtendedPublicKey)(r,t);if(""===s){var o=r===a?"":"Your extended public key has been converted from ".concat(a.slice(0,4)," to ").concat(r.slice(0,4));n.setState({extendedPublicKey:r,extendedPublicKeyError:"",conversionMessage:o})}else n.setState({extendedPublicKey:a,extendedPublicKeyError:s,conversionMessage:""})},n.state={extendedPublicKey:"",extendedPublicKeyError:"",bip32PathError:"",conversionMessage:""},n}return a}(c.a.Component),Rs=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Q.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){(0,n.props.resetBIP32Path)()},n.interaction=function(){var e=n.props,t=e.network,a=e.publicKeyImporter;return Object(Wa.ExportPublicKey)({keystore:Wa.HERMIT,network:t,bip32Path:a.bip32Path})},n.render=function(){var e=n.props.disableChangeMethod,t=n.state.publicKeyError;return c.a.createElement(Fn.a,null,c.a.createElement(sn,{startText:"Import Public Key",interaction:n.interaction(),onStart:e,onSuccess:n.import,onClear:n.onClear}),c.a.createElement(ne.a,{error:!0},t))},n.setError=function(e){n.setState({publicKeyError:e})},n.import=function(e){var t=n.props,a=t.validateAndSetBIP32Path,r=t.validateAndSetPublicKey;(0,t.enableChangeMethod)();var s=e.pubkey;a(e.bip32Path,(function(){r(s,n.setError)}),n.setError)},n.onClear=function(){var e=n.props,t=e.reset,a=e.enableChangeMethod;t(!0),n.setError(""),a()},n.state={publicKeyError:""},n}return a}(c.a.Component),js=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Q.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.resetBIP32Path()},n.interaction=function(){var e=n.props,t=e.network,a=e.publicKeyImporter;return Object(Wa.ExportPublicKey)({network:t,keystore:a.method,bip32Path:a.bip32Path})},n.render=function(){var e=n.props.publicKeyImporter,t=n.state,a=t.status,r=t.publicKeyError,s=n.interaction();return a===Wa.UNSUPPORTED?c.a.createElement(ne.a,{error:!0},s.messageTextFor({status:a})):c.a.createElement(S.a,{mt:2},c.a.createElement(I.a,{container:!0},c.a.createElement(I.a,{item:!0,md:6},c.a.createElement(ke.a,{fullWidth:!0,label:"BIP32 Path",value:e.bip32Path,onChange:n.handleBIP32PathChange,disabled:a!==Wa.PENDING,error:n.hasBIP32PathError(),helperText:n.bip32PathError()})),c.a.createElement(I.a,{item:!0,md:6},!n.bip32PathIsDefault()&&c.a.createElement(C.a,{type:"button",variant:"contained",size:"small",onClick:n.resetBIP32Path,disabled:a!==Wa.PENDING},"Default"))),c.a.createElement(ne.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),c.a.createElement(S.a,{mt:2},c.a.createElement(C.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:n.import,disabled:n.hasBIP32PathError()||a===Wa.ACTIVE},"Import Public Key")),c.a.createElement(hn,{messages:s.messagesFor({state:a}),excludeCodes:["bip32"]}),c.a.createElement(ne.a,{error:!0},r))},n.import=Object(J.a)(Z.a.mark((function e(){var t,a,r,s;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.validateAndSetPublicKey,r=t.enableChangeMethod,(0,t.disableChangeMethod)(),n.setState({publicKeyError:"",status:Wa.ACTIVE}),e.prev=3,e.next=6,n.interaction().run();case 6:s=e.sent,a(s,(function(e){n.setState({publicKeyError:e,status:Wa.PENDING})})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),n.setState({publicKeyError:e.t0.message,status:Wa.PENDING});case 14:r();case 15:case"end":return e.stop()}}),e,null,[[3,10]])}))),n.hasBIP32PathError=function(){var e=n.state,t=e.bip32PathError,a=e.status;return""!==t||n.interaction().hasMessagesFor({state:a,level:Wa.ERROR,code:"bip32"})},n.bip32PathError=function(){var e=n.state,t=e.bip32PathError,a=e.status;return""!==t?t:n.interaction().messageTextFor({state:a,level:Wa.ERROR,code:"bip32"})},n.setBIP32PathError=function(e){n.setState({bip32PathError:e})},n.handleBIP32PathChange=function(e){(0,n.props.validateAndSetBIP32Path)(e.target.value,(function(){}),n.setBIP32PathError)},n.bip32PathIsDefault=function(){var e=n.props,t=e.publicKeyImporter,a=e.defaultBIP32Path;return t.bip32Path===a},n.resetBIP32Path=function(){var e=n.props.resetBIP32Path;n.setBIP32PathError(""),e()},n.state={publicKeyError:"",bip32PathError:"",status:n.interaction().isSupported()?Wa.PENDING:Wa.UNSUPPORTED},n}return a}(c.a.Component),ks=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Q.a)(this,a),(n=t.call(this,e)).title=function(){var e=n.props,t=e.number,a=e.totalSigners,r=e.publicKeyImporter,s=e.setName;return c.a.createElement(I.a,{container:!0,justify:"space-between"},c.a.createElement(I.a,{item:!0},c.a.createElement(Ke,{number:t,name:r.name,setName:s})),c.a.createElement(I.a,{item:!0},c.a.createElement(I.a,{container:!0,justify:"flex-end"},c.a.createElement(C.a,{type:"button",variant:"contained",onClick:n.moveUp,disabled:1===t},c.a.createElement(Os.a,null)),c.a.createElement("span",null,"\xa0"),c.a.createElement(C.a,{type:"button",variant:"contained",onClick:n.moveDown,disabled:t===a},c.a.createElement(ws.a,null)))))},n.renderImport=function(){var e=n.props,t=e.publicKeyImporter,a=e.number,r=n.state.disableChangeMethod,s="public-key-".concat(a,"-importer-select-label");return c.a.createElement("div",null,c.a.createElement(Ue.a,{fullWidth:!0},c.a.createElement(Ha.a,{id:s},"Select Method"),c.a.createElement(Ga.a,{labelId:s,id:"public-key-".concat(a,"-importer-select"),disabled:r,value:t.method,onChange:n.handleMethodChange},c.a.createElement(qa.a,{value:""},"< Select method >"),c.a.createElement(qa.a,{value:Wa.TREZOR},"Trezor"),c.a.createElement(qa.a,{value:Wa.LEDGER},"Ledger"),c.a.createElement(qa.a,{value:Wa.HERMIT},"Hermit"),c.a.createElement(qa.a,{value:"xpub"},"Derive from extended public key"),c.a.createElement(qa.a,{value:"text"},"Enter as text"))),n.renderImportByMethod())},n.renderImportByMethod=function(){var e=n.props,t=e.publicKeyImporter,a=e.network,r=e.addressType,s=e.defaultBIP32Path;return t.method===Wa.TREZOR||t.method===Wa.LEDGER?c.a.createElement(js,{publicKeyImporter:t,validateAndSetPublicKey:n.validateAndSetPublicKey,validateAndSetBIP32Path:n.validateAndSetBIP32Path,resetBIP32Path:n.resetBIP32Path,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod,addressType:r,defaultBIP32Path:s,network:a}):t.method===Wa.HERMIT?c.a.createElement(Rs,{publicKeyImporter:t,validateAndSetPublicKey:n.validateAndSetPublicKey,validateAndSetBIP32Path:n.validateAndSetBIP32Path,resetBIP32Path:n.resetBIP32Path,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod,reset:n.reset}):"xpub"===t.method?c.a.createElement(Cs,{network:a,publicKeyImporter:t,validateAndSetPublicKey:n.validateAndSetPublicKey,validateAndSetBIP32Path:n.validateAndSetBIP32Path}):"text"===t.method?c.a.createElement(xs,{publicKeyImporter:t,validateAndSetPublicKey:n.validateAndSetPublicKey}):null},n.handleMethodChange=function(e){var t=n.props,a=t.number,r=t.setMethod,s=t.setPublicKey;r(a,e.target.value),s(a,"")},n.disableChangeMethod=function(){n.setState({disableChangeMethod:!0})},n.enableChangeMethod=function(){n.setState({disableChangeMethod:!1})},n.finalize=function(){var e=n.props,t=e.number;(0,e.setFinalized)(t,!0)},n.reset=function(e){var t=n.props,a=t.number,r=t.setPublicKey,s=t.setFinalized;r(a,""),s(a,!1),e&&n.resetBIP32Path()},n.moveUp=function(e){var t=n.props,a=t.moveUp,r=t.number;e.preventDefault(),a(r)},n.moveDown=function(e){var t=n.props,a=t.moveDown,r=t.number;e.preventDefault(),a(r)},n.renderBIP32Path=function(){var e=n.props.publicKeyImporter;return"text"!==e.method?c.a.createElement(S.a,{mt:4},c.a.createElement("p",null,"The BIP32 path for this public key is:"),c.a.createElement(I.a,{container:!0,justify:"center"},c.a.createElement(fa,{text:e.bip32Path,code:!0})),c.a.createElement(S.a,{mt:4},c.a.createElement("p",null,"You will need this BIP32 path to sign for this key later."," ",c.a.createElement("strong",null,"Write down this BIP32 path!")))):null},n.validateAndSetBIP32Path=function(e,t,a,r){var s=n.props,o=s.number,i=s.setBIP32Path,l=Object(ae.validateBIP32Path)(e,r);i(o,e),l?a(l):(a(""),t())},n.resetBIP32Path=function(){var e=n.props,t=e.number;(0,e.resetBIP32Path)(t)},n.renderPublicKey=function(){var e=n.props.publicKeyImporter;return c.a.createElement("div",null,c.a.createElement("p",null,"The following public key was imported:"),c.a.createElement(I.a,{container:!0,justify:"center"},c.a.createElement(fa,{text:e.publicKey,showIcon:!0,code:!0})),n.renderBIP32Path(),c.a.createElement(S.a,{mt:2},c.a.createElement(C.a,{variant:"contained",color:"secondary",size:"small",onClick:function(){n.reset(e.method===Wa.HERMIT)}},"Remove Public Key")))},n.validateAndSetPublicKey=function(e,t,a){var r=n.props,s=r.number,o=r.publicKeyImporters,i=r.setPublicKey,l=Object(ae.validatePublicKey)(e);i(s,e),l?t&&t(l):e&&Object.values(o).find((function(t,a){return a!==s-1&&t.publicKey===e}))?t&&t("This public key has already been imported."):(t&&t(""),n.finalize(),a&&a())},n.state={disableChangeMethod:!1},n}return Object($.a)(a,[{key:"render",value:function(){var e=this.props.publicKeyImporter;return c.a.createElement(O.a,null,c.a.createElement(w.a,{title:this.title()}),c.a.createElement(x.a,null,e.method&&"text"!==e.method&&e.conflict&&c.a.createElement(ss,{message:"Warning, BIP32 path is in conflict with the network and address type settings.  Do not proceed unless you are absolutely sure you know what you are doing!"}),e.finalized?this.renderPublicKey():this.renderImport()))}}]),a}(c.a.Component);var Ns={setName:Es,setBIP32Path:hs,resetBIP32Path:fs,setMethod:bs,setPublicKey:vs,setFinalized:gs,moveUp:Ps,moveDown:ys},_s=Object(m.b)((function(e,t){return Object(F.a)({},e.settings,{},e.address,{},{publicKeyImporter:e.address.publicKeyImporters[t.number]})}),Ns)(ks),As=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(Q.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).render=function(){var t=e.props.address;return c.a.createElement(S.a,{mt:2},c.a.createElement(I.a,{container:!0,spacing:3},c.a.createElement(I.a,{item:!0,xs:12},c.a.createElement("h1",null,"Address Generator")),c.a.createElement(I.a,{item:!0,md:8},e.renderPublicKeyImporters(),c.a.createElement(S.a,{mt:2},c.a.createElement(Is,null))),c.a.createElement(I.a,{item:!0,md:4},c.a.createElement(S.a,null,c.a.createElement(tt,null)),c.a.createElement(S.a,{mt:2},c.a.createElement(rt,null)),c.a.createElement(S.a,{mt:2},c.a.createElement(Ze,null)),""!==t&&e.renderClientPicker())))},e.renderClientPicker=function(){var t=e.props.address;return c.a.createElement(S.a,{mt:2},c.a.createElement(At,{publicNotes:c.a.createElement("span",null,'If you plan to use this address with your own bitcoind node you can import the address created here by switching for "Public" to "Private". Otherwise no action is needed here.'),privateNotes:c.a.createElement("div",null,c.a.createElement(La,{addresses:[t]}))}))},e.renderPublicKeyImporters=function(){for(var t=e.props.totalSigners,a=[],n=1;n<=t;n+=1)a.push(c.a.createElement(S.a,{key:n,mt:1===n?0:2},c.a.createElement(_s,{number:n})));return a},e}return a}(c.a.Component);As.defaultProps={address:""};var Ks=Object(m.b)((function(e){return Object(F.a)({},{totalSigners:e.settings.totalSigners},{},e.address)}))(As),Ms=a(1120),Bs=a(1121),Ds="START_TEST_SUITE_RUN",Us="SET_CURRENT_TEST_RUN";function Ls(){return{type:Ds}}function Fs(e){return{type:Us,value:e}}var zs="SET_KEYSTORE",Ws="SET_KEYSTORE_NOTE",Hs="SET_KEYSTORE_STATUS";function Gs(e,t){return{type:zs,keystoreType:e,version:t}}function qs(e){return{type:Ws,value:e}}function Xs(e){return{type:Hs,value:e}}var Ys="START_TEST_RUN",Vs="END_TEST_RUN",Zs="RESET_TEST_RUN",Js="SET_TEST_RUN_NOTE";function Qs(e){return{type:Ys,testRunIndex:e}}function $s(e,t,a){return{type:Vs,testRunIndex:e,status:t,message:a}}function eo(e){return{type:Zs,testRunIndex:e}}function to(e,t){return{type:Js,testRunIndex:e,note:t}}var ao=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(Q.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(t){var a=e.props,n=a.setNote,r=a.mode,s=a.testRunIndex,o=t.target.value;"testRun"===r?n(s,o):n(o)},e}return Object($.a)(a,[{key:"render",value:function(){var e=this.props.note;return c.a.createElement(ke.a,{name:"notes",label:"Notes",value:e,onChange:this.handleChange,multiline:!0,fullWidth:!0,rows:3})}}]),a}(c.a.Component);ao.defaultProps={testRunIndex:0};var no={setNote:qs},ro={setNote:to},so=Object(m.b)((function(e){return{note:e.keystore.note,mode:"keystore"}}),no)(ao),oo=Object(m.b)((function(e){return{mode:"testRun",testRunIndex:e.testSuiteRun.currentTestRunIndex,note:e.testSuiteRun.testRuns[e.testSuiteRun.currentTestRunIndex].note}}),ro)(ao),io=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(Q.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).detectVersion=Object(J.a)(Z.a.mark((function t(){var a,n,r,s,o,i;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,n=a.type,r=a.setKeystore,s=a.setKeystoreStatus,o=a.setErrorNotification,s(Wa.ACTIVE),t.prev=2,t.next=5,e.interaction().run();case 5:(i=t.sent)&&r(n,i.spec),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),console.error(t.t0),o(t.t0.message);case 13:s(Wa.PENDING);case 14:case"end":return t.stop()}}),t,null,[[2,9]])}))),e.interaction=function(){var t=e.props.type;return Object(Wa.GetMetadata)({keystore:t})},e.handleTypeChange=function(t){var a=e.props,n=a.version;(0,a.setKeystore)(t.target.value,n)},e.handleVersionChange=function(t){var a=e.props,n=a.type;(0,a.setKeystore)(n,t.target.value)},e}return Object($.a)(a,[{key:"render",value:function(){var e=this.props,t=e.type,a=e.status,n=e.version;return c.a.createElement(S.a,null,c.a.createElement(I.a,{container:!0,spacing:2,justify:"center"},c.a.createElement(I.a,{item:!0,md:4},c.a.createElement(Ue.a,{fullWidth:!0},c.a.createElement(Ha.a,{id:"keystore-select-label"},"Type"),c.a.createElement(Ga.a,{labelId:"keystore-select-label",id:"keystore-select",value:t,onChange:this.handleTypeChange},c.a.createElement(qa.a,{value:""},"< Select type >"),c.a.createElement(qa.a,{value:Wa.TREZOR},"Trezor"),c.a.createElement(qa.a,{value:Wa.LEDGER},"Ledger"),c.a.createElement(qa.a,{value:Wa.HERMIT},"Hermit")))),c.a.createElement(I.a,{item:!0,md:6},c.a.createElement(ke.a,{name:"version",fullWidth:!0,label:"Version",value:n,disabled:""===t,onChange:this.handleVersionChange})),c.a.createElement(I.a,{item:!0,md:2},c.a.createElement(C.a,{disabled:a===Wa.ACTIVE||""===t||t===Wa.HERMIT,onClick:this.detectVersion},a===Wa.ACTIVE?"Detecting...":"Detect"))),t&&t!==Wa.HERMIT&&c.a.createElement(hn,{messages:this.interaction().messagesFor({state:a})}),c.a.createElement(so,null))}}]),a}(c.a.Component),lo=Object(F.a)({},o,{setErrorNotification:Fr}),co=Object(m.b)((function(e){return Object(F.a)({},e.keystore)}),lo)(io),uo=a(222),po=a.n(uo),mo=a(442),Eo=a.n(mo),ho=a(1105),fo=a(1117),bo=a(1118),vo=a(1119),go=a(356),Po=function(){function e(t){Object(Q.a)(this,e),this.params=t||{}}return Object($.a)(e,[{key:"postprocess",value:function(e){return e}},{key:"interaction",value:function(){throw Error("Define the `interaction` method in your subclass of `Test`.")}},{key:"matches",value:function(e,t){return e===t}}]),Object($.a)(e,[{key:"diff",value:function(e,t){if("string"===typeof e&&"string"===typeof t)return Object(go.diffChars)(e,t);if("object"===typeof e&&"object"===typeof t){if(void 0!==e.length&&void 0!==t.length)return Object(go.diffArrays)(e,t);if(void 0===e.length&&void 0===t.length)return Object(go.diffJSON)(e,t)}return null}},{key:"supports",value:function(){return!0}},{key:"name",value:function(){return this.params.name}},{key:"description",value:function(){return this.params.description}},{key:"expected",value:function(){return this.params.expected}},{key:"actual",value:function(){var e=Object(J.a)(Z.a.mark((function e(){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.postprocess(this.interaction().run()));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"run",value:function(){var e=Object(J.a)(Z.a.mark((function e(){var t;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.actual();case 3:return t=e.sent,e.abrupt("return",this.resolve(t));case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",{status:"error",message:e.t0.message});case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"resolve",value:function(e){var t=this.expected();return this.matches(t,e)?{status:"success"}:{status:"failure",expected:t,actual:e,diff:this.diff(t,e)}}}]),e}();Po.SUCCESS="success",Po.FAILURE="failure",Po.ERROR="error";var yo=Po,So=(a(1050),function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(Q.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).render=function(){var t=e.props,a=t.testSuiteRun,n=t.keystore,r=Eo.a.getParser(window.navigator.userAgent);return c.a.createElement(I.a,{container:!0,direction:"column",spacing:3},c.a.createElement(I.a,{item:!0},c.a.createElement(O.a,null,c.a.createElement(w.a,{title:"Summary"}),c.a.createElement(x.a,null,c.a.createElement("dl",null,c.a.createElement("dt",null,"OS:"),c.a.createElement("dd",null,r.getOSName()," ",r.getOSVersion()),c.a.createElement("dt",null,"Browser:"),c.a.createElement("dd",null,r.getBrowserName()," ",r.getBrowserVersion()),c.a.createElement("dt",null,"unchained-wallets:"),c.a.createElement("dd",null,"v.",Wa.VERSION),n.type&&c.a.createElement(S.a,null,c.a.createElement("dt",null,"Keystore:"),c.a.createElement("dd",null,e.keystoreName(n.type)," ",n.version)),n.note&&c.a.createElement(S.a,null,c.a.createElement("dt",null,"Notes:"),c.a.createElement("dd",null,n.note)))))),c.a.createElement(I.a,{item:!0},c.a.createElement(O.a,null,c.a.createElement(w.a,{title:"Tests",subheader:"".concat(a.testRuns.length," Total")}),c.a.createElement(x.a,null,e.renderTests()))))},e.renderTests=function(){var t=e.props,a=t.testSuiteRun;return""===t.keystore.type?c.a.createElement("p",null,"Choose a keystore type to generate a test suite..."):c.a.createElement(S.a,null,c.a.createElement(T.a,{variant:"h6"},c.a.createElement("span",{className:"TestSuiteRunSummary-success"},a.testRuns.filter((function(e){return e.status===yo.SUCCESS})).length," ",c.a.createElement("small",null,"SUCCESS")),"\xa0 / \xa0",c.a.createElement("span",{className:"TestSuiteRunSummary-failure"},a.testRuns.filter((function(e){return e.status===yo.FAILURE})).length," ",c.a.createElement("small",null,"FAIL")),"\xa0 / \xa0",c.a.createElement("span",{className:"TestSuiteRunSummary-error"},a.testRuns.filter((function(e){return e.status===yo.ERROR})).length," ",c.a.createElement("small",null,"ERROR"))),c.a.createElement(ho.a,null),c.a.createElement(R.a,{style:{maxHeight:"200px",overflow:"auto"},dense:!0,component:"nav"},a.testRuns.map(e.renderTestRun)))},e.renderTestRun=function(t,a){var n=e.props.testSuiteRun;return c.a.createElement(j.a,{selected:n.currentTestRunIndex===a,button:!0,key:a,onClick:e.testRunChooser(a),disabled:!n.started},e.renderTestRunResult(t),c.a.createElement(N.a,null,t.test.name(),t.status!==Wa.PENDING&&t.status!==Wa.ACTIVE&&c.a.createElement("small",null,"\xa0 (",po.a.duration(t.endedAt.diff(t.startedAt)).asSeconds(),"s)")),t.note&&c.a.createElement(k.a,null,c.a.createElement(Ia.a,{title:t.note},c.a.createElement(fo.a,null))))},e.renderTestRunResult=function(e){switch(e.status){case Wa.PENDING:return c.a.createElement(k.a,null,c.a.createElement(bo.a,{className:"TestSuiteRunSummary-pending"}));case yo.SUCCESS:return c.a.createElement(k.a,null,c.a.createElement(Fa.a,{className:"TestSuiteRunSummary-success"}));case yo.FAILURE:return c.a.createElement(k.a,null,c.a.createElement(vo.a,{className:"TestSuiteRunSummary-failure"}));case yo.ERROR:return c.a.createElement(k.a,null,c.a.createElement(za.a,{className:"TestSuiteRunSummary-error"}));case Wa.ACTIVE:return c.a.createElement(k.a,null,c.a.createElement(ie.a,{className:"TestSuiteRunSummary-active"}));default:return null}},e.testRunChooser=function(t){var a=e.props.setCurrentTestRun;return function(){a(t)}},e.keystoreName=function(e){switch(e){case Wa.TREZOR:return"Trezor";case Wa.LEDGER:return"Ledger";case Wa.HERMIT:return"Hermit";default:return""}},e}return a}(c.a.Component)),To={setCurrentTestRun:Fs},Io=Object(m.b)((function(e){return{keystore:e.keystore,testSuiteRun:e.testSuiteRun}}),To)(So),Oo=(a(1051),function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(Q.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).componentDidMount=function(){document.addEventListener("keydown",e.handleKeyDown)},e.componentWillUnmount=function(){document.removeEventListener("keydown",e.handleKeyDown)},e.handleKeyDown=function(t){var a=e.props,n=a.status,r=a.isLastTest,s=a.nextTest;32===t.keyCode&&"textarea"!==t.target.tagName.toLowerCase()&&(t.preventDefault(),n!==Wa.ACTIVE&&(n===Wa.PENDING?e.start():r||s()))},e.render=function(){var t=e.props,a=t.test,n=t.testRunIndex,r=t.status,s=t.keystore;return a?c.a.createElement(S.a,null,c.a.createElement(O.a,null,c.a.createElement(w.a,{title:a.name(),subheader:"Test ".concat(n+1)}),c.a.createElement(x.a,null,a.description(),e.renderInteractionMessages(),s.type===Wa.HERMIT&&a.interaction().displayer&&r===Wa.PENDING&&c.a.createElement(S.a,{align:"center"},c.a.createElement(ln,{width:400,string:a.interaction().request()})),r===Wa.PENDING&&s.type!==Wa.HERMIT&&c.a.createElement(S.a,{align:"center"},c.a.createElement(C.a,{variant:"contained",color:"primary",onClick:e.start},"Start Test")),s.type===Wa.HERMIT&&!e.testComplete()&&c.a.createElement(S.a,null,c.a.createElement(sn,{onStart:e.start,onSuccess:e.resolve,onClear:e.reset,startText:"Scan Hermit Response",interaction:a.interaction()})),e.testComplete()&&e.renderResult(),c.a.createElement(oo,null)),c.a.createElement(_.a,null,r===Wa.ACTIVE&&c.a.createElement(C.a,{disabled:!0},c.a.createElement(ie.a,null),"\xa0 Running test..."),e.testComplete()&&c.a.createElement(C.a,{color:"secondary",onClick:e.reset},"Reset Test")))):c.a.createElement(S.a,null,c.a.createElement("p",null,"No test selected."))},e.testComplete=function(){var t=e.props.status;return t===yo.SUCCESS||t===yo.ERROR||t===yo.FAILURE},e.renderInteractionMessages=function(){var t=e.props,a=t.status,n=t.test;return a===Wa.PENDING||a===Wa.ACTIVE?c.a.createElement(hn,{excludeCodes:["hermit.command"],messages:n.interaction().messagesFor({state:a})}):null},e.renderResult=function(){var t=e.props,a=t.status,n=t.message;switch(a){case yo.SUCCESS:return c.a.createElement(S.a,{mt:2,align:"center"},c.a.createElement(T.a,{variant:"h5",className:"TestRun-success"},c.a.createElement(Fa.a,null),"\xa0 Test passed"));case yo.FAILURE:return c.a.createElement(S.a,{mt:2},c.a.createElement(S.a,{align:"center"},c.a.createElement(T.a,{variant:"h5",className:"TestRun-failure"},c.a.createElement(vo.a,null),"\xa0 Test failed")),n);case yo.ERROR:return c.a.createElement(S.a,{mt:2},c.a.createElement(S.a,{align:"center"},c.a.createElement(T.a,{variant:"h5",className:"TestRun-error"},c.a.createElement(za.a,null),"\xa0 Test error")),n);default:return null}},e.start=Object(J.a)(Z.a.mark((function t(){var a,n,r,s,o;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props,n=a.test,r=a.keystore,s=a.testRunIndex,(0,a.startTestRun)(s),r.type!==Wa.HERMIT){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,n.run();case 6:o=t.sent,e.handleResult(o);case 8:case"end":return t.stop()}}),t)}))),e.resolve=function(t){var a=e.props.test,n=a.resolve(a.postprocess(t));e.handleResult(n)},e.handleResult=function(t){var a=e.props,n=a.testRunIndex,r=a.endTestRun,s=a.setErrorNotification;t.status===yo.ERROR&&s(t.message),r(n,t.status,e.formatMessage(t))},e.reset=function(){var t=e.props,a=t.testRunIndex;(0,t.resetTestRun)(a)},e.formatMessage=function(t){switch(t.status){case yo.FAILURE:return c.a.createElement(S.a,null,c.a.createElement("dl",null,c.a.createElement("dt",null,"Expected:"),c.a.createElement("dd",null,c.a.createElement("code",{className:"TestRun-wrap"},e.formatOutput(t.expected))),c.a.createElement("dt",null,"Actual:"),c.a.createElement("dd",null,c.a.createElement("code",{className:"TestRun-wrap"},e.formatOutput(t.actual))),t.diff&&c.a.createElement("div",null,c.a.createElement("dt",null,"Diff:"),c.a.createElement("dd",null,c.a.createElement("code",{className:"TestRun-wrap"},t.diff.map(e.formatDiffSegment))))));case yo.ERROR:return c.a.createElement("code",null,t.message);default:return""}},e.formatOutput=function(e){switch(typeof e){case"object":return JSON.stringify(e);case"string":case"number":return e;default:return"Did not recognize output type"}},e.formatDiffSegment=function(t,a){return c.a.createElement("span",{key:a,className:"TestRun-diff-segment-".concat(e.diffSegmentClass(t))},t.value)},e.diffSegmentClass=function(e){return e.added?"added":e.removed?"removed":"common"},e}return a}(c.a.Component)),wo=Object(F.a)({},i,{},r),xo=Object(m.b)((function(e,t){return Object(F.a)({},{keystore:e.keystore},{},e.testSuiteRun.testRuns[t.testRunIndex]||{},{},{testRunIndex:t.testRunIndex})}),wo)(Oo);Oo.defaultProps={test:{}};var Co=xo,Ro=ae.TEST_FIXTURES.bip39Phrase,jo=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){return Object(Q.a)(this,a),t.apply(this,arguments)}return Object($.a)(a,[{key:"render",value:function(){return c.a.createElement(I.a,{container:!0},c.a.createElement(I.a,{item:!0,md:3},c.a.createElement("ol",null,Ro.slice(0,6).map(a.renderSeedWord))),c.a.createElement(I.a,{item:!0,md:3},c.a.createElement("ol",{start:7},Ro.slice(6,12).map(a.renderSeedWord))),c.a.createElement(I.a,{item:!0,md:3},c.a.createElement("ol",{start:13},Ro.slice(12,18).map(a.renderSeedWord))),c.a.createElement(I.a,{item:!0,md:3},c.a.createElement("ol",{start:19},Ro.slice(18,24).map(a.renderSeedWord))))}}],[{key:"renderSeedWord",value:function(e,t){return c.a.createElement("li",{key:t},c.a.createElement("code",null,e))}}]),a}(c.a.Component),ko=Object(m.b)((function(){return{}}),{})(jo),No=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(Q.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).componentDidMount=function(){document.addEventListener("keydown",e.handleKeyDown)},e.componentWillUnmount=function(){document.removeEventListener("keydown",e.handleKeyDown)},e.currentTestIsActive=function(){var t=e.props.testSuiteRun;if(!t.started)return!1;var a=t.testRuns[t.currentTestRunIndex];return!!a&&a.status===Wa.ACTIVE},e.handleKeyDown=function(t){if(e.props.testSuiteRun.started){if(e.currentTestIsActive())return;switch(t.keyCode){case 37:case 38:e.isFirstTest()||e.previousTest();break;case 39:case 40:e.isLastTest()||e.nextTest()}}else{if(32!==t.keyCode)return;var a=t.target.tagName.toLowerCase();if("textarea"===a||"input"===a)return;if(t.preventDefault(),e.startDisabled())return;e.start()}},e.render=function(){var t=e.props.testSuiteRun;return c.a.createElement(S.a,{mt:2},t.started&&c.a.createElement(S.a,{mt:2,mb:2},c.a.createElement(Yt.a,{variant:"determinate",value:t.testRuns.filter((function(e){return e.status!==Wa.PENDING&&e.status!==Wa.ACTIVE})).length/t.testRuns.length*100})),c.a.createElement(I.a,{container:!0,spacing:3},c.a.createElement(I.a,{item:!0,md:4},c.a.createElement(Io,null)),c.a.createElement(I.a,{item:!0,md:8},e.renderBody())))},e.renderSetup=function(){return c.a.createElement(I.a,{container:!0,direction:"column",spacing:3},c.a.createElement(I.a,{item:!0},c.a.createElement(O.a,null,c.a.createElement(w.a,{title:"Choose Keystore"}),c.a.createElement(x.a,null,c.a.createElement(co,null),c.a.createElement(S.a,{align:"center",mt:2},c.a.createElement(C.a,{variant:"contained",color:"primary",disabled:e.startDisabled(),onClick:e.start,type:"submit"},"Begin Test Suite"))))),c.a.createElement(I.a,{item:!0},c.a.createElement(O.a,null,c.a.createElement(w.a,{title:"Keystore Setup"}),c.a.createElement(x.a,null,c.a.createElement("p",null,"Ensure your keystore has been initialized with the following seed:"),c.a.createElement(ko,null)))))},e.renderBody=function(){var t=e.props.testSuiteRun;return t.started?c.a.createElement(S.a,null,c.a.createElement(Co,{isLastTest:e.isLastTest(),nextTest:e.nextTest,testRunIndex:t.currentTestRunIndex}),c.a.createElement(S.a,{mt:2},c.a.createElement(I.a,{container:!0,justify:"space-between"},c.a.createElement(I.a,{item:!0},c.a.createElement(C.a,{disabled:e.isFirstTest()||e.currentTestIsActive(),onClick:e.previousTest},c.a.createElement(Ms.a,null)," \xa0 Previous")),c.a.createElement(I.a,{item:!0},c.a.createElement(C.a,{disabled:e.isLastTest()||e.currentTestIsActive(),onClick:e.nextTest},"Next \xa0 ",c.a.createElement(Bs.a,null)))))):e.renderSetup()},e.start=function(){(0,e.props.startTestSuiteRun)()},e.startDisabled=function(){var t=e.props,a=t.testSuiteRun,n=t.keystore;return""===n.type||n.status===Wa.ACTIVE||a.started||0===a.testRuns.length},e.isFirstTest=function(){return 0===e.props.testSuiteRun.currentTestRunIndex},e.isLastTest=function(){var t=e.props.testSuiteRun;return t.currentTestRunIndex===t.testRuns.length-1},e.previousTest=function(){var t=e.props,a=t.testSuiteRun,n=t.setCurrentTestRun;a.currentTestRunIndex<1||n(a.currentTestRunIndex-1)},e.nextTest=function(){var t=e.props,a=t.testSuiteRun,n=t.setCurrentTestRun;a.currentTestRunIndex!==a.testRuns.length-1&&n(a.currentTestRunIndex+1)},e}return a}(c.a.Component),_o=Object(F.a)({},s),Ao=Object(m.b)((function(e){return{keystore:e.keystore,testSuiteRun:e.testSuiteRun}}),_o)(No);var Ko=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Q.a)(this,a),(n=t.call(this,e)).disabled=function(){},n.hasScriptError=function(){return""!==n.state.scriptError},n.hasFetchUTXOsError=function(){return""!==n.state.fetchUTXOsError},n.hasError=function(){return n.hasScriptError()||n.hasFetchUTXOsError()},n.scriptName=function(){switch(n.props.addressType){case ae.P2SH:return"redeem";case ae.P2SH_P2WSH:case ae.P2WSH:return"witness";default:return null}},n.scriptTitle=function(){var e=n.scriptName();return e.charAt(0).toUpperCase()+e.substring(1)},n.handleScriptChange=function(e){var t=e.target.value,a="";(""===t&&(a="".concat(n.scriptTitle()," script cannot be blank.")),""===a&&(t.includes("\n")||t.includes("\t")||t.includes(" "))&&(a="".concat(n.scriptTitle()," script should not contain spaces, tabs, or newlines.")),""===a)&&(""!==Object(ae.validateHex)(t)&&(a="".concat(n.scriptTitle()," script is not valid hex.")));if(""!==t&&""===a)try{n.generateMultisig(t)}catch(r){console.error(r),a="Failed to parse ".concat(n.scriptName()," script.")}n.setState({scriptHex:t,scriptError:a,fetchUTXOsError:"",fetchedUTXOs:!1})},n.generateMultisig=function(e){var t=n.props,a=t.network,r=t.addressType,s=n.state.scriptHex;return e&&(s=e),Object(ae.generateMultisigFromHex)(a,r,s)},n.renderDetails=function(){var e=n.state.fetchUTXOsError,t=n.props,a=t.chosePerformSpend,r=t.choseConfirmOwnership,s=t.client,o=n.generateMultisig(),i=a||r;return c.a.createElement("div",null,c.a.createElement(Aa,{multisig:o}),c.a.createElement(S.a,{mt:2},c.a.createElement(I.a,{container:!0,spacing:3},c.a.createElement(I.a,{item:!0},c.a.createElement(C.a,{variant:"contained",color:"primary",size:"large",onClick:n.performSpend,disabled:i},"Spend from this address")),c.a.createElement(I.a,{item:!0},c.a.createElement(C.a,{variant:"contained",size:"large",onClick:n.confirmOwnership,disabled:i},"Confirm ownership"))),c.a.createElement(ne.a,{error:!0},e)),"private"===s.type&&c.a.createElement(S.a,{mt:2},c.a.createElement(La,{addresses:[o.address],client:s})))},n.performSpend=Object(J.a)(Z.a.mark((function e(){var t,a,r,s,o,i,l,c,u,d,p;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.setRequiredSigners,r=t.setTotalSigners,s=t.setInputs,o=t.setFrozen,i=t.choosePerformSpend,l=n.generateMultisig(),e.next=4,n.fetchUTXOs(l);case 4:(c=e.sent)?(u=c.utxos,d=c.balanceSats,p="",d.isLessThanOrEqualTo(0)&&(p="This address has a zero balance."),n.setState({fetchedUTXOs:!0,fetchUTXOsError:p}),""===p&&(s(u),a(Object(ae.multisigRequiredSigners)(l)),r(Object(ae.multisigTotalSigners)(l)),o(!0),i())):n.setState({fetchedUTXOs:!1,fetchUTXOsError:"Failed to fetch UTXOs."});case 6:case"end":return e.stop()}}),e)}))),n.fetchUTXOs=function(){var e=Object(J.a)(Z.a.mark((function e(t){var a,r,s,o;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props,r=a.network,s=a.client,e.next=3,St(t.address,r,s);case 3:if(!((o=e.sent)&&o.utxos&&o.utxos.length)){e.next=6;break}return e.abrupt("return",o);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.confirmOwnership=function(){var e=n.props,t=e.chooseConfirmOwnership,a=e.setOwnershipMultisig,r=e.setFrozen;a(n.generateMultisig()),t(),r(!0)},n.state={scriptHex:"",scriptError:"",fetchUTXOsError:"",fetchedUTXOs:!1},n}return Object($.a)(a,[{key:"render",value:function(){var e=this.state,t=e.scriptHex,a=e.scriptError,n=e.fetchedUTXOs;return c.a.createElement(O.a,null,c.a.createElement(w.a,{title:"Enter ".concat(this.scriptTitle()," Script")}),c.a.createElement(x.a,null,c.a.createElement("form",null,c.a.createElement(ke.a,{fullWidth:!0,multiline:!0,autoFocus:!0,variant:"outlined",label:"".concat(this.scriptTitle()," Script"),value:t,rows:5,onChange:this.handleScriptChange,disabled:n&&!this.hasFetchUTXOsError(),helperText:a,error:""!==a})),""===t||this.hasScriptError()?c.a.createElement("p",null,"Enter a valid ",this.scriptName()," script to generate an address to spend funds from."):this.renderDetails()))}}]),a}(c.a.Component);var Mo={choosePerformSpend:function(){return{type:"CHOOSE_PERFORM_SPEND"}},setInputs:Zt,setTotalSigners:function(e){return{type:"SET_TOTAL_SIGNERS",value:e}},setRequiredSigners:Vt,chooseConfirmOwnership:function(){return{type:"CHOOSE_CONFIRM_OWNERSHIP"}},setOwnershipMultisig:function(e){return{type:"SET_OWNERSHIP_MULTISIG",value:e}},setFrozen:Xe},Bo=Object(m.b)((function(e){return Object(F.a)({},e.settings,{},{client:e.client},{},{choseConfirmOwnership:e.spend.ownership.chosen,chosePerformSpend:e.spend.transaction.chosen})}),Mo)(Ko),Do=a(688),Uo=a.n(Do),Lo=a(689),Fo=a.n(Lo),zo=a(323),Wo=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Q.a)(this,a),(n=t.call(this,e)).titleRef=c.a.createRef(),n.componentDidMount=function(){n.resetBIP32Path(),n.scrollToTitle()},n.componentDidUpdate=function(){n.scrollToTitle()},n.scrollToTitle=function(){n.titleRef.current.scrollIntoView({behavior:"smooth"})},n.handleMethodChange=function(e){(0,n.props.setMethod)(e.target.value),n.reset()},n.disableChangeMethod=function(){n.setState({disableChangeMethod:!0})},n.enableChangeMethod=function(){n.setState({disableChangeMethod:!1})},n.reset=function(){(0,n.props.reset)()},n.resetBIP32Path=function(){(0,n.props.resetBIP32Path)()},n.validateAndSetBIP32Path=function(e,t,a,r){var s=n.props.setBIP32Path,o=Object(ae.validateBIP32Path)(e,r);s(e),o?a(o):(a(""),t())},n.validateAndSetPublicKey=function(e,t,a){var r=n.props.setPublicKey,s=Object(ae.validatePublicKey)(e);r(e),s?t&&t(s):(t&&t(""),a&&a())},n.renderConfirmation=function(){var e=n.props,t=e.publicKeys,a=e.publicKeyImporter;if(""===a.publicKey)return null;if(t.includes(a.publicKey)){var r=Object(zo.a)(k.a)({color:"green"});return c.a.createElement(R.a,null,c.a.createElement(j.a,null,c.a.createElement(r,null,c.a.createElement(Uo.a,null)),c.a.createElement(N.a,null,"The public key exported at BIP32 path"," ",c.a.createElement("code",null,a.bip32Path)," is present in the provided redeem script.")))}return c.a.createElement(R.a,null,c.a.createElement(j.a,null,c.a.createElement(k.a,null,c.a.createElement(T.a,{color:"error"},c.a.createElement(Fo.a,null))),c.a.createElement(N.a,null,"The public key exported at BIP32 path"," ",c.a.createElement("code",null,a.bip32Path)," is not present in the provided redeem script.")))},n.renderImportByMethod=function(){var e=n.props,t=e.network,a=e.publicKeyImporter,r=e.defaultBIP32Path;return a.method===Wa.HERMIT?c.a.createElement(Rs,{publicKeyImporter:a,validateAndSetBIP32Path:n.validateAndSetBIP32Path,validateAndSetPublicKey:n.validateAndSetPublicKey,resetBIP32Path:n.resetBIP32Path,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod,reset:n.reset}):a.method===Wa.TREZOR||a.method===Wa.LEDGER?c.a.createElement(js,{network:t,publicKeyImporter:a,validateAndSetBIP32Path:n.validateAndSetBIP32Path,resetBIP32Path:n.resetBIP32Path,defaultBIP32Path:r,validateAndSetPublicKey:n.validateAndSetPublicKey,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod}):null},n.state={disableChangeMethod:!1},n}return Object($.a)(a,[{key:"render",value:function(){var e=this.props.publicKeyImporter,t=this.state.disableChangeMethod,a="public-key-importer-select-label",n="".concat(a,"-select");return c.a.createElement(O.a,null,c.a.createElement(w.a,{ref:this.titleRef,title:"Confirm Ownership"}),c.a.createElement(x.a,null,c.a.createElement("form",null,c.a.createElement("p",null,"How will you confirm your ownership of this address?"),c.a.createElement(Ue.a,{fullWidth:!0},c.a.createElement(Ha.a,{id:a},"Select Method"),c.a.createElement(Ga.a,{labelId:n,id:"public-key-importer-select",disabled:t,value:e.method,onChange:this.handleMethodChange},c.a.createElement(qa.a,{value:""},"< Select method >"),c.a.createElement(qa.a,{value:Wa.TREZOR},"Trezor"),c.a.createElement(qa.a,{value:Wa.LEDGER},"Ledger"),c.a.createElement(qa.a,{value:Wa.HERMIT},"Hermit"))),this.renderImportByMethod(),this.renderConfirmation(),""!==e.method&&c.a.createElement(C.a,{variant:"contained",size:"small",color:"secondary",role:"button",onClick:this.reset},"Start Again"))))}}]),a}(c.a.Component);var Ho={setMethod:function(e){return{type:"SET_PUBLIC_KEY_IMPORTER_METHOD",value:e}},setBIP32Path:function(e){return{type:"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH",value:e}},setPublicKey:function(e){return{type:"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY",value:e}},resetBIP32Path:function(){return{type:"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH"}},reset:function(){return{type:"RESET_PUBLIC_KEY_IMPORTER"}}},Go=Object(m.b)((function(e){return e.spend.ownership}),Ho)(Wo),qo=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(Q.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).render=function(){return c.a.createElement(S.a,{mt:2},c.a.createElement(I.a,{container:!0,spacing:3},c.a.createElement(I.a,{item:!0,md:8},c.a.createElement(S.a,null,c.a.createElement(Bo,null)),e.renderBody()),c.a.createElement(I.a,{item:!0,md:4},c.a.createElement(S.a,null,c.a.createElement(rt,null)),c.a.createElement(S.a,{mt:2},c.a.createElement(Ze,null)),c.a.createElement(S.a,{mt:2},c.a.createElement(At,null)))))},e.renderBody=function(){var t=e.props,a=t.transaction;return t.ownership.chosen?c.a.createElement(S.a,{mt:2},c.a.createElement(Go,null)):c.a.createElement(S.a,null,e.spendable()&&c.a.createElement(S.a,null,c.a.createElement(S.a,{mt:2},c.a.createElement(O.a,null,c.a.createElement(x.a,null,c.a.createElement(ka,{inputs:a.inputs,inputsTotalSats:a.inputsTotalSats})))),c.a.createElement(S.a,{mt:2},c.a.createElement(O.a,null,c.a.createElement(x.a,null,c.a.createElement(T.a,{variant:"h5"},"Define Outputs"),c.a.createElement(gr,null))))),a.finalizedOutputs&&c.a.createElement("div",null,c.a.createElement(S.a,{mt:2},c.a.createElement(Ir,null)),c.a.createElement(S.a,{mt:2},e.renderSignatureImporters())),e.signaturesFinalized()&&c.a.createElement(S.a,{mt:2},c.a.createElement(Sr,null)))},e.renderSignatureImporters=function(){for(var t=e.props.transaction,a=[],n=1;n<=t.requiredSigners;n+=1)a.push(c.a.createElement(S.a,{key:n,mt:2},c.a.createElement(Pn,{number:n})));return a},e.spendable=function(){return e.props.transaction.inputs.length>0},e.signaturesFinalized=function(){var t=e.props.signatureImporters;return Object.values(t).length>0&&Object.values(t).every((function(e){return e.finalized}))},e.confirmOwnership=function(t){e.setState({addressFinalized:!0,confirmOwnership:t})},e}return a}(c.a.Component);var Xo=Object(m.b)((function(e){return e.spend}))(qo),Yo=a(600),Vo=a(690),Zo=a.n(Vo),Jo=Object(xe.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},menuItem:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2),paddingX:e.spacing(3)},menuLink:{color:"inherit",textDecoration:"none"}}})),Qo=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){return Object(Q.a)(this,a),t.apply(this,arguments)}return Object($.a)(a,[{key:"render",value:function(){var e=this.props,t=e.href,a=e.title,n=e.classes,r=e.handleClose;return c.a.createElement("a",{href:t,className:n.menuLink},c.a.createElement(qa.a,{className:n.menuItem,onClick:r},a))}}]),a}(c.a.Component),$o=function(){var e=Jo(),t=c.a.useState(null),a=Object(ca.a)(t,2),n=a[0],r=a[1];return c.a.createElement("div",{className:e.root},c.a.createElement(Oa.a,{position:"static"},c.a.createElement(Yo.a,null,c.a.createElement(T.a,{variant:"h6",className:e.title},c.a.createElement(C.a,{color:"inherit",href:"#/"},"Caravan")),c.a.createElement(C.a,{"aria-controls":"simple-menu","aria-haspopup":"true",color:"inherit",onClick:function(e){r(e.currentTarget)}},c.a.createElement(S.a,{mr:3},c.a.createElement(T.a,null,"Menu")),c.a.createElement(Zo.a,null)),c.a.createElement(qn.a,{id:"simple-menu",anchorEl:n,keepMounted:!0,open:Boolean(n),onClose:function(){return r(null)}},[{href:"#/wallet",title:"Wallet"},{href:"#/address",title:"Create Address"},{href:"#/script",title:"Script Explorer"},{href:"#/help",title:"Help"}].map((function(t){var a=t.href,n=t.title;return c.a.createElement(Qo,{href:a,title:n,classes:e,key:a,handleClose:function(){return r(null)}})}))))))},ei=a(691),ti=a(1052),ai=function(){return c.a.createElement(S.a,{mt:2},c.a.createElement("hr",null),c.a.createElement(I.a,{container:!0,alignItems:"center"},c.a.createElement(I.a,{item:!0,sm:2},H("https://www.unchained-capital.com",c.a.createElement("img",{src:ti,className:"logo",alt:"Unchained Capital logo",height:"32"}))),c.a.createElement(I.a,{item:!0,sm:6},c.a.createElement("p",null,"Copyright\xa0",new Date(Date.now()).getFullYear()," by Unchained Capital and released under an MIT license.")),c.a.createElement(I.a,{item:!0,sm:1},c.a.createElement("p",null," v",ei.a," "))))},ni=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Q.a)(this,a),(n=t.call(this,e)).state={error:null,errorInfo:null},n}return Object($.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({errorInfo:t,error:e})}},{key:"render",value:function(){var e=this.props.children,t=this.state,a=t.error,n=t.errorInfo;return n?c.a.createElement(S.a,{m:4},c.a.createElement(S.a,{m:2},c.a.createElement(T.a,{variant:"h3",component:"h1"},"Something went wrong.")),c.a.createElement(S.a,{m:2},c.a.createElement(T.a,{variant:"body1"},"Let us know what happened on"," ",c.a.createElement("a",{href:"https://github.com/unchained-capital/caravan/issues",target:"_blank",rel:"noopener noreferrer"},"github"),".")),c.a.createElement(S.a,{mx:2,my:3},c.a.createElement("details",{style:{whiteSpace:"pre-wrap"}},a&&a.toString(),c.a.createElement("br",null),n.componentStack))):e}}]),a}(c.a.Component),ri=a(510),si=a(1122),oi={clearErrorNotification:zr},ii=Object(m.b)((function(e){return e.errorNotification}),oi)((function(e){var t=e.open,a=e.message,n=e.clearErrorNotification;return c.a.createElement(ri.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:t,onClose:n,ContentProps:{"aria-describedby":"error-notification"},message:c.a.createElement("span",{id:"error-notification"},a),action:[c.a.createElement(re.a,{key:"close","aria-label":"close",color:"inherit",onClick:n},c.a.createElement(si.a,null))]})})),li=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(g.a,null),c.a.createElement(y.SnackbarProvider,{maxSnack:3},c.a.createElement(P.a,{maxWidth:"lg"},c.a.createElement($o,null),c.a.createElement(ni,null,c.a.createElement(b.a,null,c.a.createElement(v.c,null,c.a.createElement(v.a,{path:"/test",component:Ao}),c.a.createElement(v.a,{path:"/address",component:Ks}),c.a.createElement(v.a,{path:"/script",component:Xo}),c.a.createElement(v.a,{path:"/wallet",component:ps}),c.a.createElement(v.a,{path:"/help",component:Y}),c.a.createElement(v.a,{path:"/",component:Y}))),c.a.createElement(ii,null)),c.a.createElement(ai,null))))},ci=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ui(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var di=function(e,t){return Object(F.a)({},e,{},t)},pi={network:ae.MAINNET,totalSigners:3,requiredSigners:2,addressType:ae.P2SH,frozen:!1},mi={type:"public",url:"",username:"",password:"",urlError:"",usernameError:"",passwordError:"",status:"unknown"},Ei={present:!0,bip32Path:"",publicKeys:[],multisig:{},address:"",balanceSats:new W.a(0),utxos:[],change:!1,spend:!1,fetchedUTXOs:!1,fetchUTXOsError:"",addressUsed:!1,addressKnown:!0},hi={nodes:{},trailingEmptyNodes:0,fetchUTXOsErrors:0,balanceSats:new W.a(0),spendingSats:new W.a(0),nextNode:null};function fi(e,t){var a=Object(F.a)({},Ei,{},e.nodes[t.value.bip32Path]||{},{},t.value),n={};n[a.bip32Path]=a;var r=Object(F.a)({},e,{},{nodes:Object(F.a)({},e.nodes,{},n)});if("undefined"!==typeof t.value.spend&&(r.spendingSats=t.value.spend?e.spendingSats.plus(a.balanceSats):e.spendingSats.minus(a.balanceSats)),t.value.balanceSats){var s=e.nodes[a.bip32Path]?e.nodes[a.bip32Path].balanceSats:W()(0);r.balanceSats=e.balanceSats.plus(a.balanceSats.minus(s))}var o=0,i=0,l=Object.keys(r.nodes);l.sort((function(e,t){var a=(e||"").split("/"),n=(t||"").split("/");return parseInt(a[2],10)-parseInt(n[2],10)}));for(var c=!1,u=0;u<l.length;u+=1){var d=l[l.length-(u+1)],p=r.nodes[d];p.fetchedUTXOs&&(!p.balanceSats.isEqualTo(0)||p.addressUsed||c?c=!0:o+=1),""!==p.fetchUTXOsError&&(i+=1)}return r.trailingEmptyNodes=o,r.fetchUTXOsErrors=i,r.nextNode=function(e){for(var t=Object.values(e.nodes),a=0;a<t.length;a+=1){var n=t[a];if(n.balanceSats.isEqualTo(0)&&!n.addressUsed)return n}return null}(r),r}function bi(e){var t=Object(F.a)({},e);return Object.values(t.nodes).forEach((function(e){e.spend&&(t.balanceSats=t.balanceSats.minus(e.balanceSats),e.balanceSats=new W.a(0),e.spend=!1,e.utxos=[])})),t}function vi(e){var t=Object(F.a)({},e);return Object.values(t.nodes).forEach((function(e){e.spend=!1})),t}var gi=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hi,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"RESET_NODES_SPEND":return vi(t);case"SPEND_NODES":return bi(t);case"RESET_NODES_FETCH_ERRORS":return di(t,{fetchUTXOsErrors:0,nodes:Object.values(t.nodes).reduce((function(e,t){var a=e;return a[t.bip32Path]=Object(F.a)({},t,{fetchUTXOsError:""}),a}),{})});case e:return fi(t,a);default:return t}}};function Pi(e){var t=(new Date).getTime().toString(),a=Object.values(e.extendedPublicKeyImporters).map((function(e){return e.extendedPublicKey})).join("");return"".concat(t,"-").concat(a)}var yi={name:"",bip32Path:Object(ae.multisigBIP32Root)(ae.P2SH,ae.MAINNET),bip32PathModified:!1,method:"",extendedPublicKey:"",finalized:!1,confliect:!1},Si={extendedPublicKeyImporters:{1:Object(F.a)({},yi,{},{name:"Extended Public Key 1"}),2:Object(F.a)({},yi,{},{name:"Extended Public Key 2"}),3:Object(F.a)({},yi,{},{name:"Extended Public Key 3"})},defaultBIP32Path:Object(ae.multisigBIP32Root)(ae.P2SH,ae.MAINNET),network:ae.MAINNET,addressType:ae.P2SH,fingerprint:"",finalizedNetwork:"",finalizedAddressType:"",configuring:!0};function Ti(e,t){t.finalizedNetwork&&(e.conflict=t.finalizedNetwork!==t.network||t.finalizedAddressType!==t.addressType)}function Ii(e,t,a){var n={};n[a]=t.value;var r=Object(F.a)({},e,{},{nodes:{}});return r.extendedPublicKeyImporters[t.number]=di(e.extendedPublicKeyImporters[t.number],n),Object.values(r.extendedPublicKeyImporters).reduce((function(e,t){return e+t.finalized}),0)===Object.keys(r.extendedPublicKeyImporters).length&&"finalized"===a&&(r.configuring=!1),Ti(r.extendedPublicKeyImporters[t.number],e),di(r,{fingerprint:Pi(r)})}function Oi(e,t){for(var a=t.value,n={},r=1;r<=a;r+=1)n[r]=e.extendedPublicKeyImporters[r]||Object(F.a)({},yi,{},{name:"Extended Public key ".concat(r)});return Object(F.a)({},e,{},{extendedPublicKeyImporters:n})}function wi(e,t,a){for(var n=1;n<=Object.values(e.extendedPublicKeyImporters).length;n+=1){var r=t.extendedPublicKeyImporters[n];r.bip32PathModified||r.finalized||(r.bip32Path=a),Ti(r,t)}}function xi(e,t){var a=e.addressType,n=t.value,r=Object(ae.multisigBIP32Root)(a,n),s=Object(F.a)({},e,{},{network:n,defaultBIP32Path:r});return wi(e,s,r),s}function Ci(e,t){var a=t.value,n=e.network,r=Object(ae.multisigBIP32Root)(a,n),s=Object(F.a)({},e,{},{addressType:a,defaultBIP32Path:r});return wi(e,s,r),s}function Ri(e,t){var a=Object(F.a)({},e);if(!0===t.value&&""===e.finalizedNetwork)a.finalizedNetwork=e.network,a.finalizedAddressType=e.addressType;else if(!1===t.value&&""!==e.finalizedNetwork){1===Object.values(e.extendedPublicKeyImporters).reduce((function(e,t){return!0===t.finalized?e+1:e}),0)&&(a.finalizedNetwork="",a.finalizedAddressType="",Object.values(a.extendedPublicKeyImporters).forEach((function(e){return e.conflict=!1})))}return a}function ji(e){var t=(new Date).getTime().toString(),a=Object.values(e.publicKeyImporters).map((function(e){return e.publicKey})).join("");return"".concat(t,"-").concat(a)}var ki={name:"",bip32Path:Object(ae.multisigBIP32Path)(ae.P2SH,ae.MAINNET),bip32PathModified:!1,method:"",publicKey:"",finalized:!1,conflict:!1},Ni={publicKeyImporters:{1:Object(F.a)({},ki,{},{name:"Public Key 1"}),2:Object(F.a)({},ki,{},{name:"Public Key 2"}),3:Object(F.a)({},ki,{},{name:"Public Key 3"})},defaultBIP32Path:Object(ae.multisigBIP32Path)(ae.P2SH,ae.MAINNET),network:ae.MAINNET,addressType:ae.P2SH,fingerprint:"",finalizedNetwork:"",finalizedAddressType:"",address:""};function _i(e,t){if(1===t.number)return e;var a=Object(F.a)({},e),n=e.publicKeyImporters[t.number-1],r=e.publicKeyImporters[t.number];return a.publicKeyImporters[t.number-1]=r,a.publicKeyImporters[t.number]=n,di(a,{fingerprint:ji(a)})}function Ai(e,t){if(t.number===Object.values(e.publicKeyImporters).length)return e;var a=Object(F.a)({},e),n=e.publicKeyImporters[t.number+1],r=e.publicKeyImporters[t.number];return a.publicKeyImporters[t.number+1]=r,a.publicKeyImporters[t.number]=n,di(a,{fingerprint:ji(a)})}function Ki(e){for(var t=Object.values(e.publicKeyImporters),a=t.map((function(e){return e.publicKey})).sort().map((function(e){return t.find((function(t){return t.publicKey===e}))})),n={},r=1;r<=a.length;r+=1)n[r]=a[r-1];var s=Object(F.a)({},e,{},{publicKeyImporters:n});return di(s,{fingerprint:ji(s)})}function Mi(e,t){t.finalizedNetwork&&(e.conflict=t.finalizedNetwork!==t.network||t.finalizedAddressType!==t.addressType)}function Bi(e,t,a){var n={};n[a]=t.value;var r=Object(F.a)({},e);return r.publicKeyImporters[t.number]=di(e.publicKeyImporters[t.number],n),Mi(r.publicKeyImporters[t.number],e),di(r,{fingerprint:ji(r)})}function Di(e,t){for(var a=t.value,n={},r=1;r<=a;r+=1)n[r]=e.publicKeyImporters[r]||Object(F.a)({},ki,{},{name:"Public Key ".concat(r)});var s=Object(F.a)({},e,{},{publicKeyImporters:n,stub:t.type});return di(s,{fingerprint:ji(s)})}function Ui(e,t,a){for(var n=1;n<=Object.values(e.publicKeyImporters).length;n+=1){var r=t.publicKeyImporters[n];r.bip32PathModified||r.finalized||(r.bip32Path=a),Mi(r,t)}}function Li(e,t){var a=t.value,n=e.addressType,r=Object(ae.multisigBIP32Path)(n,a),s=Object(F.a)({},e,{},{network:a,defaultBIP32Path:r});return Ui(e,s,r),s}function Fi(e,t){var a=e.network,n=t.value,r=Object(ae.multisigBIP32Path)(n,a),s=Object(F.a)({},e,{},{addressType:n,defaultBIP32Path:r});return Ui(e,s,r),s}function zi(e,t){var a=Object(F.a)({},e);if(!0===t.value&&""===e.finalizedNetwork&&"text"!==a.publicKeyImporters[t.number].method)a.finalizedNetwork=e.network,a.finalizedAddressType=e.addressType;else if(!1===t.value&&""!==e.finalizedNetwork){1===Object.values(e.publicKeyImporters).reduce((function(e,t){return!0===t.finalized&&"text"!==t.method?e+1:e}),0)&&(a.finalizedNetwork="",a.finalizedAddressType="",Object.values(a.publicKeyImporters).forEach((function(e){return e.conflict=!1})))}return a}var Wi={walletMode:le,walletName:"My Multisig Wallet",nodesLoaded:!1};function Hi(e){return di(e,{walletMode:le})}var Gi={chosen:!1,publicKeyImporter:Object(F.a)({},{bip32Path:"",method:"",publicKey:""}),network:ae.MAINNET,addressType:ae.P2SH,publicKeys:[],address:"",defaultBIP32Path:Object(ae.multisigBIP32Path)(ae.P2SH,ae.MAINNET)};function qi(e,t,a){var n={};return n[a]=t.value,Object(F.a)({},e,{},{publicKeyImporter:Object(F.a)({},e.publicKeyImporter,{},n)})}function Xi(e,t){var a=t.value,n=Object(ae.multisigAddressType)(a),r=Object(ae.multisigBIP32Path)(n,e.network);return Object(F.a)({},e,{},{network:e.network,addressType:n,publicKeys:Object(ae.multisigPublicKeys)(a),address:a.address,defaultBIP32Path:r})}var Yi={name:"",method:"",publicKeys:[],signature:[],bip32Path:"",finalized:!1},Vi={};function Zi(e,t){for(var a={},n=1;n<=t.value;n+=1)a[n]=Object(F.a)({},Yi,{},{name:"Signature ".concat(n)});return a}function Ji(e,t,a){var n={};n[a]=t.value;var r=Object(F.a)({},e);return r[t.number]=di(e[t.number],n),r}function Qi(e,t){var a=Object(F.a)({},e);return a[t.number]=di(e[t.number],t.value),a}function $i(e,t){var a=e.txid.toLowerCase(),n=t.txid.toLowerCase();return a<n?-1:a>n?1:e.n<t.n?-1:e.n>t.n?1:0}var el={address:"",amount:"",amountSats:"",addressError:"",amountError:""},tl=function(){return[Object(F.a)({},el)]},al={chosen:!1,network:ae.MAINNET,inputs:[],inputsTotalSats:new W.a(0),outputs:tl(),changeOutputIndex:0,feeRate:"",feeRateError:"",fee:"",feeError:"",finalizedOutputs:!1,txid:"",balanceError:"",addressType:ae.P2SH,requiredSigners:2,totalSigners:3,unsignedTransaction:{},isWallet:!1,autoSpend:!0,changeAddress:"",updatesComplete:!0,signingKeys:[0,0],spendingStep:0};function nl(e,t){var a=t.value.map((function(e){return e.amountSats})).reduce((function(e,t){return e.plus(t)}),new W.a(0));return di(e,{inputs:t.value.sort($i),inputsTotalSats:a})}function rl(e){return e.outputs.map((function(e){return Object(ae.bitcoinsToSatoshis)(new W.a(e.amount||0))})).reduce((function(e,t){return e.plus(t)}),new W.a(0))}function sl(e,t,a){return Object(ae.satoshisToBitcoins)(Object(ae.estimateMultisigTransactionFee)({addressType:e.addressType,numInputs:e.inputs.length,numOutputs:a,m:e.requiredSigners,n:e.totalSigners,feesPerByteInSatoshis:t})).toString()}function ol(e,t){for(var a=Object(F.a)({},e),n=[],r=0;r<a.outputs.length;r+=1)r!==t.number-1?n.push(a.outputs[r]):t.number===a.changeOutputIndex&&(a.changeOutputIndex=0),t.number<a.changeOutputIndex&&(a.changeOutputIndex-=1);return Object(F.a)({},a,{},{outputs:n,fee:sl(a,a.feeRate,n.length)})}function il(e,t){var a=t.value,n=Object(ae.validateFeeRate)(a),r=""===n?sl(e,a,e.outputs.length):"";return di(e,{feeRate:a,feeRateError:n,fee:r,feeError:""})}function ll(e,t){var a=t.value,n=Object(ae.bitcoinsToSatoshis)(a),r=Object(ae.validateFee)(n,e.inputsTotalSats),s=""===r?Object(ae.estimateMultisigTransactionFeeRate)({addressType:e.addressType,numInputs:e.inputs.length,numOutputs:e.outputs.length,m:e.requiredSigners,n:e.totalSigners,feesInSatoshis:n}).toFixed(0):"";return di(e,{fee:a,feeError:r,feeRate:s,feeRateError:""})}function cl(e){var t=e.outputs.concat(Object(F.a)({},el));return Object(F.a)({},e,{},{outputs:t,fee:sl(e,e.feeRate,t.length)})}function ul(e,t){var a=Object(he.a)(e.outputs),n=t.value,r=Object(ae.validateAddress)(n,e.network);if(""===r)for(var s=0;s<e.inputs.length;s+=1){var o=e.inputs[s];if(o.multisig&&n===o.multisig.address){r="Output address cannot equal input address.";break}}if(""===r)for(var i=0;i<e.outputs.length;i+=1)if(i!==t.number-1&&e.outputs[i].address===n){r="Duplicate output address.";break}return a[t.number-1].address=n,a[t.number-1].addressError=r,Object(F.a)({},e,{},{outputs:a})}function dl(e,t){var a=Object(he.a)(e.outputs),n=t.value,r=Object(ae.bitcoinsToSatoshis)(W()(n)),s=e.inputs.length?Object(ae.validateOutputAmount)(r,e.inputsTotalSats):"";e.isWallet&&"Output amount is too large."===s&&(s=""),e.isWallet&&t.number===e.changeOutputIndex&&(s="");var o=W()(n).dp();return o>8&&(n=n.slice(0,8-o)),a[t.number-1].amount=n,a[t.number-1].amountError=s,a[t.number-1].amountSats=s?"":r,Object(F.a)({},e,{},{outputs:a})}function pl(e,t){var a=Object(ae.unsignedMultisigTransaction)(e.network,e.inputs,e.outputs);return Object(F.a)({},e,{},{finalizedOutputs:t.value,unsignedTransaction:a})}function ml(e,t){return di(e,{requiredSigners:t.value,signingKeys:Array(t.value).fill(0)})}function El(e,t){var a=Object(he.a)(e.signingKeys);return a[t.number-1]=t.value,di(e,{signingKeys:a})}function hl(e){var t=di(e,{outputs:tl(),fee:"",balanceError:"",changeOutputIndex:0});return t.isWallet&&(t=cl(t),t=ul(t=dl(t=di(t,{changeOutputIndex:2}),{number:2,value:"0"}),{number:2,value:t.changeAddress})),t}function fl(e){var t=di(e,Object(F.a)({},al,{totalSigners:e.totalSigners,network:e.network,addressType:e.addressType,isWallet:e.isWallet,changeAddress:e.changeAddress}));return t=hl(t=ml(t,{value:e.requiredSigners}))}function bl(e,t){var a=Object(F.a)({},e);if(a.outputs.find((function(e){return""!==e.addressError||""!==e.amountError}))||""!==a.feeError||""!==a.feeRateError||0===a.inputs.length)return Object(F.a)({},a,{},{balanceError:""});var n=Object(ae.bitcoinsToSatoshis)(new W.a(a.fee)),r=rl(a);if(!a.inputsTotalSats.isEqualTo(r.plus(n))){var s=r.plus(n).minus(a.inputsTotalSats),o="";if(s.isNaN())o="Cannot calculate total.";else if(a.isWallet&&a.autoSpend){var i=function(e,t,a,n){var r,s=e,o=Object(ae.satoshisToBitcoins)(W()(546));r=s.changeOutputIndex>0?Object(ae.satoshisToBitcoins)(s.outputs[s.changeOutputIndex-1].amountSats.minus(t)):Object(ae.satoshisToBitcoins)(t.times(-1));if(r.isLessThan(o)&&r.isGreaterThanOrEqualTo(0)){s=ol(s,{number:s.changeOutputIndex});var i=(s=di(s,{changeOutputIndex:0})).inputsTotalSats.minus(a).abs();return bl(s=ll(s,{value:Object(ae.satoshisToBitcoins)(i).toFixed(8)}))}if(0===s.changeOutputIndex&&r.isGreaterThanOrEqualTo(o))return s=cl(s),bl(s=dl(s=ul(s=di(s,{changeOutputIndex:s.outputs.length}),{number:s.outputs.length,value:s.changeAddress}),{number:s.outputs.length,value:"0"}));r.isGreaterThanOrEqualTo(o)&&(s=dl(s,{value:r.toFixed(8),number:s.changeOutputIndex}));var l=rl(s);s=di(s,{fee:sl(s,s.feeRate,s.outputs.length)});var c=Object(ae.bitcoinsToSatoshis)(new W.a(s.fee)),u="";if(!s.inputsTotalSats.isEqualTo(l.plus(c))&&n){var d=l.plus(c).minus(s.inputsTotalSats),p=d.isLessThan(0)?"Increase":"Insufficient Funds, Decrease";u="".concat(p," by ").concat(Object(ae.satoshisToBitcoins)(d.absoluteValue()).toFixed(8),".")}return{newState:s,balanceError:u}}(a=di(a,{updatesComplete:t}),s,r,t);a=i.newState,o=i.balanceError}else{a=di(a,{updatesComplete:!0});var l=s.isLessThan(0)?"Increase":"Decrease";o="".concat(l," by ").concat(Object(ae.satoshisToBitcoins)(s.absoluteValue()).toFixed(8),".")}return Object(F.a)({},a,{},{balanceError:o})}return Object(F.a)({},a,{},{balanceError:""})}var vl={type:"",version:"",note:"",status:Wa.PENDING},gl=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){return Object(Q.a)(this,a),t.apply(this,arguments)}return Object($.a)(a,[{key:"postprocess",value:function(e){return e.pubkey?e.pubkey:e}},{key:"name",value:function(){return"Export ".concat(this.params.network," public key at ").concat(this.params.bip32Path)}},{key:"description",value:function(){return c.a.createElement("p",null,"Export a public key at BIP32 path",c.a.createElement("code",null,this.params.bip32Path),".")}},{key:"interaction",value:function(){return Object(Wa.ExportPublicKey)({keystore:this.params.keystore,network:this.params.network,bip32Path:this.params.bip32Path})}},{key:"expected",value:function(){return ae.TEST_FIXTURES.nodes[this.params.bip32Path].pub}}]),a}(yo),Pl=function(e){return[new gl({keystore:e,network:ae.TESTNET,bip32Path:"m/45'/1'/0'/0/0"}),new gl({keystore:e,network:ae.TESTNET,bip32Path:"m/48'/1'/0'/1'/0/0"}),new gl({keystore:e,network:ae.TESTNET,bip32Path:"m/48'/1'/0'/2'/0/0"}),new gl({keystore:e,network:ae.MAINNET,bip32Path:"m/45'/0'/0'/0/0"}),new gl({keystore:e,network:ae.MAINNET,bip32Path:"m/48'/0'/0'/1'/0/0"}),new gl({keystore:e,network:ae.MAINNET,bip32Path:"m/48'/0'/0'/2'/0/0"})]},yl=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){return Object(Q.a)(this,a),t.apply(this,arguments)}return Object($.a)(a,[{key:"postprocess",value:function(e){return e.pubkey?e.pubkey:e}},{key:"name",value:function(){return"Export ".concat(this.params.network," xpub at ").concat(this.params.bip32Path)}},{key:"description",value:function(){return c.a.createElement("p",null,"Export an extended public key at BIP32 path"," ",c.a.createElement("code",null,this.params.bip32Path))}},{key:"interaction",value:function(){return Object(Wa.ExportExtendedPublicKey)({keystore:this.params.keystore,network:this.params.network,bip32Path:this.params.bip32Path})}},{key:"expected",value:function(){return this.params.network===ae.MAINNET?ae.TEST_FIXTURES.nodes[this.params.bip32Path].xpub:ae.TEST_FIXTURES.nodes[this.params.bip32Path].tpub}}]),a}(yo),Sl=function(e){return[new yl({keystore:e,network:ae.TESTNET,bip32Path:"m/45'/0'/0'"}),new yl({keystore:e,network:ae.TESTNET,bip32Path:"m/45'/0'/0'/0"}),new yl({keystore:e,network:ae.TESTNET,bip32Path:"m/45'/0'/0'/0/0"}),new yl({keystore:e,network:ae.TESTNET,bip32Path:"m/45'/0'/4'"}),new yl({keystore:e,network:ae.TESTNET,bip32Path:"m/45'/0'/4'/0/0"}),new yl({keystore:e,network:ae.TESTNET,bip32Path:"m/45'/0'/4'/6/2"}),new yl({keystore:e,network:ae.TESTNET,bip32Path:"m/45'/0'/4'/99'"}),new yl({keystore:e,network:ae.TESTNET,bip32Path:"m/45'/0'/4'/99'/0/0"}),new yl({keystore:e,network:ae.TESTNET,bip32Path:"m/45'/0'/4'/99'/2147483647/3/1"}),new yl({keystore:e,network:ae.MAINNET,bip32Path:"m/45'/0'/0'"}),new yl({keystore:e,network:ae.MAINNET,bip32Path:"m/45'/0'/0'/0"}),new yl({keystore:e,network:ae.MAINNET,bip32Path:"m/45'/0'/0'/0/0"}),new yl({keystore:e,network:ae.MAINNET,bip32Path:"m/45'/0'/4'"}),new yl({keystore:e,network:ae.MAINNET,bip32Path:"m/45'/0'/4'/0/0"}),new yl({keystore:e,network:ae.MAINNET,bip32Path:"m/45'/0'/4'/6/2"}),new yl({keystore:e,network:ae.MAINNET,bip32Path:"m/45'/0'/4'/99'"}),new yl({keystore:e,network:ae.MAINNET,bip32Path:"m/45'/0'/4'/99'/0/0"}),new yl({keystore:e,network:ae.MAINNET,bip32Path:"m/45'/0'/4'/99'/2147483647/3/1"})]},Tl=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){return Object(Q.a)(this,a),t.apply(this,arguments)}return Object($.a)(a,[{key:"postprocess",value:function(e){return e.signatures?e.signatures:e}},{key:"matches",value:function(e,t){return JSON.stringify(e)===JSON.stringify(t)}},{key:"description",value:function(){return c.a.createElement(S.a,null,c.a.createElement("p",null,"Sign a transaction which",this.params.description,"."),c.a.createElement("p",null,c.a.createElement("small",null,"This transaction is not meant to be broadcast, but just in case, the output address is fixed and owned by Unchained Capital.")),c.a.createElement(Ut.a,null,c.a.createElement(Wt.a,null,c.a.createElement(Ft.a,null,c.a.createElement(zt.a,null,"Output Address:"),c.a.createElement(zt.a,null,H(Object(ae.blockExplorerAddressURL)(this.outputAddress(),this.params.network),c.a.createElement("code",null,this.outputAddress())))),c.a.createElement(Ft.a,null,c.a.createElement(zt.a,null,"Output Amount:"),c.a.createElement(zt.a,null,Object(ae.satoshisToBitcoins)(this.outputAmountSats()).toString()," BTC")),c.a.createElement(Ft.a,null,c.a.createElement(zt.a,null,"Fees:"),c.a.createElement(zt.a,null,Object(ae.satoshisToBitcoins)(this.feeSats()).toString()," BTC")))))}},{key:"inputsTotalSats",value:function(){return this.params.inputs.reduce((function(e,t){return e+t.amountSats.toNumber()}),0)}},{key:"outputAddress",value:function(){return this.params.outputs[0].address}},{key:"outputAmountSats",value:function(){return this.params.outputs[0].amountSats.toNumber()}},{key:"feeSats",value:function(){return this.inputsTotalSats()-this.outputAmountSats()}},{key:"unsignedTransaction",value:function(){return Object(ae.unsignedMultisigTransaction)(this.params.network,this.params.inputs,this.params.outputs)}},{key:"interaction",value:function(){return Object(Wa.SignMultisigTransaction)({keystore:this.params.keystore,network:this.params.network,inputs:this.params.inputs,outputs:this.params.outputs,bip32Paths:this.params.bip32Paths})}},{key:"expected",value:function(){return this.params.signature}}]),a}(yo);function Il(e){return ae.TEST_FIXTURES.transactions.map((function(t){return new Tl(Object(F.a)({},t,{},{keystore:e}))}))}var Ol=Pl(Wa.TREZOR).concat(Sl(Wa.TREZOR)).concat(Il(Wa.TREZOR)),wl=Pl(Wa.LEDGER).concat(Sl(Wa.LEDGER)).concat(Il(Wa.LEDGER)),xl=Pl(Wa.HERMET).concat(Sl(Wa.HERMET)).concat(Il(Wa.HERMET)),Cl={};Cl[Wa.TREZOR]=Ol,Cl[Wa.LEDGER]=wl,Cl[Wa.HERMIT]=xl;var Rl={startedAt:"",endedAt:"",status:Wa.PENDING,message:"",note:""},jl={started:!1,startedAt:"",endedAt:"",testRuns:[],currentTestRunIndex:-1},kl=function(e){return""===e.keystoreType?[]:(Cl[e.keystoreType]||[]).map((function(e){return Object(F.a)({},Rl,{},{test:e})}))},Nl=function(e,t,a){return Object(F.a)({},e,{},{testRuns:e.testRuns.map((function(e,n){return n===t?Object(F.a)({},e,{},a):e}))})},_l={message:"",open:!1},Al=Object(p.c)({ownership:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gi,t=arguments.length>1?arguments[1]:void 0,a=qi(e,{value:""},"publicKey");switch(t.type){case"CHOOSE_CONFIRM_OWNERSHIP":return di(e,{chosen:!0});case"SET_NETWORK":return di(e,{network:t.value});case"SET_OWNERSHIP_MULTISIG":return Xi(e,t);case"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH":return qi(a,t,"bip32Path");case"SET_PUBLIC_KEY_IMPORTER_METHOD":return qi(e,t,"method");case"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY":return qi(e,t,"publicKey");case"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH":return qi(e,{value:e.defaultBIP32Path},"bip32Path");case"RESET_PUBLIC_KEY_IMPORTER":return Object(F.a)({},e,{},{publicKeyImporter:Object(F.a)({},e.publicKeyImporter,{},{bip32Path:e.defaultBIP32Path,publicKey:""})});default:return e}},transaction:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:al,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHOOSE_PERFORM_SPEND":return di(e,{chosen:!0});case"SET_NETWORK":return di(e,{network:t.value});case"SET_ADDRESS_TYPE":return di(e,{addressType:t.value});case"SET_REQUIRED_SIGNERS":return ml(e,t);case"SET_TOTAL_SIGNERS":return di(e,{totalSigners:t.value});case"SET_INPUTS":return bl(nl(e,t));case"ADD_OUTPUT":return bl(cl(e));case"SET_CHANGE_OUTPUT_INDEX":return di(e,{changeOutputIndex:t.value});case"SET_OUTPUT_ADDRESS":return bl(ul(e,t));case"SET_OUTPUT_AMOUNT":return bl(dl(e,t));case"DELETE_OUTPUT":return bl(ol(e,t));case"SET_FEE_RATE":return bl(il(e,t),!0);case"SET_FEE":return bl(ll(e,t));case"FINALIZE_OUTPUTS":return pl(e,t);case"RESET_OUTPUTS":return hl(e);case"SET_TXID":return di(e,{txid:t.value});case"SET_IS_WALLET":return di(e,{isWallet:!0});case"RESET_TRANSACTION":return fl(e);case"UPDATE_AUTO_SPEND":return di(e,{autoSpend:t.value});case"SET_SIGNING_KEY":return El(e,t);case"SET_CHANGE_ADDRESS":return di(e,{changeAddress:t.value});case"RESET_NODES_SPEND":return nl(e,{value:[]});case"SET_SPEND_STEP":return di(e,{spendingStep:t.value});default:return e}},signatureImporters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vi,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RESET_TRANSACTION":return Object(F.a)({},Vi);case"SET_REQUIRED_SIGNERS":return Zi(0,t);case"SET_SIGNATURE_IMPORTER_NAME":return Ji(e,t,"name");case"SET_SIGNATURE_IMPORTER_METHOD":return Ji(e,t,"method");case"SET_SIGNATURE_IMPORTER_BIP32_PATH":return Ji(e,t,"bip32Path");case"SET_SIGNATURE_IMPORTER_SIGNATURE":return Ji(e,t,"signature");case"SET_SIGNATURE_IMPORTER_PUBLIC_KEYS":return Ji(e,t,"publicKeys");case"SET_SIGNATURE_IMPORTER_FINALIZED":return Ji(e,t,"finalized");case"SET_SIGNATURE_IMPORTER_COMPLETE":return Qi(e,t);default:return e}}}),Kl=Object(p.c)({deposits:gi("UPDATE_DEPOSIT_SLICE"),change:gi("UPDATE_CHANGE_SLICE"),common:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wi,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_WALLET_MODE":return di(e,{walletMode:t.value});case"UPDATE_WALLET_NAME":return di(e,{walletName:t.value});case"RESET_WALLET_VIEW":return Hi(e);case"INITIAL_LOAD_COMPLETE":return di(e,{nodesLoaded:!0});default:return e}}}),Ml=Object(p.c)({settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pi,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NETWORK":return di(e,{network:t.value});case"SET_TOTAL_SIGNERS":return di(e,{totalSigners:t.value});case"SET_REQUIRED_SIGNERS":return di(e,{requiredSigners:t.value});case"SET_ADDRESS_TYPE":return di(e,{addressType:t.value});case"SET_FROZEN":return di(e,{frozen:t.value});default:return e}},client:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mi,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CLIENT_TYPE":return di(e,{type:t.value});case"SET_CLIENT_URL":return di(e,{url:t.value});case"SET_CLIENT_USERNAME":return di(e,{username:t.value});case"SET_CLIENT_PASSWORD":return di(e,{password:t.value});case"SET_CLIENT_URL_ERROR":return di(e,{urlError:t.value});case"SET_CLIENT_USERNAME_ERROR":return di(e,{usernameError:t.value});case"SET_CLIENT_PASSWORD_ERROR":return di(e,{passwordError:t.value});default:return e}},address:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ni,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NETWORK":return Li(e,t);case"SET_ADDRESS_TYPE":return Fi(e,t);case"SET_TOTAL_SIGNERS":return Di(e,t);case"SET_PUBLIC_KEY_IMPORTER_NAME":return Bi(e,t,"name");case"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH":return Bi(Bi(e,{number:t.number,value:e.defaultBIP32Path},"bip32Path"),{number:t.number,value:!1},"bip32PathModified");case"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH":return Bi(Bi(e,t,"bip32Path"),{number:t.number,value:!0},"bip32PathModified");case"SET_PUBLIC_KEY_IMPORTER_METHOD":return Bi(e,t,"method");case"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY":return Bi(e,t,"publicKey");case"SET_PUBLIC_KEY_IMPORTER_FINALIZED":return Bi(zi(e,t),t,"finalized");case"MOVE_PUBLIC_KEY_IMPORTER_UP":return _i(e,t);case"MOVE_PUBLIC_KEY_IMPORTER_DOWN":return Ai(e,t);case"SORT_PUBLIC_KEY_IMPORTERS":return Ki(e);case"UPDATE_MULTISIG_ADDRESS":return di(e,{address:t.value});default:return e}},spend:Al,quorum:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Si,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NETWORK":return xi(e,t);case"SET_ADDRESS_TYPE":return Ci(e,t);case"SET_TOTAL_SIGNERS":return Oi(e,t);case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_NAME":return Ii(e,t,"name");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH":return Ii(Ii(e,t,"bip32Path"),{number:t.number,value:!0},"bip32PathModified");case"RESET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH":return Ii(Ii(e,{number:t.number,value:e.defaultBIP32Path},"bip32Path"),{number:t.number,value:!1},"bip32PathModified");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_METHOD":return Ii(e,t,"method");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY":return Ii(e,t,"extendedPublicKey");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_FINALIZED":return Ii(Ri(e,t),t,"finalized");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_VISIBLE":return Object(F.a)({},e,{},{configuring:t.value});default:return e}},wallet:Kl,testSuiteRun:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jl,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case zs:return Object(F.a)({},e,{},{testRuns:kl(t)});case Ds:return Object(F.a)({},e,{},{started:!0,startedAt:po()(),currentTestRunIndex:0});case Us:return Object(F.a)({},e,{},{currentTestRunIndex:t.value});case Ys:return Nl(e,t.testRunIndex,{startedAt:po()(),status:Wa.ACTIVE});case Vs:return Nl(e,t.testRunIndex,{endedAt:po()(),status:t.status,message:t.message});case Zs:return Nl(e,t.testRunIndex,Rl);case Js:return Nl(e,t.testRunIndex,{note:t.note});default:return e}},keystore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vl,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case zs:return Object(F.a)({},e,{},{type:t.keystoreType,version:t.version});case Ws:return Object(F.a)({},e,{},{note:t.value});case Hs:return Object(F.a)({},e,{},{status:t.value});default:return e}},errorNotification:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ur:return Object(F.a)({},e,{},{open:!0,message:t.value});case Lr:return Object(F.a)({},e,{},{open:!1,message:""});default:return e}}}),Bl=function(e,t){var a=e;return"RESET_WALLET"===t.type&&(a=void 0),Ml(a,t)},Dl=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||p.d,Ul=Object(p.e)(Bl,Dl(Object(p.a)(h.a,f.a)));d.a.render(c.a.createElement(m.a,{store:Ul},c.a.createElement(li,null)),document.getElementById("app")),function(){if("serviceWorker"in navigator){if(new URL("/caravan",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/caravan","/service-worker.js");ci?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ui(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):ui(e)}))}}()},414:function(e,t,a){},691:function(e){e.exports=JSON.parse('{"a":"0.1.5"}')},699:function(e,t,a){e.exports=a(1054)},729:function(e,t){},732:function(e,t){},752:function(e,t){},754:function(e,t){},90:function(e,t,a){e.exports={feeMagicBtn:"styles_feeMagicBtn__QX0iX",utxoTxid:"styles_utxoTxid__1p6kt",outputsFormInput:"styles_outputsFormInput__3Osdm",unconfirmed:"styles_unconfirmed__3KzJ4",spent:"styles_spent__10i2F",outputsFormLabel:"styles_outputsFormLabel__NZOnp"}}},[[699,1,2]]]);
//# sourceMappingURL=main.2f3135ac.chunk.js.map